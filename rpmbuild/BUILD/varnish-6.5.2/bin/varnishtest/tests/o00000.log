**** dT   0.000
*    top  TEST ./tests/o00000.vtc starting
**** top  extmacro def pwd=/root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest
**** top  extmacro def localhost=127.0.0.1
**** top  extmacro def bad_backend=127.0.0.1 44605
**** top  extmacro def bad_ip=192.0.2.255
**** top  extmacro def topbuild=/root/rpmbuild/BUILD/varnish-6.5.2
**** top  macro def testdir=/root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest/./tests
**** top  macro def tmpdir=/tmp/vtc.72800.0142a5af
**   top  === varnishtest "PROXY1 protocol tests"
*    top  VTEST PROXY1 protocol tests
**   top  === server s1 {
**   s1   Starting server
**** s1   macro def s1_addr=127.0.0.1
**** s1   macro def s1_port=44547
**** s1   macro def s1_sock=127.0.0.1 44547
*    s1   Listen on 127.0.0.1 44547
**   top  === varnish v1 -proto "PROXY" -vcl+backend {
**   s1   Started on 127.0.0.1 44547 (1 iterations)
**** dT   0.004
**   v1   Launch
***  v1   CMD: cd ${pwd} && exec varnishd  -d -n /tmp/vtc.72800.0142a5af/v1 -l 2m -p auto_restart=off -p syslog_cli_traffic=off -p sigsegv_handler=on -p thread_pool_min=10 -p debug=+vtc_mode -p vsl_mask=+Debug -a '127.0.0.1:0',PROXY -M '127.0.0.1 36919' -P /tmp/vtc.72800.0142a5af/v1/varnishd.pid -p vmod_path=/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_blob/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_cookie/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_std/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_vtc/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_unix/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_proxy/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_purge/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_directors/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_debug/.libs 
***  v1   CMD: cd /root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest && exec varnishd  -d -n /tmp/vtc.72800.0142a5af/v1 -l 2m -p auto_restart=off -p syslog_cli_traffic=off -p sigsegv_handler=on -p thread_pool_min=10 -p debug=+vtc_mode -p vsl_mask=+Debug -a '127.0.0.1:0',PROXY -M '127.0.0.1 36919' -P /tmp/vtc.72800.0142a5af/v1/varnishd.pid -p vmod_path=/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_blob/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_cookie/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_std/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_vtc/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_unix/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_proxy/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_purge/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_directors/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_debug/.libs 
***  v1   PID: 72819
**** v1   macro def v1_pid=72819
**** v1   macro def v1_name=/tmp/vtc.72800.0142a5af/v1
**** dT   0.012
***  v1   debug|Debug: Version: varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
***  v1   debug|Debug: Platform: Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
***  v1   debug|200 321     
***  v1   debug|-----------------------------
***  v1   debug|Varnish Cache CLI 1.0
***  v1   debug|-----------------------------
***  v1   debug|Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
***  v1   debug|varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
***  v1   debug|
***  v1   debug|Type 'help' for command list.
***  v1   debug|Type 'quit' to close CLI session.
***  v1   debug|Type 'start' to launch worker process.
***  v1   debug|
**** dT   0.110
**** v1   CLIPOLL 1 0x1 0x0
***  v1   CLI connection fd = 7
***  v1   CLI RX  107
**** v1   CLI RX|awyoxoihjsvcaanuoxuppnyixlgmylwm
**** v1   CLI RX|
**** v1   CLI RX|Authentication required.
**** dT   0.111
**** v1   CLI TX|auth a99057ba46ac9e85dff3dc5661cd96f90272fed67b97ec971cd0a22fc4befe51
***  v1   CLI RX  200
**** v1   CLI RX|-----------------------------
**** v1   CLI RX|Varnish Cache CLI 1.0
**** v1   CLI RX|-----------------------------
**** v1   CLI RX|Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
**** v1   CLI RX|varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
**** v1   CLI RX|
**** v1   CLI RX|Type 'help' for command list.
**** v1   CLI RX|Type 'quit' to close CLI session.
**** v1   CLI RX|Type 'start' to launch worker process.
**** v1   CLI TX|vcl.inline vcl1 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.1;
**** v1   CLI TX|backend s1 { .host = "127.0.0.1"; .port = "44547"; }
**** v1   CLI TX|
**** v1   CLI TX|
**** v1   CLI TX|\timport std;
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_deliver {
**** v1   CLI TX|\t\tset resp.http.url = req.url;
**** v1   CLI TX|\t\tset resp.http.li = local.ip;
**** v1   CLI TX|\t\tset resp.http.lp = std.port(local.ip);
**** v1   CLI TX|\t\tset resp.http.ri = remote.ip;
**** v1   CLI TX|\t\tset resp.http.rp = std.port(remote.ip);
**** v1   CLI TX|\t\tset resp.http.ci = client.ip;
**** v1   CLI TX|\t\tset resp.http.cp = std.port(client.ip);
**** v1   CLI TX|\t\tset resp.http.si = server.ip;
**** v1   CLI TX|\t\tset resp.http.sp = std.port(server.ip);
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.212
***  v1   vsl|No VSL chunk found (child not started ?)
**** dT   0.283
***  v1   CLI RX  200
**** v1   CLI RX|VCL compiled.
**** v1   CLI TX|vcl.use vcl1
***  v1   CLI RX  200
**   v1   Start
**** v1   CLI TX|start
**** dT   0.285
***  v1   debug|Debug: Child (72842) Started
**** dT   0.311
***  v1   CLI RX  200
***  v1   wait-running
**** v1   CLI TX|status
***  v1   debug|Info: Child (72842) said Child starts
***  v1   CLI RX  200
**** v1   CLI RX|Child in state running
**** v1   CLI TX|debug.listen_address
***  v1   CLI RX  200
**** v1   CLI RX|127.0.0.1 39973
**** v1   CLI TX|debug.xid 999
***  v1   CLI RX  200
**** v1   CLI RX|XID is 999
**** v1   CLI TX|debug.listen_address
***  v1   CLI RX  200
**** v1   CLI RX|127.0.0.1 39973
**   v1   Listen on 127.0.0.1 39973
**** v1   macro def v1_addr=127.0.0.1
**** v1   macro def v1_port=39973
**** v1   macro def v1_sock=127.0.0.1 39973
**** dT   0.312
**** v1   vsl|          0 CLI             - Rd vcl.load "vcl1" vcl_vcl1.1634892901.869688/vgc.so 1auto
**** v1   vsl|          0 CLI             - Wr 200 52 Loaded "vcl_vcl1.1634892901.869688/vgc.so" as "vcl1"
**** v1   vsl|          0 CLI             - Rd vcl.use "vcl1"
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|          0 CLI             - Rd start
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|          0 CLI             - Rd debug.listen_address 
**** v1   vsl|          0 CLI             - Wr 200 16 127.0.0.1 39973

**** v1   vsl|          0 CLI             - Rd debug.xid 999 
**** v1   vsl|          0 CLI             - Wr 200 10 XID is 999
**** v1   vsl|          0 CLI             - Rd debug.listen_address 
**** v1   vsl|          0 CLI             - Wr 200 16 127.0.0.1 39973

**** dT   0.411
**   top  === logexpect l1 -v v1 {
**** dT   0.412
**   l1   === expect * 1002	ProxyGarbage	"PROXY1: Too few fields"
**   l1   === expect * 1003	ProxyGarbage	"PROXY1: Too many fields"
**   l1   === expect * 1004	ProxyGarbage	"PROXY1: Wrong TCP\\[46\\] field"
**   l1   === expect * 1005	ProxyGarbage	"PROXY1: Cannot resolve source ad...
**   l1   === expect * 1007	ProxyGarbage	"PROXY1: Cannot resolve destinati...
**   l1   === expect * 1009	ProxyGarbage	"PROXY1: Cannot resolve source ad...
**   l1   === expect * 1011	ProxyGarbage	"PROXY1: Cannot resolve source ad...
**   l1   === expect * 1015	Proxy		"1 1.2.3.4 1234 5.6.7.8 5678"
**   l1   === expect * 1018	Proxy		"1 1:f::2 1234 5:a::8 5678"
**   l1   === expect * 1021	Proxy		"1 1:f::3 1234 5:a::8 5678"
**   l1   === expect * 1025	ProxyGarbage	"PROXY1: Too many fields"
**   l1   === expect * 1026	ProxyGarbage	"PROXY1: Too many fields"
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40910 to 127.0.0.1 39973
**   c1   === send "XYZ\r\n"
**** c1   send|XYZ\r
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** l1   begin|
***  l1   expecting| expect * 1002 ProxyGarbage PROXY1: Too few fields
**** dT   0.512
**** v1   vsl|       1000 Begin           c sess 0 PROXY
**** v1   vsl|       1000 SessOpen        c 127.0.0.1 40910 a0 127.0.0.1 39973 1634892902.170651 25
**** v1   vsl|       1000 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1000 End             c 
**** dT   0.513
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40912 to 127.0.0.1 39973
**   c1   === send "PROXY "
**** c1   send|PROXY 
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** dT   0.612
**** v1   vsl|       1001 Begin           c sess 0 PROXY
**** v1   vsl|       1001 SessOpen        c 127.0.0.1 40912 a0 127.0.0.1 39973 1634892902.271310 26
**** dT   3.315
**** v1   vsl|          0 CLI             - Rd ping
**** v1   vsl|          0 CLI             - Wr 200 19 PONG 1634892905 1.0
**** dT   5.517
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   5.518
**** v1   vsl|       1001 SessClose       c RX_JUNK 5.004
**** v1   vsl|       1001 End             c 
**** dT   5.618
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40958 to 127.0.0.1 39973
**   c1   === send "PROXY A B C D\r\n"
**** c1   send|PROXY A B C D\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**** v1   vsl|       1002 Begin           c sess 0 PROXY
**** v1   vsl|       1002 SessOpen        c 127.0.0.1 40958 a0 127.0.0.1 39973 1634892907.376313 25
**** v1   vsl|       1002 ProxyGarbage    c PROXY1: Too few fields
**** v1   vsl|       1002 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1002 End             c 
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   5.619
**** l1   match|       1002 ProxyGarbage    c PROXY1: Too few fields
***  l1   expecting| expect * 1003 ProxyGarbage PROXY1: Too many fields
**** dT   5.818
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
**** dT   5.819
***  c1   connected fd 22 from 127.0.0.1 40960 to 127.0.0.1 39973
**   c1   === send "PROXY A B C D E F\r\n"
**** c1   send|PROXY A B C D E F\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   5.821
**** l1   match|       1003 ProxyGarbage    c PROXY1: Too many fields
***  l1   expecting| expect * 1004 ProxyGarbage PROXY1: Wrong TCP\\[46\\] field
**** dT   5.919
**** v1   vsl|       1003 Begin           c sess 0 PROXY
**** v1   vsl|       1003 SessOpen        c 127.0.0.1 40960 a0 127.0.0.1 39973 1634892907.577035 26
**** v1   vsl|       1003 ProxyGarbage    c PROXY1: Too many fields
**** v1   vsl|       1003 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1003 End             c 
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40962 to 127.0.0.1 39973
**   c1   === send "PROXY A B C D E\r\n"
**** c1   send|PROXY A B C D E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**** dT   5.920
**   top  === varnish v1 -vsl_catchup
**** dT   5.922
**** l1   match|       1004 ProxyGarbage    c PROXY1: Wrong TCP[46] field
***  l1   expecting| expect * 1005 ProxyGarbage PROXY1: Cannot resolve source address
**** dT   6.019
**** v1   vsl|       1004 Begin           c sess 0 PROXY
**** v1   vsl|       1004 SessOpen        c 127.0.0.1 40962 a0 127.0.0.1 39973 1634892907.677724 27
**** v1   vsl|       1004 ProxyGarbage    c PROXY1: Wrong TCP[46] field
**** v1   vsl|       1004 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1004 End             c 
**** dT   6.020
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40964 to 127.0.0.1 39973
**   c1   === send "PROXY TCP4 B C D E\r\n"
**** c1   send|PROXY TCP4 B C D E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.022
**** l1   match|       1005 ProxyGarbage    c PROXY1: Cannot resolve source address
***  l1   expecting| expect * 1007 ProxyGarbage PROXY1: Cannot resolve destination address
**** dT   6.119
**** v1   vsl|       1005 Begin           c sess 0 PROXY
**** v1   vsl|       1005 SessOpen        c 127.0.0.1 40964 a0 127.0.0.1 39973 1634892907.778372 25
**** v1   vsl|       1005 ProxyGarbage    c PROXY1: Cannot resolve source address
**** v1   vsl|       1005 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1005 End             c 
**** dT   6.120
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
**** dT   6.121
***  c1   connected fd 22 from 127.0.0.1 40966 to 127.0.0.1 39973
**   c1   === send "PROXY TCP4 1.2.3.4 C D E\r\n"
**** c1   send|PROXY TCP4 1.2.3.4 C D E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.219
**** v1   vsl|       1006 Begin           c sess 0 PROXY
**** v1   vsl|       1006 SessOpen        c 127.0.0.1 40966 a0 127.0.0.1 39973 1634892907.878983 26
**** v1   vsl|       1006 ProxyGarbage    c PROXY1: Cannot resolve source address
**** v1   vsl|       1006 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1006 End             c 
**** dT   6.221
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40968 to 127.0.0.1 39973
**   c1   === send "PROXY TCP4 1.2.3.4 D 1234 E\r\n"
**** c1   send|PROXY TCP4 1.2.3.4 D 1234 E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.224
**** l1   match|       1007 ProxyGarbage    c PROXY1: Cannot resolve destination address
***  l1   expecting| expect * 1009 ProxyGarbage PROXY1: Cannot resolve source address
**** dT   6.319
**** v1   vsl|       1007 Begin           c sess 0 PROXY
**** v1   vsl|       1007 SessOpen        c 127.0.0.1 40968 a0 127.0.0.1 39973 1634892907.979573 27
**** v1   vsl|       1007 ProxyGarbage    c PROXY1: Cannot resolve destination address
**** v1   vsl|       1007 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1007 End             c 
**** v1   vsl|          0 CLI             - Rd ping
**** v1   vsl|          0 CLI             - Wr 200 19 PONG 1634892908 1.0
**** dT   6.321
**   top  === client c1 {
**   c1   Starting client
**** dT   6.322
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40970 to 127.0.0.1 39973
**   c1   === send "PROXY TCP4 1.2.3.4 5.6.7.8 1234 E\r\n"
**** c1   send|PROXY TCP4 1.2.3.4 5.6.7.8 1234 E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.419
**** v1   vsl|       1008 Begin           c sess 0 PROXY
**** v1   vsl|       1008 SessOpen        c 127.0.0.1 40970 a0 127.0.0.1 39973 1634892908.080179 25
**** v1   vsl|       1008 ProxyGarbage    c PROXY1: Cannot resolve destination address
**** v1   vsl|       1008 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1008 End             c 
**** dT   6.422
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40972 to 127.0.0.1 39973
**   c1   === send "PROXY TCP6 B C D E\r\n"
**** c1   send|PROXY TCP6 B C D E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** dT   6.423
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.426
**** l1   match|       1009 ProxyGarbage    c PROXY1: Cannot resolve source address
***  l1   expecting| expect * 1011 ProxyGarbage PROXY1: Cannot resolve source address
**** dT   6.520
**** v1   vsl|       1009 Begin           c sess 0 PROXY
**** v1   vsl|       1009 SessOpen        c 127.0.0.1 40972 a0 127.0.0.1 39973 1634892908.180862 26
**** v1   vsl|       1009 ProxyGarbage    c PROXY1: Cannot resolve source address
**** v1   vsl|       1009 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1009 End             c 
**** dT   6.523
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40974 to 127.0.0.1 39973
**   c1   === send "PROXY TCP6 1:f::2 C D E\r\n"
**** c1   send|PROXY TCP6 1:f::2 C D E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.620
**** v1   vsl|       1010 Begin           c sess 0 PROXY
**** v1   vsl|       1010 SessOpen        c 127.0.0.1 40974 a0 127.0.0.1 39973 1634892908.281462 27
**** v1   vsl|       1010 ProxyGarbage    c PROXY1: Cannot resolve source address
**** v1   vsl|       1010 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1010 End             c 
**** dT   6.623
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40976 to 127.0.0.1 39973
**   c1   === send "PROXY TCP6 1:f::2 1234 D E\r\n"
**** dT   6.624
**** c1   send|PROXY TCP6 1:f::2 1234 D E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.628
**** l1   match|       1011 ProxyGarbage    c PROXY1: Cannot resolve source address
***  l1   expecting| expect * 1015 Proxy 1 1.2.3.4 1234 5.6.7.8 5678
**** dT   6.720
**** v1   vsl|       1011 Begin           c sess 0 PROXY
**** v1   vsl|       1011 SessOpen        c 127.0.0.1 40976 a0 127.0.0.1 39973 1634892908.381968 25
**** v1   vsl|       1011 ProxyGarbage    c PROXY1: Cannot resolve source address
**** v1   vsl|       1011 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1011 End             c 
**** dT   6.724
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40980 to 127.0.0.1 39973
**   c1   === send "PROXY TCP6 1:f::2 5:a::8 1234 E\r\n"
**** c1   send|PROXY TCP6 1:f::2 5:a::8 1234 E\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.820
**** v1   vsl|       1012 Begin           c sess 0 PROXY
**** v1   vsl|       1012 SessOpen        c 127.0.0.1 40980 a0 127.0.0.1 39973 1634892908.482486 26
**** v1   vsl|       1012 ProxyGarbage    c PROXY1: Cannot resolve destination address
**** v1   vsl|       1012 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1012 End             c 
**** dT   6.824
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
**** dT   6.825
***  c1   connected fd 22 from 127.0.0.1 40982 to 127.0.0.1 39973
**   c1   === send "PROXY TCP4 1:f::2 5:a::8 1234 5678\r\n"
**** c1   send|PROXY TCP4 1:f::2 5:a::8 1234 5678\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   6.920
**** v1   vsl|       1013 Begin           c sess 0 PROXY
**** v1   vsl|       1013 SessOpen        c 127.0.0.1 40982 a0 127.0.0.1 39973 1634892908.583039 27
**** v1   vsl|       1013 ProxyGarbage    c PROXY1: Cannot resolve source address
**** v1   vsl|       1013 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1013 End             c 
**** dT   6.925
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40984 to 127.0.0.1 39973
**   c1   === send "PROXY TCP6 1.2.3.4 5.6.7.8 1234 5678\r\n"
**** c1   send|PROXY TCP6 1.2.3.4 5.6.7.8 1234 5678\r
**   c1   === timeout 8
**   c1   === expect_close
**** c1   Expecting close (fd = 22)
**** c1   fd=22 EOF, as expected
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   7.020
**** v1   vsl|       1014 Begin           c sess 0 PROXY
**** v1   vsl|       1014 SessOpen        c 127.0.0.1 40984 a0 127.0.0.1 39973 1634892908.683638 25
**** v1   vsl|       1014 ProxyGarbage    c PROXY1: Cannot resolve source address
**** v1   vsl|       1014 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1014 End             c 
**** dT   7.025
**   top  === client c1 -proxy1 "1.2.3.4:1234 5.6.7.8:5678" {
**   c1   Starting client
**** dT   7.026
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40990 to 127.0.0.1 39973
**   c1   === txreq -url /1
**** c1   txreq|GET /1 HTTP/1.1\r
**** c1   txreq|Host: 127.0.0.1\r
**** c1   txreq|\r
**   c1   === rxresp
***  s1   accepted fd 5 127.0.0.1 50210
**   s1   === rxreq
**** s1   rxhdr|GET /1 HTTP/1.1\r
**** s1   rxhdr|X-Forwarded-For: 1.2.3.4\r
**** s1   rxhdr|host: 127.0.0.1\r
**** s1   rxhdr|Accept-Encoding: gzip\r
**** s1   rxhdr|X-Varnish: 1017\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 102
**** s1   http[ 0] |GET
**** s1   http[ 1] |/1
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |X-Forwarded-For: 1.2.3.4
**** s1   http[ 4] |host: 127.0.0.1
**** s1   http[ 5] |Accept-Encoding: gzip
**** s1   http[ 6] |X-Varnish: 1017
**** s1   bodylen = 0
**   s1   === expect req.http.X-Forwarded-For == 1.2.3.4
**** s1   EXPECT req.http.X-Forwarded-For (1.2.3.4) == "1.2.3.4" match
**   s1   === txresp
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|Content-Length: 0\r
**** s1   txresp|\r
**   s1   === rxreq
**** dT   7.038
**** c1   rxhdr|HTTP/1.1 200 OK\r
**** c1   rxhdr|Content-Length: 0\r
**** c1   rxhdr|Date: Fri, 22 Oct 2021 08:55:08 GMT\r
**** c1   rxhdr|X-Varnish: 1016\r
**** c1   rxhdr|Age: 0\r
**** c1   rxhdr|Via: 1.1 varnish (Varnish/6.5)\r
**** c1   rxhdr|url: /1\r
**** c1   rxhdr|li: 127.0.0.1\r
**** c1   rxhdr|lp: 39973\r
**** c1   rxhdr|ri: 127.0.0.1\r
**** c1   rxhdr|rp: 40990\r
**** c1   rxhdr|ci: 1.2.3.4\r
**** c1   rxhdr|cp: 1234\r
**** c1   rxhdr|si: 5.6.7.8\r
**** c1   rxhdr|sp: 5678\r
**** c1   rxhdr|Accept-Ranges: bytes\r
**** c1   rxhdr|Connection: keep-alive\r
**** c1   rxhdr|\r
**** c1   rxhdrlen = 285
**** c1   http[ 0] |HTTP/1.1
**** c1   http[ 1] |200
**** c1   http[ 2] |OK
**** c1   http[ 3] |Content-Length: 0
**** c1   http[ 4] |Date: Fri, 22 Oct 2021 08:55:08 GMT
**** c1   http[ 5] |X-Varnish: 1016
**** c1   http[ 6] |Age: 0
**** c1   http[ 7] |Via: 1.1 varnish (Varnish/6.5)
**** c1   http[ 8] |url: /1
**** c1   http[ 9] |li: 127.0.0.1
**** c1   http[10] |lp: 39973
**** c1   http[11] |ri: 127.0.0.1
**** c1   http[12] |rp: 40990
**** c1   http[13] |ci: 1.2.3.4
**** c1   http[14] |cp: 1234
**** c1   http[15] |si: 5.6.7.8
**** c1   http[16] |sp: 5678
**** c1   http[17] |Accept-Ranges: bytes
**** c1   http[18] |Connection: keep-alive
**** c1   bodylen = 0
**   c1   === expect resp.http.url == "/1"
**** c1   EXPECT resp.http.url (/1) == "/1" match
**   c1   === expect resp.http.ci == "1.2.3.4"
**** c1   EXPECT resp.http.ci (1.2.3.4) == "1.2.3.4" match
**   c1   === expect resp.http.cp == "1234"
**** c1   EXPECT resp.http.cp (1234) == "1234" match
**   c1   === expect resp.http.si == "5.6.7.8"
**** c1   EXPECT resp.http.si (5.6.7.8) == "5.6.7.8" match
**   c1   === expect resp.http.sp == "5678"
**** c1   EXPECT resp.http.sp (5678) == "5678" match
**   c1   === expect resp.http.li == 127.0.0.1
**** c1   EXPECT resp.http.li (127.0.0.1) == "127.0.0.1" match
**   c1   === expect resp.http.lp == 39973
**** c1   EXPECT resp.http.lp (39973) == "39973" match
**   c1   === expect resp.http.ri != "1.2.3.4"
**** c1   EXPECT resp.http.ri (127.0.0.1) != "1.2.3.4" match
**   c1   === expect resp.http.rp != "1234"
**** c1   EXPECT resp.http.rp (40990) != "1234" match
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   7.042
**** l1   match|       1015 Proxy           c 1 1.2.3.4 1234 5.6.7.8 5678
***  l1   expecting| expect * 1018 Proxy 1 1:f::2 1234 5:a::8 5678
**** dT   7.120
**** v1   vsl|       1015 Begin           c sess 0 PROXY
**** v1   vsl|       1015 SessOpen        c 127.0.0.1 40990 a0 127.0.0.1 39973 1634892908.784167 26
**** v1   vsl|       1015 Proxy           c 1 1.2.3.4 1234 5.6.7.8 5678
**** v1   vsl|       1015 Link            c req 1016 rxreq
**** v1   vsl|       1017 Begin           b bereq 1016 fetch
**** v1   vsl|       1017 VCL_use         b vcl1
**** v1   vsl|       1017 Timestamp       b Start: 1634892908.784301 0.000000 0.000000
**** v1   vsl|       1017 BereqMethod     b GET
**** v1   vsl|       1017 BereqURL        b /1
**** v1   vsl|       1017 BereqProtocol   b HTTP/1.1
**** v1   vsl|       1017 BereqHeader     b X-Forwarded-For: 1.2.3.4
**** v1   vsl|       1017 BereqHeader     b host: 127.0.0.1
**** v1   vsl|       1017 BereqHeader     b Accept-Encoding: gzip
**** v1   vsl|       1017 BereqHeader     b X-Varnish: 1017
**** v1   vsl|       1017 VCL_call        b BACKEND_FETCH
**** v1   vsl|       1017 VCL_return      b fetch
**** v1   vsl|       1017 BackendOpen     b 28 s1 127.0.0.1 44547 127.0.0.1 50210 connect
**** v1   vsl|       1017 Timestamp       b Bereq: 1634892908.784461 0.000159 0.000159
**** v1   vsl|       1017 Timestamp       b Beresp: 1634892908.784879 0.000578 0.000418
**** v1   vsl|       1017 BerespProtocol  b HTTP/1.1
**** v1   vsl|       1017 BerespStatus    b 200
**** v1   vsl|       1017 BerespReason    b OK
**** v1   vsl|       1017 BerespHeader    b Content-Length: 0
**** v1   vsl|       1017 BerespHeader    b Date: Fri, 22 Oct 2021 08:55:08 GMT
**** v1   vsl|       1017 TTL             b RFC 120 10 0 1634892909 1634892909 1634892908 0 0 cacheable
**** v1   vsl|       1017 VCL_call        b BACKEND_RESPONSE
**** v1   vsl|       1017 VCL_return      b deliver
**** v1   vsl|       1017 Filters         b 
**** v1   vsl|       1017 Storage         b malloc s0
**** v1   vsl|       1017 Fetch_Body      b 0 none -
**** v1   vsl|       1017 BackendClose    b 28 s1 recycle
**** v1   vsl|       1017 Timestamp       b BerespBody: 1634892908.795090 0.010788 0.010210
**** v1   vsl|       1017 Length          b 0
**** v1   vsl|       1017 BereqAcct       b 102 0 102 38 0 38
**** v1   vsl|       1017 End             b 
**** v1   vsl|       1016 Begin           c req 1015 rxreq
**** v1   vsl|       1016 Timestamp       c Start: 1634892908.784239 0.000000 0.000000
**** v1   vsl|       1016 Timestamp       c Req: 1634892908.784239 0.000000 0.000000
**** v1   vsl|       1016 VCL_use         c vcl1
**** v1   vsl|       1016 ReqStart        c 1.2.3.4 1234 a0
**** v1   vsl|       1016 ReqMethod       c GET
**** v1   vsl|       1016 ReqURL          c /1
**** v1   vsl|       1016 ReqProtocol     c HTTP/1.1
**** v1   vsl|       1016 ReqHeader       c Host: 127.0.0.1
**** v1   vsl|       1016 ReqHeader       c X-Forwarded-For: 1.2.3.4
**** v1   vsl|       1016 VCL_call        c RECV
**** v1   vsl|       1016 ReqUnset        c Host: 127.0.0.1
**** v1   vsl|       1016 ReqHeader       c host: 127.0.0.1
**** v1   vsl|       1016 VCL_return      c hash
**** v1   vsl|       1016 VCL_call        c HASH
**** v1   vsl|       1016 VCL_return      c lookup
**** v1   vsl|       1016 VCL_call        c MISS
**** v1   vsl|       1016 VCL_return      c fetch
**** v1   vsl|       1016 Link            c bereq 1017 fetch
**** v1   vsl|       1016 Timestamp       c Fetch: 1634892908.795142 0.010902 0.010902
**** v1   vsl|       1016 RespProtocol    c HTTP/1.1
**** v1   vsl|       1016 RespStatus      c 200
**** v1   vsl|       1016 RespReason      c OK
**** v1   vsl|       1016 RespHeader      c Content-Length: 0
**** v1   vsl|       1016 RespHeader      c Date: Fri, 22 Oct 2021 08:55:08 GMT
**** v1   vsl|       1016 RespHeader      c X-Varnish: 1016
**** v1   vsl|       1016 RespHeader      c Age: 0
**** v1   vsl|       1016 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1016 VCL_call        c DELIVER
**** v1   vsl|       1016 RespHeader      c url: /1
**** v1   vsl|       1016 RespHeader      c li: 127.0.0.1
**** v1   vsl|       1016 RespHeader      c lp: 39973
**** v1   vsl|       1016 RespHeader      c ri: 127.0.0.1
**** v1   vsl|       1016 RespHeader      c rp: 40990
**** v1   vsl|       1016 RespHeader      c ci: 1.2.3.4
**** v1   vsl|       1016 RespHeader      c cp: 1234
**** v1   vsl|       1016 RespHeader      c si: 5.6.7.8
**** v1   vsl|       1016 RespHeader      c sp: 5678
**** v1   vsl|       1016 VCL_return      c deliver
**** v1   vsl|       1016 Timestamp       c Process: 1634892908.795179 0.010940 0.000037
**** v1   vsl|       1016 Filters         c 
**** v1   vsl|       1016 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1016 RespHeader      c Connection: keep-alive
**** v1   vsl|       1016 Timestamp       c Resp: 1634892908.795245 0.011005 0.000065
**** v1   vsl|       1016 ReqAcct         c 36 0 36 285 0 285
**** v1   vsl|       1016 End             c 
**** v1   vsl|          0 ExpKill         - EXP_Inbox flg=1e p=0x7fd9240111e0 e=0.000000 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_When p=0x7fd9240111e0 e=1634893038.784880 f=0x1e
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fd9240111e0 e=129.989753 f=0x0
**** v1   vsl|       1015 SessClose       c REM_CLOSE 0.012
**** v1   vsl|       1015 End             c 
**** dT   7.138
**   top  === client c1 -proxy1 "[1:f::2]:1234 [5:a::8]:5678" {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 39973 (1 iterations)
***  c1   Connect to 127.0.0.1 39973
***  c1   connected fd 22 from 127.0.0.1 40994 to 127.0.0.1 39973
**** dT   7.139
**   c1   === txreq -url /2
**** c1   txreq|GET /2 HTTP/1.1\r
**** c1   txreq|Host: 127.0.0.1\r
**** c1   txreq|\r
**   c1   === rxresp
**** s1   rxhdr|GET /2 HTTP/1.1\r
**** s1   rxhdr|X-Forwarded-For: 1:f::2\r
**** s1   rxhdr|host: 127.0.0.1\r
**** s1   rxhdr|Accept-Encoding: gzip\r
**** s1   rxhdr|X-Varnish: 1020\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 101
**** s1   http[ 0] |GET
**** s1   http[ 1] |/2
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |X-Forwarded-For: 1:f::2
**** s1   http[ 4] |host: 127.0.0.1
**** s1   http[ 5] |Accept-Encoding: gzip
**** s1   http[ 6] |X-Varnish: 1020
**** s1   bodylen = 0
**   s1   === expect req.http.X-Forwarded-For == 1:f::2
**** s1   EXPECT req.http.X-Forwarded-For (1:f::2) == "1:f::2" match
**   s1   === txresp
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|Content-Length: 0\r
**** s1   txresp|\r
**   s1   === rxreq
**** dT   7.150
**** c1   rxhdr|HTTP/1.1 200 OK\r
**** c1   rxhdr|Content-Length: 0\r
**** c1   rxhdr|Date: Fri, 22 Oct 2021 08:55:08 GMT\r
**** c1   rxhdr|X-Varnish: 1019\r
**** c1   rxhdr|Age: 0\r
**** c1   rxhdr|Via: 1.1 varnish (Varnish/6.5)\r
**** c1   rxhdr|url: /2\r
**** c1   rxhdr|li: 127.0.0.1\r
**** c1   rxhdr|lp: 39973\r
**** c1   rxhdr|ri: 127.0.0.1\r
**** c1   rxhdr|rp: 40994\r
**** c1   rxhdr|ci: 1:f::2\r
**** c1   rxhdr|cp: 1234\r
**** c1   rxhdr|si: 5:a::8\r
**** c1   rxhdr|sp: 5678\r
**** c1   rxhdr|Accept-Ranges: bytes\r
**** c1   rxhdr|Connection: keep-alive\r
**** c1   rxhdr|\r
**** c1   rxhdrlen = 283
**** c1   http[ 0] |HTTP/1.1
**** c1   http[ 1] |200
**** c1   http[ 2] |OK
**** c1   http[ 3] |Content-Length: 0
**** c1   http[ 4] |Date: Fri, 22 Oct 2021 08:55:08 GMT
**** c1   http[ 5] |X-Varnish: 1019
**** c1   http[ 6] |Age: 0
**** c1   http[ 7] |Via: 1.1 varnish (Varnish/6.5)
**** c1   http[ 8] |url: /2
**** c1   http[ 9] |li: 127.0.0.1
**** dT   7.151
**** c1   http[10] |lp: 39973
**** c1   http[11] |ri: 127.0.0.1
**** c1   http[12] |rp: 40994
**** c1   http[13] |ci: 1:f::2
**** c1   http[14] |cp: 1234
**** c1   http[15] |si: 5:a::8
**** c1   http[16] |sp: 5678
**** c1   http[17] |Accept-Ranges: bytes
**** c1   http[18] |Connection: keep-alive
**** c1   bodylen = 0
**   c1   === expect resp.http.url == "/2"
**** c1   EXPECT resp.http.url (/2) == "/2" match
**   c1   === expect resp.http.ci == "1:f::2"
**** c1   EXPECT resp.http.ci (1:f::2) == "1:f::2" match
**   c1   === expect resp.http.cp == "1234"
**** c1   EXPECT resp.http.cp (1234) == "1234" match
**   c1   === expect resp.http.si == "5:a::8"
**** c1   EXPECT resp.http.si (5:a::8) == "5:a::8" match
**   c1   === expect resp.http.sp == "5678"
**** c1   EXPECT resp.http.sp (5678) == "5678" match
**   c1   === expect resp.http.li == 127.0.0.1
**** c1   EXPECT resp.http.li (127.0.0.1) == "127.0.0.1" match
**   c1   === expect resp.http.lp == 39973
**** c1   EXPECT resp.http.lp (39973) == "39973" match
**   c1   === expect resp.http.ri != "1:f::2"
**** c1   EXPECT resp.http.ri (127.0.0.1) != "1:f::2" match
**   c1   === expect resp.http.rp != "1234"
**** c1   EXPECT resp.http.rp (40994) != "1234" match
***  c1   closing fd 22
**   c1   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   7.153
**** l1   match|       1018 Proxy           c 1 1:f::2 1234 5:a::8 5678
***  l1   expecting| expect * 1021 Proxy 1 1:f::3 1234 5:a::8 5678
**** dT   7.221
**** v1   vsl|       1018 Begin           c sess 0 PROXY
**** v1   vsl|       1018 SessOpen        c 127.0.0.1 40994 a0 127.0.0.1 39973 1634892908.896916 27
**** v1   vsl|       1018 Proxy           c 1 1:f::2 1234 5:a::8 5678
**** v1   vsl|       1018 Link            c req 1019 rxreq
**** v1   vsl|       1020 Begin           b bereq 1019 fetch
**** v1   vsl|       1020 VCL_use         b vcl1
**** v1   vsl|       1020 Timestamp       b Start: 1634892908.897072 0.000000 0.000000
**** v1   vsl|       1020 BereqMethod     b GET
**** v1   vsl|       1020 BereqURL        b /2
**** v1   vsl|       1020 BereqProtocol   b HTTP/1.1
**** v1   vsl|       1020 BereqHeader     b X-Forwarded-For: 1:f::2
**** v1   vsl|       1020 BereqHeader     b host: 127.0.0.1
**** v1   vsl|       1020 BereqHeader     b Accept-Encoding: gzip
**** v1   vsl|       1020 BereqHeader     b X-Varnish: 1020
**** v1   vsl|       1020 VCL_call        b BACKEND_FETCH
**** v1   vsl|       1020 VCL_return      b fetch
**** v1   vsl|       1020 BackendOpen     b 28 s1 127.0.0.1 44547 127.0.0.1 50210 reuse
**** v1   vsl|       1020 Timestamp       b Bereq: 1634892908.897158 0.000086 0.000086
**** v1   vsl|       1020 Timestamp       b Beresp: 1634892908.897626 0.000554 0.000467
**** v1   vsl|       1020 BerespProtocol  b HTTP/1.1
**** v1   vsl|       1020 BerespStatus    b 200
**** v1   vsl|       1020 BerespReason    b OK
**** v1   vsl|       1020 BerespHeader    b Content-Length: 0
**** v1   vsl|       1020 BerespHeader    b Date: Fri, 22 Oct 2021 08:55:08 GMT
**** v1   vsl|       1020 TTL             b RFC 120 10 0 1634892909 1634892909 1634892908 0 0 cacheable
**** v1   vsl|       1020 VCL_call        b BACKEND_RESPONSE
**** v1   vsl|       1020 VCL_return      b deliver
**** v1   vsl|       1020 Filters         b 
**** v1   vsl|       1020 Storage         b malloc s0
**** v1   vsl|       1020 Fetch_Body      b 0 none -
**** v1   vsl|       1020 BackendClose    b 28 s1 recycle
**** v1   vsl|       1020 Timestamp       b BerespBody: 1634892908.907770 0.010698 0.010143
**** v1   vsl|       1020 Length          b 0
**** v1   vsl|       1020 BereqAcct       b 101 0 101 38 0 38
**** v1   vsl|       1020 End             b 
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fd9240111e0 e=129.877083 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_Inbox flg=1e p=0x7fd910000e60 e=0.000000 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_When p=0x7fd910000e60 e=1634893038.897627 f=0x1e
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fd9240111e0 e=129.877068 f=0x0
**** v1   vsl|       1019 Begin           c req 1018 rxreq
**** v1   vsl|       1019 Timestamp       c Start: 1634892908.897004 0.000000 0.000000
**** v1   vsl|       1019 Timestamp       c Req: 1634892908.897004 0.000000 0.000000
**** v1   vsl|       1019 VCL_use         c vcl1
**** v1   vsl|       1019 ReqStart        c 1:f::2 1234 a0
**** v1   vsl|       1019 ReqMethod       c GET
**** v1   vsl|       1019 ReqURL          c /2
**** v1   vsl|       1019 ReqProtocol     c HTTP/1.1
**** v1   vsl|       1019 ReqHeader       c Host: 127.0.0.1
**** v1   vsl|       1019 ReqHeader       c X-Forwarded-For: 1:f::2
**** v1   vsl|       1019 VCL_call        c RECV
**** v1   vsl|       1019 ReqUnset        c Host: 127.0.0.1
**** v1   vsl|       1019 ReqHeader       c host: 127.0.0.1
**** v1   vsl|       1019 VCL_return      c hash
**** v1   vsl|       1019 VCL_call        c HASH
**** v1   vsl|       1019 VCL_return      c lookup
**** v1   vsl|       1019 VCL_call        c MISS
**** v1   vsl|       1019 VCL_return      c fetch
**** v1   vsl|       1019 Link            c bereq 1020 fetch
**** v1   vsl|       1019 Timestamp       c Fetch: 1634892908.907802 0.010797 0.010797
**** v1   vsl|       1019 RespProtocol    c HTTP/1.1
**** v1   vsl|       1019 RespStatus      c 200
**** v1   vsl|       1019 RespReason      c OK
**** v1   vsl|       1019 RespHeader      c Content-Length: 0
**** v1   vsl|       1019 RespHeader      c Date: Fri, 22 Oct 2021 08:55:08 GMT
**** v1   vsl|       1019 RespHeader      c X-Varnish: 1019
**** v1   vsl|       1019 RespHeader      c Age: 0
**** v1   vsl|       1019 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1019 VCL_call        c DELIVER
**** v1   vsl|       1019 RespHeader      c url: /2
**** v1   vsl|       1019 RespHeader      c li: 127.0.0.1
**** v1   vsl|       1019 RespHeader      c lp: 39973
**** v1   vsl|       1019 RespHeader      c ri: 127.0.0.1
**** v1   vsl|       1019 RespHeader      c rp: 40994
**** v1   vsl|       1019 RespHeader      c ci: 1:f::2
**** v1   vsl|       1019 RespHeader      c cp: 1234
**** v1   vsl|       1019 RespHeader      c si: 5:a::8
**** v1   vsl|       1019 RespHeader      c sp: 5678
**** v1   vsl|       1019 VCL_return      c deliver
**** v1   vsl|       1019 Timestamp       c Process: 1634892908.907830 0.010825 0.000027
**** v1   vsl|       1019 Filters         c 
**** v1   vsl|       1019 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1019 RespHeader      c Connection: keep-alive
**** v1   vsl|       1019 Timestamp       c Resp: 1634892908.907908 0.010903 0.000078
**** v1   vsl|       1019 ReqAcct         c 36 0 36 283 0 283
**** v1   vsl|       1019 End             c 
**** v1   vsl|       1018 SessClose       c REM_CLOSE 0.012
**** v1   vsl|       1018 End             c 
**** dT   7.251
**   top  === client c2 {
**   c2   Starting client
**   c2   Waiting for client
**   c2   Started on 127.0.0.1 39973 (1 iterations)
***  c2   Connect to 127.0.0.1 39973
***  c2   connected fd 22 from 127.0.0.1 40996 to 127.0.0.1 39973
**   c2   === send "PROXY TCP6 1:f::3 5:a::8 1234 5678\r\nGET /3 HTTP/1.1\...
**** c2   send|PROXY TCP6 1:f::3 5:a::8 1234 5678\r
**** c2   send|GET /3 HTTP/1.1\r
**** c2   send|Host: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r
**** c2   send|\r
**   c2   === rxresp
**** dT   7.252
**** s1   rxhdr|GET /3 HTTP/1.1\r
**** s1   rxhdr|X-Forwarded-For: 1:f::3\r
**** s1   rxhdr|host: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r
**** s1   rxhdr|Accept-Encoding: gzip\r
**** s1   rxhdr|X-Varnish: 1023\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 146
**** s1   http[ 0] |GET
**** s1   http[ 1] |/3
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |X-Forwarded-For: 1:f::3
**** s1   http[ 4] |host: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
**** s1   http[ 5] |Accept-Encoding: gzip
**** s1   http[ 6] |X-Varnish: 1023
**** s1   bodylen = 0
**   s1   === expect req.http.X-Forwarded-For == 1:f::3
**** s1   EXPECT req.http.X-Forwarded-For (1:f::3) == "1:f::3" match
**   s1   === txresp
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|Content-Length: 0\r
**** s1   txresp|\r
***  s1   shutting fd 5
**   s1   Ending
**** dT   7.263
**** c2   rxhdr|HTTP/1.1 200 OK\r
**** c2   rxhdr|Content-Length: 0\r
**** c2   rxhdr|Date: Fri, 22 Oct 2021 08:55:09 GMT\r
**** c2   rxhdr|X-Varnish: 1022\r
**** c2   rxhdr|Age: 0\r
**** c2   rxhdr|Via: 1.1 varnish (Varnish/6.5)\r
**** c2   rxhdr|url: /3\r
**** c2   rxhdr|li: 127.0.0.1\r
**** c2   rxhdr|lp: 39973\r
**** c2   rxhdr|ri: 127.0.0.1\r
**** c2   rxhdr|rp: 40996\r
**** c2   rxhdr|ci: 1:f::3\r
**** c2   rxhdr|cp: 1234\r
**** c2   rxhdr|si: 5:a::8\r
**** c2   rxhdr|sp: 5678\r
**** c2   rxhdr|Accept-Ranges: bytes\r
**** c2   rxhdr|Connection: keep-alive\r
**** c2   rxhdr|\r
**** c2   rxhdrlen = 283
**** c2   http[ 0] |HTTP/1.1
**** c2   http[ 1] |200
**** c2   http[ 2] |OK
**** c2   http[ 3] |Content-Length: 0
**** c2   http[ 4] |Date: Fri, 22 Oct 2021 08:55:09 GMT
**** c2   http[ 5] |X-Varnish: 1022
**** c2   http[ 6] |Age: 0
**** c2   http[ 7] |Via: 1.1 varnish (Varnish/6.5)
**** c2   http[ 8] |url: /3
**** c2   http[ 9] |li: 127.0.0.1
**** c2   http[10] |lp: 39973
**** c2   http[11] |ri: 127.0.0.1
**** c2   http[12] |rp: 40996
**** c2   http[13] |ci: 1:f::3
**** c2   http[14] |cp: 1234
**** c2   http[15] |si: 5:a::8
**** c2   http[16] |sp: 5678
**** c2   http[17] |Accept-Ranges: bytes
**** c2   http[18] |Connection: keep-alive
**** c2   bodylen = 0
**   c2   === expect resp.http.url == "/3"
**** c2   EXPECT resp.http.url (/3) == "/3" match
***  c2   closing fd 22
**   c2   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   7.264
**** l1   match|       1021 Proxy           c 1 1:f::3 1234 5:a::8 5678
***  l1   expecting| expect * 1025 ProxyGarbage PROXY1: Too many fields
**** dT   7.321
**** v1   vsl|       1021 Begin           c sess 0 PROXY
**** v1   vsl|       1021 SessOpen        c 127.0.0.1 40996 a0 127.0.0.1 39973 1634892909.009537 25
**** v1   vsl|       1021 Proxy           c 1 1:f::3 1234 5:a::8 5678
**** v1   vsl|       1021 Link            c req 1022 rxreq
**** v1   vsl|       1023 Begin           b bereq 1022 fetch
**** v1   vsl|       1023 VCL_use         b vcl1
**** v1   vsl|       1023 Timestamp       b Start: 1634892909.009701 0.000000 0.000000
**** v1   vsl|       1023 BereqMethod     b GET
**** v1   vsl|       1023 BereqURL        b /3
**** v1   vsl|       1023 BereqProtocol   b HTTP/1.1
**** v1   vsl|       1023 BereqHeader     b X-Forwarded-For: 1:f::3
**** v1   vsl|       1023 BereqHeader     b host: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
**** v1   vsl|       1023 BereqHeader     b Accept-Encoding: gzip
**** v1   vsl|       1023 BereqHeader     b X-Varnish: 1023
**** v1   vsl|       1023 VCL_call        b BACKEND_FETCH
**** v1   vsl|       1023 VCL_return      b fetch
**** v1   vsl|       1023 BackendOpen     b 28 s1 127.0.0.1 44547 127.0.0.1 50210 reuse
**** v1   vsl|       1023 Timestamp       b Bereq: 1634892909.009785 0.000083 0.000083
**** v1   vsl|       1023 Timestamp       b Beresp: 1634892909.010463 0.000761 0.000677
**** v1   vsl|       1023 BerespProtocol  b HTTP/1.1
**** v1   vsl|       1023 BerespStatus    b 200
**** v1   vsl|       1023 BerespReason    b OK
**** v1   vsl|       1023 BerespHeader    b Content-Length: 0
**** v1   vsl|       1023 BerespHeader    b Date: Fri, 22 Oct 2021 08:55:09 GMT
**** v1   vsl|       1023 TTL             b RFC 120 10 0 1634892909 1634892909 1634892909 0 0 cacheable
**** v1   vsl|       1023 VCL_call        b BACKEND_RESPONSE
**** v1   vsl|       1023 VCL_return      b deliver
**** v1   vsl|       1023 Filters         b 
**** v1   vsl|       1023 Storage         b malloc s0
**** v1   vsl|       1023 Fetch_Body      b 0 none -
**** v1   vsl|       1023 BackendClose    b 28 s1 recycle
**** v1   vsl|       1023 Timestamp       b BerespBody: 1634892909.020611 0.010909 0.010148
**** v1   vsl|       1023 Length          b 0
**** v1   vsl|       1023 BereqAcct       b 146 0 146 38 0 38
**** v1   vsl|       1023 End             b 
**** v1   vsl|       1022 Begin           c req 1021 rxreq
**** v1   vsl|       1022 Timestamp       c Start: 1634892909.009631 0.000000 0.000000
**** v1   vsl|       1022 Timestamp       c Req: 1634892909.009631 0.000000 0.000000
**** v1   vsl|       1022 VCL_use         c vcl1
**** v1   vsl|       1022 ReqStart        c 1:f::3 1234 a0
**** v1   vsl|       1022 ReqMethod       c GET
**** v1   vsl|       1022 ReqURL          c /3
**** v1   vsl|       1022 ReqProtocol     c HTTP/1.1
**** v1   vsl|       1022 ReqHeader       c Host: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
**** v1   vsl|       1022 ReqHeader       c X-Forwarded-For: 1:f::3
**** v1   vsl|       1022 VCL_call        c RECV
**** v1   vsl|       1022 ReqUnset        c Host: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
**** v1   vsl|       1022 ReqHeader       c host: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
**** v1   vsl|       1022 VCL_return      c hash
**** v1   vsl|       1022 VCL_call        c HASH
**** v1   vsl|       1022 VCL_return      c lookup
**** v1   vsl|       1022 VCL_call        c MISS
**** v1   vsl|       1022 VCL_return      c fetch
**** v1   vsl|       1022 Link            c bereq 1023 fetch
**** v1   vsl|       1022 Timestamp       c Fetch: 1634892909.020648 0.011017 0.011017
**** v1   vsl|       1022 RespProtocol    c HTTP/1.1
**** v1   vsl|       1022 RespStatus      c 200
**** v1   vsl|       1022 RespReason      c OK
**** v1   vsl|       1022 RespHeader      c Content-Length: 0
**** v1   vsl|       1022 RespHeader      c Date: Fri, 22 Oct 2021 08:55:09 GMT
**** v1   vsl|       1022 RespHeader      c X-Varnish: 1022
**** v1   vsl|       1022 RespHeader      c Age: 0
**** v1   vsl|       1022 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1022 VCL_call        c DELIVER
**** v1   vsl|       1022 RespHeader      c url: /3
**** v1   vsl|       1022 RespHeader      c li: 127.0.0.1
**** v1   vsl|       1022 RespHeader      c lp: 39973
**** v1   vsl|       1022 RespHeader      c ri: 127.0.0.1
**** v1   vsl|       1022 RespHeader      c rp: 40996
**** v1   vsl|       1022 RespHeader      c ci: 1:f::3
**** v1   vsl|       1022 RespHeader      c cp: 1234
**** v1   vsl|       1022 RespHeader      c si: 5:a::8
**** v1   vsl|       1022 RespHeader      c sp: 5678
**** v1   vsl|       1022 VCL_return      c deliver
**** v1   vsl|       1022 Timestamp       c Process: 1634892909.020684 0.011053 0.000036
**** v1   vsl|       1022 Filters         c 
**** v1   vsl|       1022 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1022 RespHeader      c Connection: keep-alive
**** v1   vsl|       1022 Timestamp       c Resp: 1634892909.020766 0.011135 0.000081
**** v1   vsl|       1022 ReqAcct         c 81 0 81 283 0 283
**** v1   vsl|       1022 End             c 
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fd9240111e0 e=129.764256 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_Inbox flg=1e p=0x7fd9240114a0 e=0.000000 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_When p=0x7fd9240114a0 e=1634893039.010463 f=0x1e
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fd9240111e0 e=129.764242 f=0x0
**** v1   vsl|       1021 SessClose       c REM_CLOSE 0.012
**** v1   vsl|       1021 End             c 
**** dT   7.364
**   top  === client c2 {
**   c2   Starting client
**   c2   Waiting for client
**   c2   Started on 127.0.0.1 39973 (1 iterations)
***  c2   Connect to 127.0.0.1 39973
***  c2   connected fd 5 from 127.0.0.1 40998 to 127.0.0.1 39973
**   c2   === send "PROXY TCP4 1.2.3.4 5.6.7.8 1234 5678\n"
**** c2   send|PROXY TCP4 1.2.3.4 5.6.7.8 1234 5678
**   c2   === expect_close
**** c2   Expecting close (fd = 5)
**** c2   fd=5 EOF, as expected
***  c2   closing fd 5
**   c2   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   7.421
**** v1   vsl|       1024 Begin           c sess 0 PROXY
**** v1   vsl|       1024 SessOpen        c 127.0.0.1 40998 a0 127.0.0.1 39973 1634892909.122451 26
**** v1   vsl|       1024 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1024 End             c 
**** dT   7.464
**   top  === client c2 {
**   c2   Starting client
**   c2   Waiting for client
**   c2   Started on 127.0.0.1 39973 (1 iterations)
***  c2   Connect to 127.0.0.1 39973
**** dT   7.465
***  c2   connected fd 5 from 127.0.0.1 41000 to 127.0.0.1 39973
**   c2   === send "PROXY TCP4 1.2.3.4 5.6.7.8 1234 5678                  ...
**** c2   send|PROXY TCP4 1.2.3.4 5.6.7.8 1234 5678                                                                     \r
**   c2   === expect_close
**** c2   Expecting close (fd = 5)
**** c2   fd=5 EOF, as expected
***  c2   closing fd 5
**   c2   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   7.466
**** l1   match|       1025 ProxyGarbage    c PROXY1: Too many fields
***  l1   expecting| expect * 1026 ProxyGarbage PROXY1: Too many fields
**** dT   7.521
**** v1   vsl|       1025 Begin           c sess 0 PROXY
**** v1   vsl|       1025 SessOpen        c 127.0.0.1 41000 a0 127.0.0.1 39973 1634892909.223105 27
**** v1   vsl|       1025 ProxyGarbage    c PROXY1: Too many fields
**** v1   vsl|       1025 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1025 End             c 
**** dT   7.565
**   top  === client c2 {
**   c2   Starting client
**   c2   Waiting for client
**   c2   Started on 127.0.0.1 39973 (1 iterations)
***  c2   Connect to 127.0.0.1 39973
***  c2   connected fd 5 from 127.0.0.1 41002 to 127.0.0.1 39973
**   c2   === send "PROXY TCP4 1.2.3.4 5.6.7.8 1234 5678                  ...
**** c2   send|PROXY TCP4 1.2.3.4 5.6.7.8 1234 5678                                                                      \r
**   c2   === expect_close
**** c2   Expecting close (fd = 5)
**** c2   fd=5 EOF, as expected
***  c2   closing fd 5
**   c2   Ending
**** dT   7.566
**   top  === varnish v1 -vsl_catchup
**** dT   7.567
**** l1   match|       1026 ProxyGarbage    c PROXY1: Too many fields
**** l1   end|
**** dT   7.621
**** v1   vsl|       1026 Begin           c sess 0 PROXY
**** v1   vsl|       1026 SessOpen        c 127.0.0.1 41002 a0 127.0.0.1 39973 1634892909.323769 25
**** v1   vsl|       1026 ProxyGarbage    c PROXY1: Too many fields
**** v1   vsl|       1026 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1026 End             c 
**** dT   7.666
**   top  === client c2 {
**   c2   Starting client
**   c2   Waiting for client
**   c2   Started on 127.0.0.1 39973 (1 iterations)
***  c2   Connect to 127.0.0.1 39973
***  c2   connected fd 5 from 127.0.0.1 41004 to 127.0.0.1 39973
**   c2   === send "PROXY TCP4 1.2.3.4 5.6.7.8 1234 5678                  ...
**** c2   send|PROXY TCP4 1.2.3.4 5.6.7.8 1234 5678                                                                       \r
**   c2   === expect_close
**** c2   Expecting close (fd = 5)
**** c2   fd=5 EOF, as expected
***  c2   closing fd 5
**   c2   Ending
**   top  === varnish v1 -vsl_catchup
**** dT   7.722
**** v1   vsl|       1027 Begin           c sess 0 PROXY
**** v1   vsl|       1027 SessOpen        c 127.0.0.1 41004 a0 127.0.0.1 39973 1634892909.424424 26
**** v1   vsl|       1027 SessClose       c RX_JUNK 0.000
**** v1   vsl|       1027 End             c 
**** dT   7.766
**   top  === logexpect l1 -wait
**   l1   Waiting for logexp
*    top  RESETTING after ./tests/o00000.vtc
**** dT   7.767
**   s1   Waiting for server (4/-1)
**   v1   Wait
**** v1   CLI TX|backend.list
***  v1   CLI RX  200
**** v1   CLI RX|Backend name   Admin      Probe    Health     Last change
**** v1   CLI RX|vcl1.s1        healthy    0/0      healthy    Fri, 22 Oct 2021 08:55:02 GMT
**   v1   Stop
**** v1   CLI TX|stop
***  v1   debug|Debug: Stopping Child
**** dT   7.822
**** v1   vsl|          0 CLI             - Rd backend.list 
**** v1   vsl|          0 CLI             - Wr 200 134 Backend name   Admin      Probe    Health     Last change
vcl1.s1        healthy    0/0      healthy    Fri, 22 Oct 2021 08:55:02 GMT

**** v1   vsl|          0 CLI             - EOF on CLI connection, worker stops
**** dT   8.767
***  v1   debug|Info: Child (72842) ended
***  v1   debug|Info: Child (72842) said Child dies
***  v1   debug|Debug: Child cleanup complete
***  v1   CLI RX  200
***  v1   wait-stopped
**** v1   CLI TX|status
**** dT   8.768
***  v1   CLI RX  200
**** v1   CLI RX|Child in state stopped
**** v1   CLI TX|panic.clear
***  v1   CLI RX  300
**** v1   CLI RX|No panic to clear
***  v1   debug|Info: manager stopping child
***  v1   debug|Info: manager dies
**** v1   STDOUT EOF
**** dT   8.823
**   v1   WAIT4 pid=72819 status=0x0000 (user 0.153077 sys 0.045567)
*    top  TEST ./tests/o00000.vtc completed
#    top  TEST ./tests/o00000.vtc passed (8.824)
