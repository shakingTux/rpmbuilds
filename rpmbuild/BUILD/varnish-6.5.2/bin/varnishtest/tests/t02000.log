**** dT   0.000
*    top  TEST ./tests/t02000.vtc starting
**** top  extmacro def pwd=/root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest
**** top  extmacro def localhost=127.0.0.1
**** top  extmacro def bad_backend=127.0.0.1 37809
**** top  extmacro def bad_ip=192.0.2.255
**** top  extmacro def topbuild=/root/rpmbuild/BUILD/varnish-6.5.2
**** top  macro def testdir=/root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest/./tests
**** top  macro def tmpdir=/tmp/vtc.100512.3386de56
**   top  === varnishtest	"Direct H2 start"
*    top  VTEST Direct H2 start
**   top  === server s1 {
**   s1   Starting server
**** s1   macro def s1_addr=127.0.0.1
**** s1   macro def s1_port=42649
**** s1   macro def s1_sock=127.0.0.1 42649
*    s1   Listen on 127.0.0.1 42649
**   top  === varnish v1 -vcl+backend {
**   s1   Started on 127.0.0.1 42649 (1 iterations)
**** dT   0.004
**   v1   Launch
***  v1   CMD: cd ${pwd} && exec varnishd  -d -n /tmp/vtc.100512.3386de56/v1 -l 2m -p auto_restart=off -p syslog_cli_traffic=off -p sigsegv_handler=on -p thread_pool_min=10 -p debug=+vtc_mode -p vsl_mask=+Debug -a '127.0.0.1:0' -M '127.0.0.1 36203' -P /tmp/vtc.100512.3386de56/v1/varnishd.pid -p vmod_path=/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_blob/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_cookie/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_std/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_vtc/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_unix/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_proxy/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_purge/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_directors/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_debug/.libs 
***  v1   CMD: cd /root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest && exec varnishd  -d -n /tmp/vtc.100512.3386de56/v1 -l 2m -p auto_restart=off -p syslog_cli_traffic=off -p sigsegv_handler=on -p thread_pool_min=10 -p debug=+vtc_mode -p vsl_mask=+Debug -a '127.0.0.1:0' -M '127.0.0.1 36203' -P /tmp/vtc.100512.3386de56/v1/varnishd.pid -p vmod_path=/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_blob/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_cookie/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_std/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_vtc/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_unix/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_proxy/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_purge/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_directors/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_debug/.libs 
***  v1   PID: 100531
**** v1   macro def v1_pid=100531
**** v1   macro def v1_name=/tmp/vtc.100512.3386de56/v1
**** dT   0.016
***  v1   debug|Debug: Version: varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
***  v1   debug|Debug: Platform: Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
***  v1   debug|200 321     
***  v1   debug|-----------------------------
***  v1   debug|Varnish Cache CLI 1.0
***  v1   debug|-----------------------------
***  v1   debug|Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
***  v1   debug|varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
***  v1   debug|
***  v1   debug|Type 'help' for command list.
***  v1   debug|Type 'quit' to close CLI session.
***  v1   debug|Type 'start' to launch worker process.
***  v1   debug|
**** dT   0.115
**** v1   CLIPOLL 1 0x1 0x0
***  v1   CLI connection fd = 7
***  v1   CLI RX  107
**** v1   CLI RX|wyhtyfrhvutewvaxgnrmadduylvlbxqb
**** v1   CLI RX|
**** v1   CLI RX|Authentication required.
**** v1   CLI TX|auth 58cc8a0fa179fe0b7505ece2593fbc5f2788e4bb047bfbed071f799975319b50
**** dT   0.116
***  v1   CLI RX  200
**** v1   CLI RX|-----------------------------
**** v1   CLI RX|Varnish Cache CLI 1.0
**** v1   CLI RX|-----------------------------
**** v1   CLI RX|Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
**** v1   CLI RX|varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
**** v1   CLI RX|
**** v1   CLI RX|Type 'help' for command list.
**** v1   CLI RX|Type 'quit' to close CLI session.
**** v1   CLI RX|Type 'start' to launch worker process.
**** v1   CLI TX|vcl.inline vcl1 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.1;
**** v1   CLI TX|backend s1 { .host = "127.0.0.1"; .port = "42649"; }
**** v1   CLI TX|
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_recv {
**** v1   CLI TX|\t\treturn (pipe);
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.216
***  v1   vsl|No VSL chunk found (child not started ?)
**** dT   0.268
***  v1   CLI RX  200
**** v1   CLI RX|VCL compiled.
**** v1   CLI TX|vcl.use vcl1
***  v1   CLI RX  200
**   v1   Start
**** v1   CLI TX|start
**** dT   0.271
***  v1   debug|Debug: Child (100543) Started
**** dT   0.297
***  v1   CLI RX  200
***  v1   wait-running
**** v1   CLI TX|status
***  v1   debug|Info: Child (100543) said Child starts
***  v1   CLI RX  200
**** v1   CLI RX|Child in state running
**** v1   CLI TX|debug.listen_address
***  v1   CLI RX  200
**** v1   CLI RX|127.0.0.1 41843
**** v1   CLI TX|debug.xid 999
***  v1   CLI RX  200
**** v1   CLI RX|XID is 999
**** v1   CLI TX|debug.listen_address
***  v1   CLI RX  200
**** v1   CLI RX|127.0.0.1 41843
**   v1   Listen on 127.0.0.1 41843
**** v1   macro def v1_addr=127.0.0.1
**** v1   macro def v1_port=41843
**** v1   macro def v1_sock=127.0.0.1 41843
**** dT   0.317
**** v1   vsl|          0 CLI             - Rd vcl.load "vcl1" vcl_vcl1.1634893275.106903/vgc.so 1auto
**** v1   vsl|          0 CLI             - Wr 200 52 Loaded "vcl_vcl1.1634893275.106903/vgc.so" as "vcl1"
**** v1   vsl|          0 CLI             - Rd vcl.use "vcl1"
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|          0 CLI             - Rd start
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|          0 CLI             - Rd debug.listen_address 
**** v1   vsl|          0 CLI             - Wr 200 16 127.0.0.1 41843

**** v1   vsl|          0 CLI             - Rd debug.xid 999 
**** v1   vsl|          0 CLI             - Wr 200 10 XID is 999
**** v1   vsl|          0 CLI             - Rd debug.listen_address 
**** v1   vsl|          0 CLI             - Wr 200 16 127.0.0.1 41843

**** dT   0.397
**   top  === varnish v1 -cliok "param.set debug +syncvsl"
**** v1   CLI TX|param.set debug +syncvsl
**** dT   0.398
***  v1   CLI RX  200
**   v1   CLI 200 <param.set debug +syncvsl>
**   top  === varnish v1 -cliok "param.set vsl_mask +H2RxHdr,+H2RxBody,+H2...
**** v1   CLI TX|param.set vsl_mask +H2RxHdr,+H2RxBody,+H2TxHdr,+H2TxBody
***  v1   CLI RX  200
**   v1   CLI 200 <param.set vsl_mask +H2RxHdr,+H2RxBody,+H2TxHdr,+H2TxBody>
**   top  === process p1 {exec varnishlog -n ${v1_name} -g raw -w ${tmpdir...
**** dT   0.403
**** p1   CMD: exec varnishlog -n /tmp/vtc.100512.3386de56/v1 -g raw -w /tmp/vtc.100512.3386de56/vlog -A
***  p1   PID: 100586
**** p1   macro def p1_pid=100586
**** p1   macro def p1_dir=/tmp/vtc.100512.3386de56/p1
**** p1   macro def p1_out=/tmp/vtc.100512.3386de56/p1/term
**** p1   macro def p1_err=/tmp/vtc.100512.3386de56/p1/stderr
**   top  === shell {while ! test -s ${tmpdir}/vlog ; do sleep 1 ; done}
**** top  shell_cmd|exec 2>&1 ; while ! test -s /tmp/vtc.100512.3386de56/vlog ; do sleep 1 ; done
**** dT   3.320
**** v1   vsl|          0 CLI             - Rd ping
**** v1   vsl|          0 CLI             - Wr 200 19 PONG 1634893278 1.0
**** dT   3.409
**** top  shell_status = 0x0000
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 41843 (1 iterations)
***  c1   Connect to 127.0.0.1 41843
***  c1   connected fd 19 from 127.0.0.1 55964 to 127.0.0.1 41843
**   c1   === txpri
**** c1   txpri|PRI * HTTP/2.0\r
**** c1   txpri|\r
**** c1   txpri|SM\r
**** c1   txpri|\r
**** dT   3.420
**   c1   === expect_close
**** c1   Expecting close (fd = 19)
**** v1   vsl|       1000 Begin           c sess 0 HTTP/1
**** v1   vsl|       1000 SessOpen        c 127.0.0.1 55964 a0 127.0.0.1 41843 1634893278.400220 25
**** v1   vsl|       1000 SessClose       c REQ_HTTP20 0.010
**** v1   vsl|       1000 End             c 
**** c1   fd=19 EOF, as expected
***  c1   closing fd 19
**   c1   Ending
**   top  === varnish v1 -cliok "param.set feature +http2"
**** v1   CLI TX|param.set feature +http2
***  v1   CLI RX  200
**   v1   CLI 200 <param.set feature +http2>
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 41843 (1 iterations)
***  c1   Connect to 127.0.0.1 41843
**** dT   3.421
***  c1   connected fd 19 from 127.0.0.1 55966 to 127.0.0.1 41843
**   c1   === stream 1 {
**** c1   Not in H/2 mode, do what's needed
**   c1   === txpri
**** c1   txpri|PRI * HTTP/2.0\r
**** c1   txpri|\r
**** c1   txpri|SM\r
**** c1   txpri|\r
**** dT   3.431
**   c1   === stream 0 {
**   c1   Starting stream 0x7f75882015f0
**   c1   Waiting for stream 0
**   c1   === txsettings
***  c1   tx: stream: 0, type: SETTINGS (4), flags: 0x00, size: 0
**   c1   === rxsettings
***  c1   rx: stream: 0, type: SETTINGS (4), flags: 0x00, size: 6
**** c1   settings->MAX_CONCURRENT_STREAMS (3): 100
**   c1   === txsettings -ack
***  c1   tx: stream: 0, type: SETTINGS (4), flags: 0x01, size: 0
**   c1   === rxsettings
***  c1   rx: stream: 0, type: SETTINGS (4), flags: 0x01, size: 0
***  c1   flag: ACK
**   c1   === expect settings.ack == true
**** c1   EXPECT settings.ack (true) == "true" match
**   c1   Ending stream 0
**** dT   3.432
**   c1   Starting stream 0x7f75882027f0
**   c1   Waiting for stream 1
**   c1   === txprio -weight 10 -stream 0
***  c1   tx: stream: 1, type: PRIORITY (2), flags: 0x00, size: 5
**   c1   Ending stream 1
**   c1   === stream 3 {
**   c1   Starting stream 0x7f7588203870
**   c1   Waiting for stream 3
**   c1   === txprio -weight 10 -stream 0
***  c1   tx: stream: 3, type: PRIORITY (2), flags: 0x00, size: 5
**   c1   Ending stream 3
**** dT   3.434
**   c1   === stream 5 {
**   c1   Starting stream 0x7f75882048f0
**   c1   Waiting for stream 5
**   c1   === txprio -weight 10 -stream 2
***  c1   tx: stream: 5, type: PRIORITY (2), flags: 0x00, size: 5
**   c1   Ending stream 5
**   c1   === stream 7 {
**   c1   Starting stream 0x7f75882059a0
**   c1   === stream 0 {
**   c1   Starting stream 0x7f75882015f0
**   c1   Waiting for stream 0
**   c1   === txping -data "_-__-_-_"
***  c1   tx: stream: 0, type: PING (6), flags: 0x00, size: 8
**   c1   === rxping
**   c1   === txreq -dep 3 -hdr :authority foo.bar -pad cotton
***  c1   rx: stream: 0, type: PING (6), flags: 0x01, size: 8
***  c1   flag: ACK
**** c1   ping->data: _-__-_-_
**** c1   stream->dependency: 3
**** c1   stream->weight: 16
***  c1   tx: stream: 7, type: HEADERS (1), flags: 0x2d, size: 68
***  s1   accepted fd 5 127.0.0.1 32786
**   s1   === rxreq
**** dT   3.435
**** s1   rxhdr|GET / HTTP/1.1\r
**** s1   rxhdr|host: foo.bar\r
**** s1   rxhdr|scheme: http\r
**** s1   rxhdr|X-Forwarded-For: 127.0.0.1\r
**** s1   rxhdr|X-Varnish: 1003\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 92
**** s1   http[ 0] |GET
**** s1   http[ 1] |/
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |host: foo.bar
**** s1   http[ 4] |scheme: http
**** s1   http[ 5] |X-Forwarded-For: 127.0.0.1
**** s1   http[ 6] |X-Varnish: 1003
**** s1   bodylen = 0
**   s1   === expect req.http.host == foo.bar
**** s1   EXPECT req.http.host (foo.bar) == "foo.bar" match
**   s1   === txresp \
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|H234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789I: foo\r
**** s1   txresp|Foo: H234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789I\r
**** s1   txresp|Content-Length: 10\r
**** s1   txresp|\r
**** s1   txresp|!"#$%&'()
**   s1   === rxreq
**   c1   === rxresp
**   c1   === expect ping.ack == "true"
**** c1   EXPECT ping.ack (true) == "true" match
**   c1   === expect ping.data == "_-__-_-_"
**** c1   EXPECT ping.data (_-__-_-_) == "_-__-_-_" match
**** dT   3.436
**   c1   Ending stream 0
***  c1   rx: stream: 7, type: HEADERS (1), flags: 0x04, size: 630
***  c1   flag: END_TYPE_HEADERS
**   c1   === stream 7 -wait
**   c1   Waiting for stream 7
**** c1   header[ 0]: :status : 200
**** c1   header[ 1]: h234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789i : foo
**** c1   header[ 2]: foo : H234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789I
**** c1   header[ 3]: content-length : 10
**** c1   header[ 4]: date : Fri, 22 Oct 2021 09:01:18 GMT
**** c1   header[ 5]: x-varnish : 1002
**** c1   header[ 6]: age : 0
**** c1   header[ 7]: via : 1.1 varnish (Varnish/6.5)
**** c1   header[ 8]: accept-ranges : bytes
***  c1   rx: stream: 7, type: DATA (0), flags: 0x00, size: 10
**** dT   3.446
***  c1   rx: stream: 7, type: DATA (0), flags: 0x01, size: 0
***  c1   flag: END_STREAM
**** c1   s7 - no data
**   c1   === expect resp.status == 200
**** c1   EXPECT resp.status (200) == "200" match
**   c1   === delay 1
***  c1   delaying 1 second(s)
**** dT   3.520
**** v1   vsl|       1001 Begin           c sess 0 HTTP/1
**** v1   vsl|       1001 SessOpen        c 127.0.0.1 55966 a0 127.0.0.1 41843 1634893278.411490 26
**** v1   vsl|          0 Debug           - H2 Prior Knowledge Upgrade
**** v1   vsl|       1001 Debug           c H2: Got pu PRISM
**** v1   vsl|       1001 H2TxHdr         c [000006040000000000]
**** v1   vsl|       1001 H2TxBody        c [000300000064]
**** v1   vsl|       1001 H2RxHdr         c [000000040000000000]
**** v1   vsl|       1001 Debug           c H2RXF SETTINGS[0] 0x00 0x00000000
**** v1   vsl|       1001 H2TxHdr         c [000000040100000000]
**** v1   vsl|       1001 H2RxHdr         c [000000040100000000]
**** v1   vsl|       1001 Debug           c H2RXF SETTINGS[0] 0x01 0x00000000
**** v1   vsl|       1001 H2RxHdr         c [000005020000000001]
**** v1   vsl|       1001 H2RxBody        c [000000000a]
**** v1   vsl|       1001 Debug           c H2RXF PRIORITY[5] 0x00 0x00000001 0x000000000a
**** v1   vsl|       1001 H2RxHdr         c [000005020000000003]
**** v1   vsl|       1001 H2RxBody        c [000000000a]
**** v1   vsl|       1001 Debug           c H2RXF PRIORITY[5] 0x00 0x00000003 0x000000000a
**** v1   vsl|       1001 H2RxHdr         c [000005020000000005]
**** v1   vsl|       1001 H2RxBody        c [000000020a]
**** v1   vsl|       1001 Debug           c H2RXF PRIORITY[5] 0x00 0x00000005 0x000000020a
**** v1   vsl|       1001 H2RxHdr         c [000008060000000000]
**** v1   vsl|       1001 H2RxBody        c [5f2d5f5f2d5f2d5f]
**** v1   vsl|       1001 Debug           c H2RXF PING[8] 0x00 0x00000000 0x5f2d5f5f2d5f2d5f
**** v1   vsl|       1001 H2TxHdr         c [000008060100000000]
**** v1   vsl|       1001 H2TxBody        c [5f2d5f5f2d5f2d5f]
**** v1   vsl|       1001 H2RxHdr         c [000044012d00000007]
**** v1   vsl|       1001 H2RxBody        c [060000000310000a3a617574686f7269747907666f6f2e62617200053a70617468012f00073a6d6574686f640347455400073a736368656d650468747470636f74746f6e]
**** v1   vsl|       1001 Debug           c H2RXF HEADERS[68] 0x2d 0x00000007 0x060000000310000a3a617574686f7269747907666f6f2e62617200053a70617468012f00073a6d6574686f640347455400073a736368656d650468747470636f74746f6e
**** v1   vsl|       1002 Begin           c req 1001 rxreq
**** v1   vsl|       1001 Link            c req 1002 rxreq
**** v1   vsl|       1002 Timestamp       c Start: 1634893278.425039 0.000000 0.000000
**** v1   vsl|       1002 ReqProtocol     c HTTP/2.0
**** v1   vsl|       1002 Timestamp       c Req: 1634893278.425040 0.000000 0.000000
**** v1   vsl|       1002 VCL_use         c vcl1
**** v1   vsl|       1002 ReqStart        c 127.0.0.1 55966 a0
**** v1   vsl|       1002 ReqMethod       c GET
**** v1   vsl|       1002 ReqURL          c /
**** v1   vsl|       1002 ReqProtocol     c HTTP/2.0
**** v1   vsl|       1002 ReqHeader       c host: foo.bar
**** v1   vsl|       1002 ReqHeader       c scheme: http
**** v1   vsl|       1002 ReqHeader       c X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1002 VCL_call        c RECV
**** v1   vsl|       1002 VCL_return      c pipe
**** v1   vsl|       1002 VCL_call        c HASH
**** v1   vsl|       1002 VCL_return      c lookup
**** v1   vsl|       1002 VCL_Error       c vcl_recv{} returns pipe for HTTP/2 request.  Doing pass.
**** v1   vsl|       1002 VCL_call        c PASS
**** v1   vsl|       1002 VCL_return      c fetch
**** v1   vsl|       1003 Begin           b bereq 1002 pass
**** v1   vsl|       1003 VCL_use         b vcl1
**** v1   vsl|       1002 Link            c bereq 1003 pass
**** v1   vsl|       1003 Timestamp       b Start: 1634893278.425145 0.000000 0.000000
**** v1   vsl|       1003 BereqMethod     b GET
**** v1   vsl|       1003 BereqURL        b /
**** v1   vsl|       1003 BereqProtocol   b HTTP/2.0
**** v1   vsl|       1003 BereqHeader     b host: foo.bar
**** v1   vsl|       1003 BereqHeader     b scheme: http
**** v1   vsl|       1003 BereqHeader     b X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1003 BereqProtocol   b HTTP/1.1
**** v1   vsl|       1003 BereqHeader     b X-Varnish: 1003
**** v1   vsl|       1003 VCL_call        b BACKEND_FETCH
**** v1   vsl|       1003 VCL_return      b fetch
**** v1   vsl|       1003 BackendOpen     b 28 s1 127.0.0.1 42649 127.0.0.1 32786 connect
**** v1   vsl|       1003 Timestamp       b Bereq: 1634893278.425329 0.000184 0.000184
**** v1   vsl|       1003 Timestamp       b Beresp: 1634893278.426170 0.001025 0.000840
**** v1   vsl|       1003 BerespProtocol  b HTTP/1.1
**** v1   vsl|       1003 BerespStatus    b 200
**** v1   vsl|       1003 BerespReason    b OK
**** v1   vsl|       1003 BerespHeader    b H2345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234
**** v1   vsl|       1003 BerespHeader    b Foo: H23456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
**** v1   vsl|       1003 BerespHeader    b Content-Length: 10
**** v1   vsl|       1003 BerespHeader    b Date: Fri, 22 Oct 2021 09:01:18 GMT
**** v1   vsl|       1003 VCL_call        b BACKEND_RESPONSE
**** v1   vsl|       1003 VCL_return      b deliver
**** v1   vsl|       1003 Filters         b 
**** v1   vsl|       1003 Storage         b malloc Transient
**** v1   vsl|       1003 Fetch_Body      b 3 length stream
**** v1   vsl|       1003 BackendClose    b 28 s1 recycle
**** v1   vsl|       1002 Timestamp       c Fetch: 1634893278.426325 0.001285 0.001285
**** v1   vsl|       1002 RespProtocol    c HTTP/1.1
**** v1   vsl|       1002 RespStatus      c 200
**** v1   vsl|       1002 RespReason      c OK
**** v1   vsl|       1002 RespHeader      c H2345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234
**** v1   vsl|       1002 RespHeader      c Foo: H23456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
**** v1   vsl|       1002 RespHeader      c Content-Length: 10
**** v1   vsl|       1002 RespHeader      c Date: Fri, 22 Oct 2021 09:01:18 GMT
**** v1   vsl|       1002 RespHeader      c X-Varnish: 1002
**** v1   vsl|       1002 RespHeader      c Age: 0
**** v1   vsl|       1002 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1002 VCL_call        c DELIVER
**** v1   vsl|       1002 VCL_return      c deliver
**** v1   vsl|       1002 Timestamp       c Process: 1634893278.426341 0.001302 0.000016
**** v1   vsl|       1002 Filters         c 
**** v1   vsl|       1002 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1002 RespProtocol    c HTTP/2.0
**** v1   vsl|       1002 Debug           c HP {28, "content-length:", ""} <Content-Length: 10>
**** v1   vsl|       1002 Debug           c HP {33, "date:", ""} <Date: Fri, 22 Oct 2021 09:01:18 GMT>
**** v1   vsl|       1002 Debug           c HP {21, "age:", ""} <Age: 0>
**** v1   vsl|       1002 Debug           c HP {60, "via:", ""} <Via: 1.1 varnish (Varnish/6.5)>
**** v1   vsl|       1002 Debug           c HP {18, "accept-ranges:", ""} <Accept-Ranges: bytes>
**** v1   vsl|       1001 H2TxHdr         c [000276010400000007]
**** v1   vsl|       1001 H2TxBody        c [88107f850168323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930]
**** v1   vsl|       1001 H2TxHdr         c [00000a000000000007]
**** v1   vsl|       1001 H2TxBody        c [2122232425262728290a]
**** v1   vsl|       1003 Timestamp       b BerespBody: 1634893278.436388 0.011242 0.010217
**** v1   vsl|       1003 Length          b 10
**** v1   vsl|       1003 BereqAcct       b 92 0 92 573 10 583
**** v1   vsl|       1003 End             b 
**** v1   vsl|       1001 H2TxHdr         c [000000000100000007]
**** v1   vsl|       1002 Timestamp       c Resp: 1634893278.436499 0.011460 0.010158
**** dT   4.446
**   c1   === txrst -err 0x1111
***  c1   tx: stream: 7, type: RST_STREAM (3), flags: 0x00, size: 4
**   c1   Ending stream 7
***  c1   closing fd 19
**   c1   Ending
**   top  === varnish v1 -expect MEMPOOL.req0.live == 0
**** dT   4.447
**   v1   as expected: MEMPOOL.req0.live (0) == 0
**   top  === varnish v1 -expect MEMPOOL.req1.live == 0
**   v1   as expected: MEMPOOL.req1.live (0) == 0
**   top  === varnish v1 -expect MEMPOOL.sess0.live == 0
**   v1   as expected: MEMPOOL.sess0.live (0) == 0
**   top  === varnish v1 -expect MEMPOOL.sess1.live == 0
**** dT   4.448
**   v1   as expected: MEMPOOL.sess1.live (0) == 0
**   top  === process p1 -stop
**** p1   Sent signal 15
**** p1   stdout read -1
**** p1   stderr read 0
**   p1   WAIT4 pid=100586 status=0x0000 (user 0.014917 sys 0.019078)
**** p1   macro undef p1_pid
**** dT   4.522
**** v1   vsl|       1002 ReqAcct         c 68 0 68 630 10 640
**** v1   vsl|       1002 End             c 
**** v1   vsl|       1001 H2RxHdr         c [000004030000000007]
**** v1   vsl|       1001 H2RxBody        c [00001111]
**** v1   vsl|       1001 Debug           c H2RXF RST_STREAM[4] 0x00 0x00000007 0x00001111
**** v1   vsl|       1001 Debug           c H2: No frame (hs=-1)
**** v1   vsl|       1001 Debug           c H2 CLEANUP NO_ERROR
**** v1   vsl|       1001 ReqAcct         c 72 27 99 54 14 68
**** v1   vsl|       1001 SessClose       c RX_JUNK 1.026
**** v1   vsl|       1001 End             c 
**** dT   5.448
**   top  === shell -match {1001 H2TxHdr        c \[000006040000000000\]} ...
**** top  shell_cmd|exec 2>&1 ; cat /tmp/vtc.100512.3386de56/vlog
**** dT   5.452
**** top  shell_out|         0 CLI            - Rd ping
**** top  shell_out|         0 CLI            - Wr 200 19 PONG 1634893278 1.0
**** top  shell_out|      1000 Begin          c sess 0 HTTP/1
**** top  shell_out|      1000 SessOpen       c 127.0.0.1 55964 a0 127.0.0.1 41843 1634893278.400220 25
**** top  shell_out|      1000 SessClose      c REQ_HTTP20 0.010
**** top  shell_out|      1000 End            c 
**** top  shell_out|      1001 Begin          c sess 0 HTTP/1
**** top  shell_out|      1001 SessOpen       c 127.0.0.1 55966 a0 127.0.0.1 41843 1634893278.411490 26
**** top  shell_out|         0 Debug          - "H2 Prior Knowledge Upgrade%00"
**** top  shell_out|      1001 Debug          c "H2: Got pu PRISM%00"
**** top  shell_out|      1001 H2TxHdr        c [000006040000000000]
**** top  shell_out|      1001 H2TxBody       c [000300000064]
**** top  shell_out|      1001 H2RxHdr        c [000000040000000000]
**** top  shell_out|      1001 Debug          c "H2RXF SETTINGS[0] 0x00 0x00000000%00"
**** top  shell_out|      1001 H2TxHdr        c [000000040100000000]
**** top  shell_out|      1001 H2RxHdr        c [000000040100000000]
**** top  shell_out|      1001 Debug          c "H2RXF SETTINGS[0] 0x01 0x00000000%00"
**** top  shell_out|      1001 H2RxHdr        c [000005020000000001]
**** top  shell_out|      1001 H2RxBody       c [000000000a]
**** top  shell_out|      1001 Debug          c "H2RXF PRIORITY[5] 0x00 0x00000001 0x000000000a%00"
**** top  shell_out|      1001 H2RxHdr        c [000005020000000003]
**** top  shell_out|      1001 H2RxBody       c [000000000a]
**** top  shell_out|      1001 Debug          c "H2RXF PRIORITY[5] 0x00 0x00000003 0x000000000a%00"
**** top  shell_out|      1001 H2RxHdr        c [000005020000000005]
**** top  shell_out|      1001 H2RxBody       c [000000020a]
**** top  shell_out|      1001 Debug          c "H2RXF PRIORITY[5] 0x00 0x00000005 0x000000020a%00"
**** top  shell_out|      1001 H2RxHdr        c [000008060000000000]
**** top  shell_out|      1001 H2RxBody       c [5f2d5f5f2d5f2d5f]
**** top  shell_out|      1001 Debug          c "H2RXF PING[8] 0x00 0x00000000 0x5f2d5f5f2d5f2d5f%00"
**** top  shell_out|      1001 H2TxHdr        c [000008060100000000]
**** top  shell_out|      1001 H2TxBody       c [5f2d5f5f2d5f2d5f]
**** top  shell_out|      1001 H2RxHdr        c [000044012d00000007]
**** top  shell_out|      1001 H2RxBody       c [060000000310000a3a617574686f7269747907666f6f2e62617200053a70617468012f00073a6d6574686f640347455400073a736368656d650468747470636f74746f6e]
**** top  shell_out|      1001 Debug          c "H2RXF HEADERS[68] 0x2d 0x00000007 0x060000000310000a3a617574686f7269747907666f6f2e62617200053a70617468012f00073a6d6574686f640347455400073a736368656d650468747470636f74746f6e%00"
**** top  shell_out|      1002 Begin          c req 1001 rxreq
**** top  shell_out|      1001 Link           c req 1002 rxreq
**** top  shell_out|      1002 Timestamp      c Start: 1634893278.425039 0.000000 0.000000
**** top  shell_out|      1002 ReqProtocol    c HTTP/2.0
**** top  shell_out|      1002 Timestamp      c Req: 1634893278.425040 0.000000 0.000000
**** top  shell_out|      1002 VCL_use        c vcl1
**** top  shell_out|      1002 ReqStart       c 127.0.0.1 55966 a0
**** top  shell_out|      1002 ReqMethod      c GET
**** top  shell_out|      1002 ReqURL         c /
**** top  shell_out|      1002 ReqProtocol    c HTTP/2.0
**** top  shell_out|      1002 ReqHeader      c host: foo.bar
**** top  shell_out|      1002 ReqHeader      c scheme: http
**** top  shell_out|      1002 ReqHeader      c X-Forwarded-For: 127.0.0.1
**** top  shell_out|      1002 VCL_call       c RECV
**** top  shell_out|      1002 VCL_return     c pipe
**** top  shell_out|      1002 VCL_call       c HASH
**** top  shell_out|      1002 VCL_return     c lookup
**** top  shell_out|      1002 VCL_Error      c vcl_recv{} returns pipe for HTTP/2 request.  Doing pass.
**** top  shell_out|      1002 VCL_call       c PASS
**** top  shell_out|      1002 VCL_return     c fetch
**** top  shell_out|      1003 Begin          b bereq 1002 pass
**** top  shell_out|      1003 VCL_use        b vcl1
**** top  shell_out|      1002 Link           c bereq 1003 pass
**** top  shell_out|      1003 Timestamp      b Start: 1634893278.425145 0.000000 0.000000
**** top  shell_out|      1003 BereqMethod    b GET
**** top  shell_out|      1003 BereqURL       b /
**** top  shell_out|      1003 BereqProtocol  b HTTP/2.0
**** top  shell_out|      1003 BereqHeader    b host: foo.bar
**** top  shell_out|      1003 BereqHeader    b scheme: http
**** top  shell_out|      1003 BereqHeader    b X-Forwarded-For: 127.0.0.1
**** top  shell_out|      1003 BereqProtocol  b HTTP/1.1
**** top  shell_out|      1003 BereqHeader    b X-Varnish: 1003
**** top  shell_out|      1003 VCL_call       b BACKEND_FETCH
**** top  shell_out|      1003 VCL_return     b fetch
**** top  shell_out|      1003 BackendOpen    b 28 s1 127.0.0.1 42649 127.0.0.1 32786 connect
**** top  shell_out|      1003 Timestamp      b Bereq: 1634893278.425329 0.000184 0.000184
**** top  shell_out|      1003 Timestamp      b Beresp: 1634893278.426170 0.001025 0.000840
**** top  shell_out|      1003 BerespProtocol b HTTP/1.1
**** top  shell_out|      1003 BerespStatus   b 200
**** top  shell_out|      1003 BerespReason   b OK
**** top  shell_out|      1003 BerespHeader   b H2345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234
**** top  shell_out|      1003 BerespHeader   b Foo: H23456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
**** top  shell_out|      1003 BerespHeader   b Content-Length: 10
**** top  shell_out|      1003 BerespHeader   b Date: Fri, 22 Oct 2021 09:01:18 GMT
**** top  shell_out|      1003 VCL_call       b BACKEND_RESPONSE
**** top  shell_out|      1003 VCL_return     b deliver
**** top  shell_out|      1003 Filters        b 
**** top  shell_out|      1003 Storage        b malloc Transient
**** top  shell_out|      1003 Fetch_Body     b 3 length stream
**** top  shell_out|      1003 BackendClose   b 28 s1 recycle
**** top  shell_out|      1002 Timestamp      c Fetch: 1634893278.426325 0.001285 0.001285
**** top  shell_out|      1002 RespProtocol   c HTTP/1.1
**** top  shell_out|      1002 RespStatus     c 200
**** top  shell_out|      1002 RespReason     c OK
**** top  shell_out|      1002 RespHeader     c H2345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234
**** top  shell_out|      1002 RespHeader     c Foo: H23456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
**** top  shell_out|      1002 RespHeader     c Content-Length: 10
**** top  shell_out|      1002 RespHeader     c Date: Fri, 22 Oct 2021 09:01:18 GMT
**** top  shell_out|      1002 RespHeader     c X-Varnish: 1002
**** top  shell_out|      1002 RespHeader     c Age: 0
**** top  shell_out|      1002 RespHeader     c Via: 1.1 varnish (Varnish/6.5)
**** top  shell_out|      1002 VCL_call       c DELIVER
**** top  shell_out|      1002 VCL_return     c deliver
**** top  shell_out|      1002 Timestamp      c Process: 1634893278.426341 0.001302 0.000016
**** top  shell_out|      1002 Filters        c 
**** top  shell_out|      1002 RespHeader     c Accept-Ranges: bytes
**** top  shell_out|      1002 RespProtocol   c HTTP/2.0
**** top  shell_out|      1002 Debug          c "HP {28, "content-length:", ""} <Content-Length: 10>%00"
**** top  shell_out|      1002 Debug          c "HP {33, "date:", ""} <Date: Fri, 22 Oct 2021 09:01:18 GMT>%00"
**** top  shell_out|      1002 Debug          c "HP {21, "age:", ""} <Age: 0>%00"
**** top  shell_out|      1002 Debug          c "HP {60, "via:", ""} <Via: 1.1 varnish (Varnish/6.5)>%00"
**** top  shell_out|      1002 Debug          c "HP {18, "accept-ranges:", ""} <Accept-Ranges: bytes>%00"
**** top  shell_out|      1001 H2TxHdr        c [000276010400000007]
**** top  shell_out|      1001 H2TxBody       c [88107f850168323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930313233343536373839303132333435363738393031323334353637383930]
**** top  shell_out|      1001 H2TxHdr        c [00000a000000000007]
**** top  shell_out|      1001 H2TxBody       c [2122232425262728290a]
**** top  shell_out|      1003 Timestamp      b BerespBody: 1634893278.436388 0.011242 0.010217
**** top  shell_out|      1003 Length         b 10
**** top  shell_out|      1003 BereqAcct      b 92 0 92 573 10 583
**** top  shell_out|      1003 End            b 
**** top  shell_out|      1001 H2TxHdr        c [000000000100000007]
**** top  shell_out|      1002 Timestamp      c Resp: 1634893278.436499 0.011460 0.010158
**** top  shell_status = 0x0000
**** top  shell_match succeeded
**   top  === varnish v1 -syntax 4.1 -vcl+backend {
**** v1   CLI TX|vcl.inline vcl2 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.1;
**** v1   CLI TX|backend s1 { .host = "127.0.0.1"; .port = "42649"; }
**** v1   CLI TX|
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_backend_response {
**** v1   CLI TX|\t\tset beresp.http.B-Sess-XID = sess.xid;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_deliver {
**** v1   CLI TX|\t\tset resp.http.C-Sess-XID = sess.xid;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   5.677
***  v1   CLI RX  200
**** v1   CLI RX|VCL compiled.
**** v1   CLI TX|vcl.use vcl2
***  v1   CLI RX  200
**** v1   CLI RX|VCL 'vcl2' now active
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 41843 (1 iterations)
***  c1   Connect to 127.0.0.1 41843
***  c1   connected fd 20 from 127.0.0.1 55988 to 127.0.0.1 41843
**   c1   === stream 7 {
**** c1   Not in H/2 mode, do what's needed
**   c1   === txpri
**** c1   txpri|PRI * HTTP/2.0\r
**** c1   txpri|\r
**** c1   txpri|SM\r
**** c1   txpri|\r
**** dT   5.688
**   c1   === stream 0 {
**   c1   Starting stream 0x7f7594201600
**   c1   Waiting for stream 0
**   c1   === txsettings
***  c1   tx: stream: 0, type: SETTINGS (4), flags: 0x00, size: 0
**   c1   === rxsettings
***  c1   rx: stream: 0, type: SETTINGS (4), flags: 0x00, size: 6
**** c1   settings->MAX_CONCURRENT_STREAMS (3): 100
**   c1   === txsettings -ack
***  c1   tx: stream: 0, type: SETTINGS (4), flags: 0x01, size: 0
**   c1   === rxsettings
***  c1   rx: stream: 0, type: SETTINGS (4), flags: 0x01, size: 0
***  c1   flag: ACK
**   c1   === expect settings.ack == true
**** c1   EXPECT settings.ack (true) == "true" match
**   c1   Ending stream 0
**   c1   Starting stream 0x7f75942026c0
**   c1   Waiting for stream 7
**   c1   === txreq -url "/uncached"
***  c1   tx: stream: 7, type: HEADERS (1), flags: 0x05, size: 44
**   c1   === rxresp
**** dT   5.689
**** s1   rxhdr|GET /uncached HTTP/1.1\r
**** s1   rxhdr|scheme: http\r
**** s1   rxhdr|X-Forwarded-For: 127.0.0.1\r
**** s1   rxhdr|Accept-Encoding: gzip\r
**** s1   rxhdr|X-Varnish: 1006\r
**** s1   rxhdr|Host: 127.0.0.1\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 125
**** s1   http[ 0] |GET
**** s1   http[ 1] |/uncached
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |scheme: http
**** s1   http[ 4] |X-Forwarded-For: 127.0.0.1
**** s1   http[ 5] |Accept-Encoding: gzip
**** s1   http[ 6] |X-Varnish: 1006
**** s1   http[ 7] |Host: 127.0.0.1
**** s1   bodylen = 0
**   s1   === txresp
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|Content-Length: 0\r
**** s1   txresp|\r
**   s1   === rxreq
**** dT   5.699
***  c1   rx: stream: 7, type: HEADERS (1), flags: 0x05, size: 127
***  c1   flag: END_STREAM
**** c1   header[ 0]: :status : 200
**** c1   header[ 1]: content-length : 0
**** c1   header[ 2]: date : Fri, 22 Oct 2021 09:01:20 GMT
**** c1   header[ 3]: b-sess-xid : 1004
**** c1   header[ 4]: x-varnish : 1005
**** c1   header[ 5]: age : 0
**** c1   header[ 6]: via : 1.1 varnish (Varnish/6.5)
**** c1   header[ 7]: c-sess-xid : 1004
**** c1   header[ 8]: accept-ranges : bytes
**   c1   === expect resp.status == 200
**** c1   EXPECT resp.status (200) == "200" match
**   c1   === expect resp.http.C-Sess-XID ~ "^[0-9]+$"
**** c1   EXPECT resp.http.C-Sess-XID (1004) ~ "^[0-9]+$" match
**   c1   === expect resp.http.B-Sess-XID ~ "^[0-9]+$"
**** c1   EXPECT resp.http.B-Sess-XID (1004) ~ "^[0-9]+$" match
**   c1   === expect resp.http.C-Sess-XID == resp.http.B-Sess-XID
**** c1   EXPECT resp.http.C-Sess-XID (1004) == "1004" match
**   c1   Ending stream 7
**   c1   === stream 9 {
**   c1   Starting stream 0x7f7594203800
**   c1   Waiting for stream 9
**   c1   === txreq -url "/still_not_cached"
***  c1   tx: stream: 9, type: HEADERS (1), flags: 0x05, size: 52
**** dT   5.700
**   c1   === rxresp
**** s1   rxhdr|GET /still_not_cached HTTP/1.1\r
**** s1   rxhdr|scheme: http\r
**** s1   rxhdr|X-Forwarded-For: 127.0.0.1\r
**** s1   rxhdr|Accept-Encoding: gzip\r
**** s1   rxhdr|X-Varnish: 1008\r
**** s1   rxhdr|Host: 127.0.0.1\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 133
**** s1   http[ 0] |GET
**** s1   http[ 1] |/still_not_cached
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |scheme: http
**** s1   http[ 4] |X-Forwarded-For: 127.0.0.1
**** s1   http[ 5] |Accept-Encoding: gzip
**** s1   http[ 6] |X-Varnish: 1008
**** s1   http[ 7] |Host: 127.0.0.1
**** s1   bodylen = 0
**   s1   === txresp
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|Content-Length: 0\r
**** s1   txresp|\r
***  s1   shutting fd 5
**   s1   Ending
**** dT   5.711
***  c1   rx: stream: 9, type: HEADERS (1), flags: 0x05, size: 127
***  c1   flag: END_STREAM
**** c1   header[ 0]: :status : 200
**** c1   header[ 1]: content-length : 0
**** c1   header[ 2]: date : Fri, 22 Oct 2021 09:01:20 GMT
**** c1   header[ 3]: b-sess-xid : 1004
**** c1   header[ 4]: x-varnish : 1007
**** c1   header[ 5]: age : 0
**** c1   header[ 6]: via : 1.1 varnish (Varnish/6.5)
**** c1   header[ 7]: c-sess-xid : 1004
**** c1   header[ 8]: accept-ranges : bytes
**   c1   === expect resp.status == 200
**** c1   EXPECT resp.status (200) == "200" match
**   c1   === expect resp.http.C-Sess-XID ~ "^[0-9]+$"
**** c1   EXPECT resp.http.C-Sess-XID (1004) ~ "^[0-9]+$" match
**   c1   === expect resp.http.B-Sess-XID ~ "^[0-9]+$"
**** c1   EXPECT resp.http.B-Sess-XID (1004) ~ "^[0-9]+$" match
**   c1   === expect resp.http.C-Sess-XID == resp.http.B-Sess-XID
**** c1   EXPECT resp.http.C-Sess-XID (1004) == "1004" match
**   c1   Ending stream 9
***  c1   closing fd 20
**   c1   Ending
*    top  RESETTING after ./tests/t02000.vtc
**** p1   stdout 0 bytes, stderr 0 bytes
**   s1   Waiting for server (4/-1)
**   v1   Wait
**** v1   CLI TX|backend.list
***  v1   CLI RX  200
**** v1   CLI RX|Backend name   Admin      Probe    Health     Last change
**** v1   CLI RX|vcl2.s1        healthy    0/0      healthy    Fri, 22 Oct 2021 09:01:20 GMT
**   v1   Stop
**** v1   CLI TX|stop
**** dT   5.724
**** v1   vsl|          0 CLI             - Rd vcl.load vcl2 vcl_vcl2.1634893280.443272/vgc.so 1auto
**** v1   vsl|          0 CLI             - Wr 200 52 Loaded "vcl_vcl2.1634893280.443272/vgc.so" as "vcl2"
**** v1   vsl|          0 CLI             - Rd vcl.use vcl2
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|       1004 Begin           c sess 0 HTTP/1
**** v1   vsl|       1004 SessOpen        c 127.0.0.1 55988 a0 127.0.0.1 41843 1634893280.668300 27
**** v1   vsl|          0 Debug           - H2 Prior Knowledge Upgrade
**** v1   vsl|       1004 Debug           c H2: Got pu PRISM
**** v1   vsl|       1004 H2TxHdr         c [000006040000000000]
**** v1   vsl|       1004 H2TxBody        c [000300000064]
**** v1   vsl|       1004 H2RxHdr         c [000000040000000000]
**** v1   vsl|       1004 Debug           c H2RXF SETTINGS[0] 0x00 0x00000000
**** v1   vsl|       1004 H2TxHdr         c [000000040100000000]
**** v1   vsl|       1004 H2RxHdr         c [000000040100000000]
**** v1   vsl|       1004 Debug           c H2RXF SETTINGS[0] 0x01 0x00000000
**** v1   vsl|       1004 H2RxHdr         c [00002c010500000007]
**** v1   vsl|       1004 H2RxBody        c [00053a70617468092f756e63616368656400073a6d6574686f640347455400073a736368656d650468747470]
**** v1   vsl|       1004 Debug           c H2RXF HEADERS[44] 0x05 0x00000007 0x00053a70617468092f756e63616368656400073a6d6574686f640347455400073a736368656d650468747470
**** v1   vsl|       1005 Begin           c req 1004 rxreq
**** v1   vsl|       1004 Link            c req 1005 rxreq
**** v1   vsl|       1005 Timestamp       c Start: 1634893280.679007 0.000000 0.000000
**** v1   vsl|       1005 ReqProtocol     c HTTP/2.0
**** v1   vsl|       1005 Timestamp       c Req: 1634893280.679007 0.000000 0.000000
**** v1   vsl|       1005 VCL_use         c vcl2
**** v1   vsl|       1005 ReqStart        c 127.0.0.1 55988 a0
**** v1   vsl|       1005 ReqMethod       c GET
**** v1   vsl|       1005 ReqURL          c /uncached
**** v1   vsl|       1005 ReqProtocol     c HTTP/2.0
**** v1   vsl|       1005 ReqHeader       c scheme: http
**** v1   vsl|       1005 ReqHeader       c X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1005 VCL_call        c RECV
**** v1   vsl|       1005 VCL_return      c hash
**** v1   vsl|       1005 VCL_call        c HASH
**** v1   vsl|       1005 VCL_return      c lookup
**** v1   vsl|       1005 VCL_call        c MISS
**** v1   vsl|       1005 VCL_return      c fetch
**** v1   vsl|       1006 Begin           b bereq 1005 fetch
**** v1   vsl|       1006 VCL_use         b vcl2
**** v1   vsl|       1005 Link            c bereq 1006 fetch
**** v1   vsl|       1006 Timestamp       b Start: 1634893280.679105 0.000000 0.000000
**** v1   vsl|       1006 BereqMethod     b GET
**** v1   vsl|       1006 BereqURL        b /uncached
**** v1   vsl|       1006 BereqProtocol   b HTTP/2.0
**** v1   vsl|       1006 BereqHeader     b scheme: http
**** v1   vsl|       1006 BereqHeader     b X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1006 BereqHeader     b Accept-Encoding: gzip
**** v1   vsl|       1006 BereqProtocol   b HTTP/1.1
**** v1   vsl|       1006 BereqHeader     b X-Varnish: 1006
**** v1   vsl|       1006 VCL_call        b BACKEND_FETCH
**** v1   vsl|       1006 VCL_return      b fetch
**** v1   vsl|       1006 BereqHeader     b Host: 127.0.0.1
**** v1   vsl|       1006 BackendOpen     b 28 s1 127.0.0.1 42649 127.0.0.1 32786 reuse
**** v1   vsl|       1006 Timestamp       b Bereq: 1634893280.679221 0.000116 0.000116
**** v1   vsl|       1006 Timestamp       b Beresp: 1634893280.679777 0.000672 0.000555
**** v1   vsl|       1006 BerespProtocol  b HTTP/1.1
**** v1   vsl|       1006 BerespStatus    b 200
**** v1   vsl|       1006 BerespReason    b OK
**** v1   vsl|       1006 BerespHeader    b Content-Length: 0
**** v1   vsl|       1006 BerespHeader    b Date: Fri, 22 Oct 2021 09:01:20 GMT
**** v1   vsl|       1006 TTL             b RFC 120 10 0 1634893281 1634893281 1634893280 0 0 cacheable
**** v1   vsl|       1006 VCL_call        b BACKEND_RESPONSE
**** v1   vsl|       1006 BerespHeader    b B-Sess-XID: 1004
**** v1   vsl|       1006 VCL_return      b deliver
**** v1   vsl|       1006 Filters         b 
**** v1   vsl|       1006 Storage         b malloc s0
**** v1   vsl|       1006 Fetch_Body      b 0 none -
**** v1   vsl|       1006 BackendClose    b 28 s1 recycle
**** v1   vsl|       1006 Timestamp       b BerespBody: 1634893280.689955 0.010849 0.010177
**** v1   vsl|       1006 Length          b 0
**** v1   vsl|       1006 BereqAcct       b 125 0 125 38 0 38
**** v1   vsl|       1006 End             b 
**** v1   vsl|          0 ExpKill         - EXP_Inbox flg=1e p=0x7fcfa8000f60 e=0.000000 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_When p=0x7fcfa8000f60 e=1634893410.679777 f=0x1e
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fcfa8000f60 e=129.989788 f=0x0
**** v1   vsl|       1005 Timestamp       c Fetch: 1634893280.689989 0.010982 0.010982
**** v1   vsl|       1005 RespProtocol    c HTTP/1.1
**** v1   vsl|       1005 RespStatus      c 200
**** v1   vsl|       1005 RespReason      c OK
**** v1   vsl|       1005 RespHeader      c Content-Length: 0
**** v1   vsl|       1005 RespHeader      c Date: Fri, 22 Oct 2021 09:01:20 GMT
**** v1   vsl|       1005 RespHeader      c B-Sess-XID: 1004
**** v1   vsl|       1005 RespHeader      c X-Varnish: 1005
**** v1   vsl|       1005 RespHeader      c Age: 0
**** v1   vsl|       1005 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1005 VCL_call        c DELIVER
**** v1   vsl|       1005 RespHeader      c C-Sess-XID: 1004
**** v1   vsl|       1005 VCL_return      c deliver
**** v1   vsl|       1005 Timestamp       c Process: 1634893280.690010 0.011002 0.000020
**** v1   vsl|       1005 Filters         c 
**** v1   vsl|       1005 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1005 RespProtocol    c HTTP/2.0
**** v1   vsl|       1005 Debug           c HP {28, "content-length:", ""} <Content-Length: 0>
**** v1   vsl|       1005 Debug           c HP {33, "date:", ""} <Date: Fri, 22 Oct 2021 09:01:20 GMT>
**** v1   vsl|       1005 Debug           c HP {21, "age:", ""} <Age: 0>
**** v1   vsl|       1005 Debug           c HP {60, "via:", ""} <Via: 1.1 varnish (Varnish/6.5)>
**** v1   vsl|       1005 Debug           c HP {18, "accept-ranges:", ""} <Accept-Ranges: bytes>
**** v1   vsl|       1004 H2TxHdr         c [00007f010500000007]
**** v1   vsl|       1004 H2TxBody        c [881f0d01301f121d4672692c203232204f637420323032312030393a30313a323020474d54100a622d736573732d78696404313030341009782d7661726e69736804313030351f0601301f2d19312e31207661726e69736820285661726e6973682f362e3529100a632d736573732d78696404313030341f03056279746573]
**** v1   vsl|       1005 Timestamp       c Resp: 1634893280.690096 0.011088 0.000086
**** v1   vsl|       1005 ReqAcct         c 44 0 44 127 0 127
**** v1   vsl|       1005 End             c 
**** v1   vsl|       1004 H2RxHdr         c [000034010500000009]
**** v1   vsl|       1004 H2RxBody        c [00053a70617468112f7374696c6c5f6e6f745f63616368656400073a6d6574686f640347455400073a736368656d650468747470]
**** v1   vsl|       1004 Debug           c H2RXF HEADERS[52] 0x05 0x00000009 0x00053a70617468112f7374696c6c5f6e6f745f63616368656400073a6d6574686f640347455400073a736368656d650468747470
**** v1   vsl|       1007 Begin           c req 1004 rxreq
**** v1   vsl|       1004 Link            c req 1007 rxreq
**** v1   vsl|       1007 Timestamp       c Start: 1634893280.690518 0.000000 0.000000
**** v1   vsl|       1007 ReqProtocol     c HTTP/2.0
**** v1   vsl|       1007 Timestamp       c Req: 1634893280.690518 0.000000 0.000000
**** v1   vsl|       1007 VCL_use         c vcl2
**** v1   vsl|       1007 ReqStart        c 127.0.0.1 55988 a0
**** v1   vsl|       1007 ReqMethod       c GET
**** v1   vsl|       1007 ReqURL          c /still_not_cached
**** v1   vsl|       1007 ReqProtocol     c HTTP/2.0
**** v1   vsl|       1007 ReqHeader       c scheme: http
**** v1   vsl|       1007 ReqHeader       c X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1007 VCL_call        c RECV
**** v1   vsl|       1007 VCL_return      c hash
**** v1   vsl|       1007 VCL_call        c HASH
**** v1   vsl|       1007 VCL_return      c lookup
**** v1   vsl|       1007 VCL_call        c MISS
**** v1   vsl|       1007 VCL_return      c fetch
**** v1   vsl|       1008 Begin           b bereq 1007 fetch
**** v1   vsl|       1008 VCL_use         b vcl2
**** v1   vsl|       1007 Link            c bereq 1008 fetch
**** v1   vsl|       1008 Timestamp       b Start: 1634893280.690586 0.000000 0.000000
**** v1   vsl|       1008 BereqMethod     b GET
**** v1   vsl|       1008 BereqURL        b /still_not_cached
**** v1   vsl|       1008 BereqProtocol   b HTTP/2.0
**** v1   vsl|       1008 BereqHeader     b scheme: http
**** v1   vsl|       1008 BereqHeader     b X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1008 BereqHeader     b Accept-Encoding: gzip
**** v1   vsl|       1008 BereqProtocol   b HTTP/1.1
**** v1   vsl|       1008 BereqHeader     b X-Varnish: 1008
**** v1   vsl|       1008 VCL_call        b BACKEND_FETCH
**** v1   vsl|       1008 VCL_return      b fetch
**** v1   vsl|       1008 BereqHeader     b Host: 127.0.0.1
**** v1   vsl|       1008 BackendOpen     b 28 s1 127.0.0.1 42649 127.0.0.1 32786 reuse
**** v1   vsl|       1008 Timestamp       b Bereq: 1634893280.690645 0.000059 0.000059
**** v1   vsl|       1008 Timestamp       b Beresp: 1634893280.691261 0.000675 0.000616
**** v1   vsl|       1008 BerespProtocol  b HTTP/1.1
**** v1   vsl|       1008 BerespStatus    b 200
**** v1   vsl|       1008 BerespReason    b OK
**** v1   vsl|       1008 BerespHeader    b Content-Length: 0
**** v1   vsl|       1008 BerespHeader    b Date: Fri, 22 Oct 2021 09:01:20 GMT
**** v1   vsl|       1008 TTL             b RFC 120 10 0 1634893281 1634893281 1634893280 0 0 cacheable
**** v1   vsl|       1008 VCL_call        b BACKEND_RESPONSE
**** v1   vsl|       1008 BerespHeader    b B-Sess-XID: 1004
**** v1   vsl|       1008 VCL_return      b deliver
**** v1   vsl|       1008 Filters         b 
**** v1   vsl|       1008 Storage         b malloc s0
**** v1   vsl|       1008 Fetch_Body      b 0 none -
**** v1   vsl|       1008 BackendClose    b 28 s1 recycle
**** v1   vsl|       1008 Timestamp       b BerespBody: 1634893280.701473 0.010886 0.010211
**** v1   vsl|       1008 Length          b 0
**** v1   vsl|       1008 BereqAcct       b 133 0 133 38 0 38
**** v1   vsl|       1008 End             b 
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fcfa8000f60 e=129.978290 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_Inbox flg=1e p=0x7fcfa80011c0 e=0.000000 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_When p=0x7fcfa80011c0 e=1634893410.691262 f=0x1e
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fcfa8000f60 e=129.978278 f=0x0
**** v1   vsl|       1007 Timestamp       c Fetch: 1634893280.701504 0.010985 0.010985
**** v1   vsl|       1007 RespProtocol    c HTTP/1.1
**** v1   vsl|       1007 RespStatus      c 200
**** v1   vsl|       1007 RespReason      c OK
**** v1   vsl|       1007 RespHeader      c Content-Length: 0
**** v1   vsl|       1007 RespHeader      c Date: Fri, 22 Oct 2021 09:01:20 GMT
**** v1   vsl|       1007 RespHeader      c B-Sess-XID: 1004
**** v1   vsl|       1007 RespHeader      c X-Varnish: 1007
**** v1   vsl|       1007 RespHeader      c Age: 0
**** v1   vsl|       1007 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1007 VCL_call        c DELIVER
**** v1   vsl|       1007 RespHeader      c C-Sess-XID: 1004
**** v1   vsl|       1007 VCL_return      c deliver
**** v1   vsl|       1007 Timestamp       c Process: 1634893280.701521 0.011003 0.000017
**** v1   vsl|       1007 Filters         c 
**** v1   vsl|       1007 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1007 RespProtocol    c HTTP/2.0
**** v1   vsl|       1007 Debug           c HP {28, "content-length:", ""} <Content-Length: 0>
**** v1   vsl|       1007 Debug           c HP {33, "date:", ""} <Date: Fri, 22 Oct 2021 09:01:20 GMT>
**** v1   vsl|       1007 Debug           c HP {21, "age:", ""} <Age: 0>
**** v1   vsl|       1007 Debug           c HP {60, "via:", ""} <Via: 1.1 varnish (Varnish/6.5)>
**** v1   vsl|       1007 Debug           c HP {18, "accept-ranges:", ""} <Accept-Ranges: bytes>
**** v1   vsl|       1004 H2TxHdr         c [00007f010500000009]
**** v1   vsl|       1004 H2TxBody        c [881f0d01301f121d4672692c203232204f637420323032312030393a30313a323020474d54100a622d736573732d78696404313030341009782d7661726e69736804313030371f0601301f2d19312e31207661726e69736820285661726e6973682f362e3529100a632d736573732d78696404313030341f03056279746573]
**** v1   vsl|       1007 Timestamp       c Resp: 1634893280.701586 0.011068 0.000065
**** v1   vsl|       1004 Debug           c H2: No frame (hs=-1)
**** v1   vsl|       1004 Debug           c H2 CLEANUP NO_ERROR
**** v1   vsl|       1004 Debug           c KILL st=9 state=6 sched=0
**** v1   vsl|       1007 ReqAcct         c 52 0 52 127 0 127
**** v1   vsl|       1007 End             c 
**** v1   vsl|       1004 Debug           c ST 0 0
**** v1   vsl|          0 CLI             - Rd backend.list 
**** v1   vsl|          0 CLI             - Wr 200 134 Backend name   Admin      Probe    Health     Last change
vcl2.s1        healthy    0/0      healthy    Fri, 22 Oct 2021 09:01:20 GMT

**** dT   5.752
***  v1   debug|Debug: Stopping Child
**** dT   5.824
**** v1   vsl|          0 CLI             - EOF on CLI connection, worker stops
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7fcfa8000f60 e=129.936745 f=0x0
**** dT   6.752
***  v1   debug|Info: Child (100543) ended
***  v1   debug|Info: Child (100543) said Child dies
***  v1   debug|Debug: Child cleanup complete
**** dT   6.753
***  v1   CLI RX  200
***  v1   wait-stopped
**** v1   CLI TX|status
***  v1   CLI RX  200
**** v1   CLI RX|Child in state stopped
**** v1   CLI TX|panic.clear
***  v1   CLI RX  300
**** v1   CLI RX|No panic to clear
***  v1   debug|Info: manager stopping child
***  v1   debug|Info: manager dies
**** dT   6.754
**** v1   STDOUT EOF
**** dT   6.826
**   v1   WAIT4 pid=100531 status=0x0000 (user 0.332504 sys 0.070929)
*    top  TEST ./tests/t02000.vtc completed
#    top  TEST ./tests/t02000.vtc passed (6.827)
