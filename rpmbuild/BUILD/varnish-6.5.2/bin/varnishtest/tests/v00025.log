**** dT   0.000
*    top  TEST ./tests/v00025.vtc starting
**** top  extmacro def pwd=/root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest
**** top  extmacro def localhost=127.0.0.1
**** top  extmacro def bad_backend=127.0.0.1 39211
**** top  extmacro def bad_ip=192.0.2.255
**** top  extmacro def topbuild=/root/rpmbuild/BUILD/varnish-6.5.2
**** top  macro def testdir=/root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest/./tests
**** top  macro def tmpdir=/tmp/vtc.108105.4c075450
**   top  === varnishtest "More VCL coverage"
*    top  VTEST More VCL coverage
**   top  === server s1 {
**   s1   Starting server
**** s1   macro def s1_addr=127.0.0.1
**** s1   macro def s1_port=45189
**** s1   macro def s1_sock=127.0.0.1 45189
*    s1   Listen on 127.0.0.1 45189
**   top  === varnish v1 -arg "-i J.F.Nobody" -vcl+backend { } -start
**   s1   Started on 127.0.0.1 45189 (1 iterations)
**** dT   0.005
**   v1   Launch
***  v1   CMD: cd ${pwd} && exec varnishd  -d -n /tmp/vtc.108105.4c075450/v1 -l 2m -p auto_restart=off -p syslog_cli_traffic=off -p sigsegv_handler=on -p thread_pool_min=10 -p debug=+vtc_mode -p vsl_mask=+Debug -a '127.0.0.1:0' -M '127.0.0.1 33483' -P /tmp/vtc.108105.4c075450/v1/varnishd.pid -p vmod_path=/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_blob/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_cookie/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_std/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_vtc/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_unix/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_proxy/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_purge/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_directors/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_debug/.libs  -i J.F.Nobody
***  v1   CMD: cd /root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest && exec varnishd  -d -n /tmp/vtc.108105.4c075450/v1 -l 2m -p auto_restart=off -p syslog_cli_traffic=off -p sigsegv_handler=on -p thread_pool_min=10 -p debug=+vtc_mode -p vsl_mask=+Debug -a '127.0.0.1:0' -M '127.0.0.1 33483' -P /tmp/vtc.108105.4c075450/v1/varnishd.pid -p vmod_path=/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_blob/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_cookie/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_std/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_vtc/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_unix/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_proxy/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_purge/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_directors/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_debug/.libs  -i J.F.Nobody
***  v1   PID: 108124
**** v1   macro def v1_pid=108124
**** v1   macro def v1_name=/tmp/vtc.108105.4c075450/v1
**** dT   0.014
***  v1   debug|Debug: Version: varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
***  v1   debug|Debug: Platform: Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
***  v1   debug|200 321     
***  v1   debug|-----------------------------
***  v1   debug|Varnish Cache CLI 1.0
***  v1   debug|-----------------------------
***  v1   debug|Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
***  v1   debug|varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
***  v1   debug|
***  v1   debug|Type 'help' for command list.
***  v1   debug|Type 'quit' to close CLI session.
***  v1   debug|Type 'start' to launch worker process.
***  v1   debug|
**** dT   0.112
**** v1   CLIPOLL 1 0x1 0x0
***  v1   CLI connection fd = 7
***  v1   CLI RX  107
**** v1   CLI RX|zzcxifyigfvuesyzwvsirfwbrsdlxwxd
**** v1   CLI RX|
**** v1   CLI RX|Authentication required.
**** dT   0.113
**** v1   CLI TX|auth 78b67a45a7b49d6e5d9757b8e3927a3f55a9e3f3adb3007b72c2d0bb3a2a4e81
***  v1   CLI RX  200
**** v1   CLI RX|-----------------------------
**** v1   CLI RX|Varnish Cache CLI 1.0
**** v1   CLI RX|-----------------------------
**** v1   CLI RX|Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
**** v1   CLI RX|varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
**** v1   CLI RX|
**** v1   CLI RX|Type 'help' for command list.
**** v1   CLI RX|Type 'quit' to close CLI session.
**** v1   CLI RX|Type 'start' to launch worker process.
**** v1   CLI TX|vcl.inline vcl1 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.1;
**** v1   CLI TX|backend s1 { .host = "127.0.0.1"; .port = "45189"; }
**** v1   CLI TX|
**** v1   CLI TX| 
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.214
***  v1   vsl|No VSL chunk found (child not started ?)
**** dT   0.271
***  v1   CLI RX  200
**** v1   CLI RX|VCL compiled.
**** v1   CLI TX|vcl.use vcl1
***  v1   CLI RX  200
**   v1   Start
**** v1   CLI TX|start
**** dT   0.274
***  v1   debug|Debug: Child (108136) Started
**** dT   0.300
***  v1   CLI RX  200
***  v1   wait-running
**** v1   CLI TX|status
***  v1   debug|Info: Child (108136) said Child starts
***  v1   CLI RX  200
**** v1   CLI RX|Child in state running
**** v1   CLI TX|debug.listen_address
***  v1   CLI RX  200
**** v1   CLI RX|127.0.0.1 40121
**** v1   CLI TX|debug.xid 999
***  v1   CLI RX  200
**** v1   CLI RX|XID is 999
**** v1   CLI TX|debug.listen_address
***  v1   CLI RX  200
**** v1   CLI RX|127.0.0.1 40121
**   v1   Listen on 127.0.0.1 40121
**** v1   macro def v1_addr=127.0.0.1
**** v1   macro def v1_port=40121
**** v1   macro def v1_sock=127.0.0.1 40121
**** dT   0.314
**** v1   vsl|          0 CLI             - Rd vcl.load "vcl1" vcl_vcl1.1634893377.118957/vgc.so 1auto
**** v1   vsl|          0 CLI             - Wr 200 52 Loaded "vcl_vcl1.1634893377.118957/vgc.so" as "vcl1"
**** v1   vsl|          0 CLI             - Rd vcl.use "vcl1"
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|          0 CLI             - Rd start
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|          0 CLI             - Rd debug.listen_address 
**** v1   vsl|          0 CLI             - Wr 200 16 127.0.0.1 40121

**** v1   vsl|          0 CLI             - Rd debug.xid 999 
**** v1   vsl|          0 CLI             - Wr 200 10 XID is 999
**** v1   vsl|          0 CLI             - Rd debug.listen_address 
**** v1   vsl|          0 CLI             - Wr 200 16 127.0.0.1 40121

**** dT   0.400
**   top  === varnish v1 -cliok "param.set max_vcl 2"
**** v1   CLI TX|param.set max_vcl 2
***  v1   CLI RX  200
**   v1   CLI 200 <param.set max_vcl 2>
**   top  === varnish v1 -cliok "param.set max_vcl_handling 2"
**** v1   CLI TX|param.set max_vcl_handling 2
***  v1   CLI RX  200
**   v1   CLI 200 <param.set max_vcl_handling 2>
**   top  === varnish v1 -vcl+backend { }
**** v1   CLI TX|vcl.inline vcl2 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.1;
**** v1   CLI TX|backend s1 { .host = "127.0.0.1"; .port = "45189"; }
**** v1   CLI TX|
**** v1   CLI TX| 
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.561
***  v1   CLI RX  200
**** v1   CLI RX|VCL compiled.
**** v1   CLI TX|vcl.use vcl2
***  v1   CLI RX  200
**** v1   CLI RX|VCL 'vcl2' now active
**   top  === varnish v1 -errvcl {Too many (2) VCLs already loaded} {}
**** v1   CLI TX|vcl.inline vcl3 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.1;
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
***  v1   CLI RX  300
**** v1   CLI RX|Too many (2) VCLs already loaded
**** v1   CLI RX|(See max_vcl and max_vcl_handling parameters)
**   v1   VCL compilation failed (as expected)
***  v1   Found expected string: ("Too many (2) VCLs already loaded")
**   top  === varnish v1 -cliok "param.set max_vcl_handling 1"
**** v1   CLI TX|param.set max_vcl_handling 1
***  v1   CLI RX  200
**   v1   CLI 200 <param.set max_vcl_handling 1>
**   top  === varnish v1 -cliexpect "Remember to vcl.discard the old/unuse...
**** dT   0.562
**** v1   CLI TX|vcl.inline foobar "vcl 4.1; backend b1 {.host=\"127.0.0.1\";}"
**** dT   0.614
**** v1   vsl|          0 CLI             - Rd vcl.load vcl2 vcl_vcl2.1634893377.406115/vgc.so 1auto
**** v1   vsl|          0 CLI             - Wr 200 52 Loaded "vcl_vcl2.1634893377.406115/vgc.so" as "vcl2"
**** v1   vsl|          0 CLI             - Rd vcl.use vcl2
**** v1   vsl|          0 CLI             - Wr 200 0 
**** dT   0.717
***  v1   CLI RX  200
**** v1   CLI RX|VCL compiled.
**** v1   CLI RX|3 VCLs loaded
**** v1   CLI RX|Remember to vcl.discard the old/unused VCLs.
**** v1   CLI RX|(See max_vcl and max_vcl_handling parameters)
**   v1   CLI 200 <vcl.inline foobar "vcl 4.1; backend b1 {.host=\"127.0.0.1\";}">
**   top  === varnish v1 -cliok "param.set max_vcl 100"
**** v1   CLI TX|param.set max_vcl 100
**** dT   0.718
***  v1   CLI RX  200
**   v1   CLI 200 <param.set max_vcl 100>
**   top  === varnish v1 -syntax 4.0 -vcl+backend {
**** v1   CLI TX|vcl.inline vcl4 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.0;
**** v1   CLI TX|backend s1 { .host = "127.0.0.1"; .port = "45189"; }
**** v1   CLI TX|
**** v1   CLI TX|
**** v1   CLI TX|
**** v1   CLI TX|\timport std;
**** v1   CLI TX|\timport directors;
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_init {
**** v1   CLI TX|\t\tnew rr = directors.round_robin();
**** v1   CLI TX|\t\trr.add_backend(s1);
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_recv {
**** v1   CLI TX|\t\tset client.identity = "Samuel B. Nobody";
**** v1   CLI TX|\t\tset req.backend_hint = rr.backend();
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_deliver {
**** v1   CLI TX|\t\tset resp.http.server_port = std.port(server.ip);
**** v1   CLI TX|\t\tset resp.http.server_port_foo = std.port(server.ip) + "_foo";
**** v1   CLI TX|\t\tset resp.http.ttl1 = (req.ttl + 10s);
**** v1   CLI TX|\t\tset resp.http.ttl2 = req.ttl + 10s;
**** v1   CLI TX|\t\tset resp.http.id = server.identity;
**** v1   CLI TX|\t\tset resp.http.esi = req.esi;
**** v1   CLI TX|\t\tset resp.http.be = req.backend_hint;
**** v1   CLI TX|\t\tset resp.http.c_id = client.identity;
**** v1   CLI TX|\t\tset resp.http.l_ip = local.ip;
**** v1   CLI TX|\t\tset resp.http.r_ip = remote.ip;
**** v1   CLI TX|\t\tif (obj.uncacheable) { }
**** v1   CLI TX|\t\tset resp.http.o_age = obj.age;
**** v1   CLI TX|\t\tset resp.http.o_ttl = obj.ttl;
**** v1   CLI TX|\t\tset resp.http.o_grace = obj.grace;
**** v1   CLI TX|\t\tset resp.http.o_keep = obj.keep;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_backend_response {
**** v1   CLI TX|\t\tset beresp.http.bereq_backend = bereq.backend;
**** v1   CLI TX|\t\tset beresp.http.beresp_backend = beresp.backend;
**** v1   CLI TX|\t\tset beresp.http.keep = beresp.keep;
**** v1   CLI TX|\t\tset beresp.http.stv = beresp.storage;
**** v1   CLI TX|\t\tset beresp.http.be_ip = beresp.backend.ip;
**** v1   CLI TX|\t\tset beresp.http.be_nm = beresp.backend.name;
**** v1   CLI TX|\t\tset beresp.http.unc = bereq.uncacheable;
**** v1   CLI TX|\t\tif (beresp.ttl > 3 s) {
**** v1   CLI TX|\t\t\tset beresp.http.ttl = "long";
**** v1   CLI TX|\t\t} else {
**** v1   CLI TX|\t\t\tset beresp.http.ttl = "short";
**** v1   CLI TX|\t\t}
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_hit {
**** v1   CLI TX|\t\tif (obj.status != 200) { return(synth(700)); }
**** v1   CLI TX|\t\tif (obj.proto) { }
**** v1   CLI TX|\t\tif (obj.reason) { }
**** v1   CLI TX|\t\tif (obj.keep > 1m) { }
**** v1   CLI TX|\t\tif (obj.grace < 3m) {
**** v1   CLI TX|\t\t\treturn (deliver);
**** v1   CLI TX|\t\t}
**** v1   CLI TX|\t\tif (obj.ttl < 3m) {
**** v1   CLI TX|\t\t\treturn (deliver);
**** v1   CLI TX|\t\t}
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_backend_fetch {
**** v1   CLI TX|\t\tif (bereq.between_bytes_timeout < 10s) {
**** v1   CLI TX|\t\t\tset bereq.http.quick = "please";
**** v1   CLI TX|\t\t}
**** v1   CLI TX|\t\tif (bereq.connect_timeout < 10s) {
**** v1   CLI TX|\t\t\tset bereq.http.hello = "please";
**** v1   CLI TX|\t\t}
**** v1   CLI TX|\t\tset bereq.connect_timeout = 10s;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.815
**** v1   vsl|          0 CLI             - Rd vcl.load foobar vcl_foobar.1634893377.567222/vgc.so 1auto
**** v1   vsl|          0 CLI             - Wr 200 56 Loaded "vcl_foobar.1634893377.567222/vgc.so" as "foobar"
**** dT   0.936
***  v1   CLI RX  200
**** v1   CLI RX|VCL compiled.
**** v1   CLI TX|vcl.use vcl4
***  v1   CLI RX  200
**** v1   CLI RX|VCL 'vcl4' now active
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 40121 (1 iterations)
***  c1   Connect to 127.0.0.1 40121
***  c1   connected fd 17 from 127.0.0.1 47202 to 127.0.0.1 40121
**   c1   === txreq
**** c1   txreq|GET / HTTP/1.1\r
**** c1   txreq|Host: 127.0.0.1\r
**** c1   txreq|\r
**** dT   0.937
**   c1   === rxresp
***  s1   accepted fd 5 127.0.0.1 34162
**   s1   === rxreq
**** s1   rxhdr|GET / HTTP/1.1\r
**** s1   rxhdr|X-Forwarded-For: 127.0.0.1\r
**** s1   rxhdr|host: 127.0.0.1\r
**** s1   rxhdr|Accept-Encoding: gzip\r
**** s1   rxhdr|X-Varnish: 1002\r
**** s1   rxhdr|quick: please\r
**** s1   rxhdr|hello: please\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 133
**** s1   http[ 0] |GET
**** s1   http[ 1] |/
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |X-Forwarded-For: 127.0.0.1
**** s1   http[ 4] |host: 127.0.0.1
**** s1   http[ 5] |Accept-Encoding: gzip
**** s1   http[ 6] |X-Varnish: 1002
**** s1   http[ 7] |quick: please
**** s1   http[ 8] |hello: please
**** s1   bodylen = 0
**   s1   === txresp
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|Content-Length: 0\r
**** s1   txresp|\r
**   s1   === rxreq
**** dT   0.950
**** c1   rxhdr|HTTP/1.1 200 OK\r
**** c1   rxhdr|Content-Length: 0\r
**** c1   rxhdr|Date: Fri, 22 Oct 2021 09:02:57 GMT\r
**** c1   rxhdr|bereq_backend: rr\r
**** c1   rxhdr|beresp_backend: s1\r
**** c1   rxhdr|keep: 0.000\r
**** c1   rxhdr|stv: storage.s0\r
**** c1   rxhdr|be_ip: 127.0.0.1\r
**** c1   rxhdr|be_nm: s1\r
**** c1   rxhdr|unc: false\r
**** c1   rxhdr|ttl: long\r
**** c1   rxhdr|X-Varnish: 1001\r
**** c1   rxhdr|Age: 0\r
**** c1   rxhdr|Via: 1.1 varnish (Varnish/6.5)\r
**** c1   rxhdr|server_port: 40121\r
**** c1   rxhdr|server_port_foo: 40121_foo\r
**** c1   rxhdr|ttl1: 9.000\r
**** c1   rxhdr|ttl2: 9.000\r
**** c1   rxhdr|id: J.F.Nobody\r
**** c1   rxhdr|esi: true\r
**** c1   rxhdr|be: rr\r
**** c1   rxhdr|c_id: Samuel B. Nobody\r
**** c1   rxhdr|l_ip: 127.0.0.1\r
**** c1   rxhdr|r_ip: 127.0.0.1\r
**** c1   rxhdr|o_age: 0.010\r
**** c1   rxhdr|o_ttl: 119.990\r
**** c1   rxhdr|o_grace: 10.000\r
**** c1   rxhdr|o_keep: 0.000\r
**** c1   rxhdr|Accept-Ranges: bytes\r
**** c1   rxhdr|Connection: keep-alive\r
**** c1   rxhdr|\r
**** c1   rxhdrlen = 528
**** c1   http[ 0] |HTTP/1.1
**** c1   http[ 1] |200
**** c1   http[ 2] |OK
**** c1   http[ 3] |Content-Length: 0
**** c1   http[ 4] |Date: Fri, 22 Oct 2021 09:02:57 GMT
**** c1   http[ 5] |bereq_backend: rr
**** c1   http[ 6] |beresp_backend: s1
**** c1   http[ 7] |keep: 0.000
**** c1   http[ 8] |stv: storage.s0
**** c1   http[ 9] |be_ip: 127.0.0.1
**** c1   http[10] |be_nm: s1
**** c1   http[11] |unc: false
**** c1   http[12] |ttl: long
**** c1   http[13] |X-Varnish: 1001
**** c1   http[14] |Age: 0
**** c1   http[15] |Via: 1.1 varnish (Varnish/6.5)
**** c1   http[16] |server_port: 40121
**** c1   http[17] |server_port_foo: 40121_foo
**** c1   http[18] |ttl1: 9.000
**** c1   http[19] |ttl2: 9.000
**** c1   http[20] |id: J.F.Nobody
**** c1   http[21] |esi: true
**** c1   http[22] |be: rr
**** c1   http[23] |c_id: Samuel B. Nobody
**** c1   http[24] |l_ip: 127.0.0.1
**** c1   http[25] |r_ip: 127.0.0.1
**** c1   http[26] |o_age: 0.010
**** c1   http[27] |o_ttl: 119.990
**** c1   http[28] |o_grace: 10.000
**** c1   http[29] |o_keep: 0.000
**** c1   http[30] |Accept-Ranges: bytes
**** c1   http[31] |Connection: keep-alive
**** c1   bodylen = 0
**   c1   === expect resp.status == 200
**** c1   EXPECT resp.status (200) == "200" match
**   c1   === expect resp.http.bereq_backend == "rr"
**** c1   EXPECT resp.http.bereq_backend (rr) == "rr" match
**   c1   === expect resp.http.beresp_backend == "s1"
**** c1   EXPECT resp.http.beresp_backend (s1) == "s1" match
**   c1   === expect resp.http.be_ip == "127.0.0.1"
**** c1   EXPECT resp.http.be_ip (127.0.0.1) == "127.0.0.1" match
**   c1   === expect resp.http.be_nm == "s1"
**** c1   EXPECT resp.http.be_nm (s1) == "s1" match
**   c1   === expect resp.http.be == "rr"
**** c1   EXPECT resp.http.be (rr) == "rr" match
**   c1   === txreq
**** c1   txreq|GET / HTTP/1.1\r
**** c1   txreq|Host: 127.0.0.1\r
**** c1   txreq|\r
**   c1   === rxresp
**** dT   0.952
**** c1   rxhdr|HTTP/1.1 200 OK\r
**** c1   rxhdr|Content-Length: 0\r
**** c1   rxhdr|Date: Fri, 22 Oct 2021 09:02:57 GMT\r
**** c1   rxhdr|bereq_backend: rr\r
**** c1   rxhdr|beresp_backend: s1\r
**** c1   rxhdr|keep: 0.000\r
**** c1   rxhdr|stv: storage.s0\r
**** c1   rxhdr|be_ip: 127.0.0.1\r
**** c1   rxhdr|be_nm: s1\r
**** c1   rxhdr|unc: false\r
**** c1   rxhdr|ttl: long\r
**** c1   rxhdr|X-Varnish: 1003 1002\r
**** c1   rxhdr|Age: 0\r
**** c1   rxhdr|Via: 1.1 varnish (Varnish/6.5)\r
**** c1   rxhdr|server_port: 40121\r
**** c1   rxhdr|server_port_foo: 40121_foo\r
**** c1   rxhdr|ttl1: 9.000\r
**** c1   rxhdr|ttl2: 9.000\r
**** c1   rxhdr|id: J.F.Nobody\r
**** c1   rxhdr|esi: true\r
**** c1   rxhdr|be: rr\r
**** c1   rxhdr|c_id: Samuel B. Nobody\r
**** c1   rxhdr|l_ip: 127.0.0.1\r
**** c1   rxhdr|r_ip: 127.0.0.1\r
**** c1   rxhdr|o_age: 0.012\r
**** c1   rxhdr|o_ttl: 119.988\r
**** c1   rxhdr|o_grace: 10.000\r
**** c1   rxhdr|o_keep: 0.000\r
**** c1   rxhdr|Accept-Ranges: bytes\r
**** c1   rxhdr|Connection: keep-alive\r
**** c1   rxhdr|\r
**** c1   rxhdrlen = 533
**** c1   http[ 0] |HTTP/1.1
**** c1   http[ 1] |200
**** c1   http[ 2] |OK
**** c1   http[ 3] |Content-Length: 0
**** c1   http[ 4] |Date: Fri, 22 Oct 2021 09:02:57 GMT
**** c1   http[ 5] |bereq_backend: rr
**** c1   http[ 6] |beresp_backend: s1
**** c1   http[ 7] |keep: 0.000
**** c1   http[ 8] |stv: storage.s0
**** c1   http[ 9] |be_ip: 127.0.0.1
**** c1   http[10] |be_nm: s1
**** c1   http[11] |unc: false
**** c1   http[12] |ttl: long
**** c1   http[13] |X-Varnish: 1003 1002
**** c1   http[14] |Age: 0
**** c1   http[15] |Via: 1.1 varnish (Varnish/6.5)
**** c1   http[16] |server_port: 40121
**** c1   http[17] |server_port_foo: 40121_foo
**** c1   http[18] |ttl1: 9.000
**** c1   http[19] |ttl2: 9.000
**** c1   http[20] |id: J.F.Nobody
**** c1   http[21] |esi: true
**** c1   http[22] |be: rr
**** c1   http[23] |c_id: Samuel B. Nobody
**** c1   http[24] |l_ip: 127.0.0.1
**** c1   http[25] |r_ip: 127.0.0.1
**** c1   http[26] |o_age: 0.012
**** c1   http[27] |o_ttl: 119.988
**** c1   http[28] |o_grace: 10.000
**** c1   http[29] |o_keep: 0.000
**** c1   http[30] |Accept-Ranges: bytes
**** c1   http[31] |Connection: keep-alive
**** c1   bodylen = 0
***  c1   closing fd 17
**   c1   Ending
**   top  === varnish v1 -syntax 4.0 -errvcl {Symbol not found: 'sess.xid'...
**** v1   CLI TX|vcl.inline vcl5 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.0;
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_recv {
**** v1   CLI TX|\t\tset req.http.Sess-XID = sess.xid;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.953
***  v1   debug|Could not delete 'vcl_vcl5.1634893377.957696/vgc.sym': No such file or directory
***  v1   CLI RX  106
**** v1   CLI RX|Message from VCC-compiler:
**** v1   CLI RX|Symbol not found: 'sess.xid' (Only available when 4.1 <= VCL syntax)
**** v1   CLI RX|At: ('<vcl.inline>' Line 4 Pos 41) -- (Pos 48)
**** v1   CLI RX|                set req.http.Sess-XID = sess.xid;
**** v1   CLI RX|----------------------------------------########-
**** v1   CLI RX|
**** v1   CLI RX|Running VCC-compiler failed, exited with 2
**** v1   CLI RX|VCL compilation failed
**   v1   VCL compilation failed (as expected)
***  v1   Found expected string: ("Symbol not found: 'sess.xid' (Only available when 4.1 <= VCL syntax)")
**   top  === varnish v1 -syntax 4.0 -errvcl {Symbol not found: 'sess.xid'...
**** v1   CLI TX|vcl.inline vcl6 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.0;
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_backend_fetch {
**** v1   CLI TX|\t\tset bereq.http.Sess-XID = sess.xid;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.954
***  v1   debug|Could not delete 'vcl_vcl6.1634893377.959043/vgc.sym': No such file or directory
***  v1   CLI RX  106
**** v1   CLI RX|Message from VCC-compiler:
**** v1   CLI RX|Symbol not found: 'sess.xid' (Only available when 4.1 <= VCL syntax)
**** v1   CLI RX|At: ('<vcl.inline>' Line 4 Pos 43) -- (Pos 50)
**** v1   CLI RX|                set bereq.http.Sess-XID = sess.xid;
**** v1   CLI RX|------------------------------------------########-
**** v1   CLI RX|
**** v1   CLI RX|Running VCC-compiler failed, exited with 2
**** v1   CLI RX|VCL compilation failed
**   v1   VCL compilation failed (as expected)
***  v1   Found expected string: ("Symbol not found: 'sess.xid' (Only available when 4.1 <= VCL syntax)")
**   top  === varnish v1 -syntax 4.0 -errvcl {Symbol not found: 'local.end...
**** v1   CLI TX|vcl.inline vcl7 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.0;
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_recv {
**** v1   CLI TX|\t\tset req.http.Endpoint = local.endpoint;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.955
***  v1   debug|Could not delete 'vcl_vcl7.1634893377.960133/vgc.sym': No such file or directory
***  v1   CLI RX  106
**** v1   CLI RX|Message from VCC-compiler:
**** v1   CLI RX|Symbol not found: 'local.endpoint' (Only available when 4.1 <= VCL syntax)
**** v1   CLI RX|At: ('<vcl.inline>' Line 4 Pos 41) -- (Pos 54)
**** v1   CLI RX|                set req.http.Endpoint = local.endpoint;
**** v1   CLI RX|----------------------------------------##############-
**** v1   CLI RX|
**** v1   CLI RX|Running VCC-compiler failed, exited with 2
**** v1   CLI RX|VCL compilation failed
**   v1   VCL compilation failed (as expected)
***  v1   Found expected string: ("Symbol not found: 'local.endpoint' (Only available when 4.1 <= VCL syntax)")
**   top  === varnish v1 -syntax 4.0 -errvcl {Symbol not found: 'local.end...
**** v1   CLI TX|vcl.inline vcl8 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.0;
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_backend_fetch {
**** v1   CLI TX|\t\tset bereq.http.Endpoint = local.endpoint;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.957
***  v1   debug|Could not delete 'vcl_vcl8.1634893377.961112/vgc.sym': No such file or directory
***  v1   CLI RX  106
**** v1   CLI RX|Message from VCC-compiler:
**** v1   CLI RX|Symbol not found: 'local.endpoint' (Only available when 4.1 <= VCL syntax)
**** v1   CLI RX|At: ('<vcl.inline>' Line 4 Pos 43) -- (Pos 56)
**** v1   CLI RX|                set bereq.http.Endpoint = local.endpoint;
**** v1   CLI RX|------------------------------------------##############-
**** v1   CLI RX|
**** v1   CLI RX|Running VCC-compiler failed, exited with 2
**** v1   CLI RX|VCL compilation failed
**   v1   VCL compilation failed (as expected)
***  v1   Found expected string: ("Symbol not found: 'local.endpoint' (Only available when 4.1 <= VCL syntax)")
**   top  === varnish v1 -syntax 4.0 -errvcl {Symbol not found: 'local.soc...
**** v1   CLI TX|vcl.inline vcl9 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.0;
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_recv {
**** v1   CLI TX|\t\tset req.http.Socket = local.socket;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.959
***  v1   debug|Could not delete 'vcl_vcl9.1634893377.962954/vgc.sym': No such file or directory
***  v1   CLI RX  106
**** v1   CLI RX|Message from VCC-compiler:
**** v1   CLI RX|Symbol not found: 'local.socket' (Only available when 4.1 <= VCL syntax)
**** v1   CLI RX|At: ('<vcl.inline>' Line 4 Pos 39) -- (Pos 50)
**** v1   CLI RX|                set req.http.Socket = local.socket;
**** v1   CLI RX|--------------------------------------############-
**** v1   CLI RX|
**** v1   CLI RX|Running VCC-compiler failed, exited with 2
**** v1   CLI RX|VCL compilation failed
**   v1   VCL compilation failed (as expected)
***  v1   Found expected string: ("Symbol not found: 'local.socket' (Only available when 4.1 <= VCL syntax)")
**   top  === varnish v1 -syntax 4.0 -errvcl {Symbol not found: 'local.soc...
**** v1   CLI TX|vcl.inline vcl10 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.0;
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_backend_fetch {
**** v1   CLI TX|\t\tset bereq.http.Socket = local.socket;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   0.960
***  v1   debug|Could not delete 'vcl_vcl10.1634893377.964317/vgc.sym': No such file or directory
***  v1   CLI RX  106
**** v1   CLI RX|Message from VCC-compiler:
**** v1   CLI RX|Symbol not found: 'local.socket' (Only available when 4.1 <= VCL syntax)
**** v1   CLI RX|At: ('<vcl.inline>' Line 4 Pos 41) -- (Pos 52)
**** v1   CLI RX|                set bereq.http.Socket = local.socket;
**** v1   CLI RX|----------------------------------------############-
**** v1   CLI RX|
**** v1   CLI RX|Running VCC-compiler failed, exited with 2
**** v1   CLI RX|VCL compilation failed
**   v1   VCL compilation failed (as expected)
***  v1   Found expected string: ("Symbol not found: 'local.socket' (Only available when 4.1 <= VCL syntax)")
**   top  === varnish v1 -syntax 4.1 -vcl+backend {
**** v1   CLI TX|vcl.inline vcl11 << %XJEIFLH|)Xspa8P
**** v1   CLI TX|vcl 4.1;
**** v1   CLI TX|backend s1 { .host = "127.0.0.1"; .port = "45189"; }
**** v1   CLI TX|
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_backend_response {
**** v1   CLI TX|\t\tset beresp.http.B-Sess-XID = sess.xid;
**** v1   CLI TX|\t\tset beresp.http.B-Endpoint = local.endpoint;
**** v1   CLI TX|\t\tset beresp.http.B-Socket = local.socket;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|\tsub vcl_deliver {
**** v1   CLI TX|\t\tset resp.http.C-Sess-XID = sess.xid;
**** v1   CLI TX|\t\tset resp.http.C-Endpoint = local.endpoint;
**** v1   CLI TX|\t\tset resp.http.C-Socket = local.socket;
**** v1   CLI TX|\t}
**** v1   CLI TX|
**** v1   CLI TX|%XJEIFLH|)Xspa8P
**** dT   1.015
**** v1   vsl|          0 CLI             - Rd vcl.load vcl4 vcl_vcl4.1634893377.723250/vgc.so 1auto
**** v1   vsl|          0 CLI             - Wr 200 52 Loaded "vcl_vcl4.1634893377.723250/vgc.so" as "vcl4"
**** v1   vsl|          0 CLI             - Rd vcl.use vcl4
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|       1000 Begin           c sess 0 HTTP/1
**** v1   vsl|       1000 SessOpen        c 127.0.0.1 47202 a0 127.0.0.1 40121 1634893377.942069 25
**** v1   vsl|       1000 Link            c req 1001 rxreq
**** v1   vsl|       1002 Begin           b bereq 1001 fetch
**** v1   vsl|       1002 VCL_use         b vcl4
**** v1   vsl|       1002 Timestamp       b Start: 1634893377.942194 0.000000 0.000000
**** v1   vsl|       1002 BereqMethod     b GET
**** v1   vsl|       1002 BereqURL        b /
**** v1   vsl|       1002 BereqProtocol   b HTTP/1.1
**** v1   vsl|       1002 BereqHeader     b X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1002 BereqHeader     b host: 127.0.0.1
**** v1   vsl|       1002 BereqHeader     b Accept-Encoding: gzip
**** v1   vsl|       1002 BereqHeader     b X-Varnish: 1002
**** v1   vsl|       1002 VCL_call        b BACKEND_FETCH
**** v1   vsl|       1002 BereqHeader     b quick: please
**** v1   vsl|       1002 BereqHeader     b hello: please
**** v1   vsl|       1002 VCL_return      b fetch
**** v1   vsl|       1002 BackendOpen     b 28 s1 127.0.0.1 45189 127.0.0.1 34162 connect
**** v1   vsl|       1002 Timestamp       b Bereq: 1634893377.942346 0.000152 0.000152
**** v1   vsl|       1002 Timestamp       b Beresp: 1634893377.942855 0.000661 0.000509
**** v1   vsl|       1002 BerespProtocol  b HTTP/1.1
**** v1   vsl|       1002 BerespStatus    b 200
**** v1   vsl|       1002 BerespReason    b OK
**** v1   vsl|       1002 BerespHeader    b Content-Length: 0
**** v1   vsl|       1002 BerespHeader    b Date: Fri, 22 Oct 2021 09:02:57 GMT
**** v1   vsl|       1002 TTL             b RFC 120 10 0 1634893378 1634893378 1634893377 0 0 cacheable
**** v1   vsl|       1002 VCL_call        b BACKEND_RESPONSE
**** v1   vsl|       1002 BerespHeader    b bereq_backend: rr
**** v1   vsl|       1002 BerespHeader    b beresp_backend: s1
**** v1   vsl|       1002 BerespHeader    b keep: 0.000
**** v1   vsl|       1002 BerespHeader    b stv: storage.s0
**** v1   vsl|       1002 BerespHeader    b be_ip: 127.0.0.1
**** v1   vsl|       1002 BerespHeader    b be_nm: s1
**** v1   vsl|       1002 BerespHeader    b unc: false
**** v1   vsl|       1002 BerespHeader    b ttl: long
**** v1   vsl|       1002 VCL_return      b deliver
**** v1   vsl|       1002 Filters         b 
**** v1   vsl|       1002 Storage         b malloc s0
**** v1   vsl|       1002 Fetch_Body      b 0 none -
**** v1   vsl|       1002 BackendClose    b 28 s1 recycle
**** v1   vsl|       1002 Timestamp       b BerespBody: 1634893377.953085 0.010890 0.010229
**** v1   vsl|       1002 Length          b 0
**** v1   vsl|       1002 BereqAcct       b 133 0 133 38 0 38
**** v1   vsl|       1002 End             b 
**** v1   vsl|          0 ExpKill         - EXP_Inbox flg=1e p=0x7f8678000cb0 e=0.000000 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_When p=0x7f8678000cb0 e=1634893507.942856 f=0x1e
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7f8678000cb0 e=129.989731 f=0x0
**** v1   vsl|       1001 Begin           c req 1000 rxreq
**** v1   vsl|       1001 Timestamp       c Start: 1634893377.942128 0.000000 0.000000
**** v1   vsl|       1001 Timestamp       c Req: 1634893377.942128 0.000000 0.000000
**** v1   vsl|       1001 VCL_use         c vcl4
**** v1   vsl|       1001 ReqStart        c 127.0.0.1 47202 a0
**** v1   vsl|       1001 ReqMethod       c GET
**** v1   vsl|       1001 ReqURL          c /
**** v1   vsl|       1001 ReqProtocol     c HTTP/1.1
**** v1   vsl|       1001 ReqHeader       c Host: 127.0.0.1
**** v1   vsl|       1001 ReqHeader       c X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1001 VCL_call        c RECV
**** v1   vsl|       1001 ReqUnset        c Host: 127.0.0.1
**** v1   vsl|       1001 ReqHeader       c host: 127.0.0.1
**** v1   vsl|       1001 VCL_return      c hash
**** v1   vsl|       1001 VCL_call        c HASH
**** v1   vsl|       1001 VCL_return      c lookup
**** v1   vsl|       1001 VCL_call        c MISS
**** v1   vsl|       1001 VCL_return      c fetch
**** v1   vsl|       1001 Link            c bereq 1002 fetch
**** v1   vsl|       1001 Timestamp       c Fetch: 1634893377.953148 0.011019 0.011019
**** v1   vsl|       1001 RespProtocol    c HTTP/1.1
**** v1   vsl|       1001 RespStatus      c 200
**** v1   vsl|       1001 RespReason      c OK
**** v1   vsl|       1001 RespHeader      c Content-Length: 0
**** v1   vsl|       1001 RespHeader      c Date: Fri, 22 Oct 2021 09:02:57 GMT
**** v1   vsl|       1001 RespHeader      c bereq_backend: rr
**** v1   vsl|       1001 RespHeader      c beresp_backend: s1
**** v1   vsl|       1001 RespHeader      c keep: 0.000
**** v1   vsl|       1001 RespHeader      c stv: storage.s0
**** v1   vsl|       1001 RespHeader      c be_ip: 127.0.0.1
**** v1   vsl|       1001 RespHeader      c be_nm: s1
**** v1   vsl|       1001 RespHeader      c unc: false
**** v1   vsl|       1001 RespHeader      c ttl: long
**** v1   vsl|       1001 RespHeader      c X-Varnish: 1001
**** v1   vsl|       1001 RespHeader      c Age: 0
**** v1   vsl|       1001 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1001 VCL_call        c DELIVER
**** v1   vsl|       1001 RespHeader      c server_port: 40121
**** v1   vsl|       1001 RespHeader      c server_port_foo: 40121_foo
**** v1   vsl|       1001 RespHeader      c ttl1: 9.000
**** v1   vsl|       1001 RespHeader      c ttl2: 9.000
**** v1   vsl|       1001 RespHeader      c id: J.F.Nobody
**** v1   vsl|       1001 RespHeader      c esi: true
**** v1   vsl|       1001 RespHeader      c be: rr
**** v1   vsl|       1001 RespHeader      c c_id: Samuel B. Nobody
**** v1   vsl|       1001 RespHeader      c l_ip: 127.0.0.1
**** v1   vsl|       1001 RespHeader      c r_ip: 127.0.0.1
**** v1   vsl|       1001 RespHeader      c o_age: 0.010
**** v1   vsl|       1001 RespHeader      c o_ttl: 119.990
**** v1   vsl|       1001 RespHeader      c o_grace: 10.000
**** v1   vsl|       1001 RespHeader      c o_keep: 0.000
**** v1   vsl|       1001 VCL_return      c deliver
**** v1   vsl|       1001 Timestamp       c Process: 1634893377.953209 0.011080 0.000060
**** v1   vsl|       1001 Filters         c 
**** v1   vsl|       1001 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1001 RespHeader      c Connection: keep-alive
**** v1   vsl|       1001 Timestamp       c Resp: 1634893377.953324 0.011196 0.000115
**** v1   vsl|       1001 ReqAcct         c 35 0 35 528 0 528
**** v1   vsl|       1001 End             c 
**** v1   vsl|       1000 Link            c req 1003 rxreq
**** v1   vsl|       1003 Begin           c req 1000 rxreq
**** v1   vsl|       1003 Timestamp       c Start: 1634893377.955270 0.000000 0.000000
**** v1   vsl|       1003 Timestamp       c Req: 1634893377.955270 0.000000 0.000000
**** v1   vsl|       1003 VCL_use         c vcl4
**** v1   vsl|       1003 ReqStart        c 127.0.0.1 47202 a0
**** v1   vsl|       1003 ReqMethod       c GET
**** v1   vsl|       1003 ReqURL          c /
**** v1   vsl|       1003 ReqProtocol     c HTTP/1.1
**** v1   vsl|       1003 ReqHeader       c Host: 127.0.0.1
**** v1   vsl|       1003 ReqHeader       c X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1003 VCL_call        c RECV
**** v1   vsl|       1003 ReqUnset        c Host: 127.0.0.1
**** v1   vsl|       1003 ReqHeader       c host: 127.0.0.1
**** v1   vsl|       1003 VCL_return      c hash
**** v1   vsl|       1003 VCL_call        c HASH
**** v1   vsl|       1003 VCL_return      c lookup
**** v1   vsl|       1003 Hit             c 1002 119.987586 10.000000 0.000000
**** v1   vsl|       1003 VCL_call        c HIT
**** v1   vsl|       1003 VCL_return      c deliver
**** v1   vsl|       1003 RespProtocol    c HTTP/1.1
**** v1   vsl|       1003 RespStatus      c 200
**** v1   vsl|       1003 RespReason      c OK
**** v1   vsl|       1003 RespHeader      c Content-Length: 0
**** v1   vsl|       1003 RespHeader      c Date: Fri, 22 Oct 2021 09:02:57 GMT
**** v1   vsl|       1003 RespHeader      c bereq_backend: rr
**** v1   vsl|       1003 RespHeader      c beresp_backend: s1
**** v1   vsl|       1003 RespHeader      c keep: 0.000
**** v1   vsl|       1003 RespHeader      c stv: storage.s0
**** v1   vsl|       1003 RespHeader      c be_ip: 127.0.0.1
**** v1   vsl|       1003 RespHeader      c be_nm: s1
**** v1   vsl|       1003 RespHeader      c unc: false
**** v1   vsl|       1003 RespHeader      c ttl: long
**** v1   vsl|       1003 RespHeader      c X-Varnish: 1003 1002
**** v1   vsl|       1003 RespHeader      c Age: 0
**** v1   vsl|       1003 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1003 VCL_call        c DELIVER
**** v1   vsl|       1003 RespHeader      c server_port: 40121
**** v1   vsl|       1003 RespHeader      c server_port_foo: 40121_foo
**** v1   vsl|       1003 RespHeader      c ttl1: 9.000
**** v1   vsl|       1003 RespHeader      c ttl2: 9.000
**** v1   vsl|       1003 RespHeader      c id: J.F.Nobody
**** v1   vsl|       1003 RespHeader      c esi: true
**** v1   vsl|       1003 RespHeader      c be: rr
**** v1   vsl|       1003 RespHeader      c c_id: Samuel B. Nobody
**** v1   vsl|       1003 RespHeader      c l_ip: 127.0.0.1
**** v1   vsl|       1003 RespHeader      c r_ip: 127.0.0.1
**** v1   vsl|       1003 RespHeader      c o_age: 0.012
**** v1   vsl|       1003 RespHeader      c o_ttl: 119.988
**** v1   vsl|       1003 RespHeader      c o_grace: 10.000
**** v1   vsl|       1003 RespHeader      c o_keep: 0.000
**** v1   vsl|       1003 VCL_return      c deliver
**** v1   vsl|       1003 Timestamp       c Process: 1634893377.955345 0.000075 0.000075
**** v1   vsl|       1003 Filters         c 
**** v1   vsl|       1003 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1003 RespHeader      c Connection: keep-alive
**** v1   vsl|       1003 Timestamp       c Resp: 1634893377.955376 0.000106 0.000030
**** v1   vsl|       1003 ReqAcct         c 35 0 35 533 0 533
**** v1   vsl|       1003 End             c 
**** v1   vsl|       1000 SessClose       c REM_CLOSE 0.015
**** v1   vsl|       1000 End             c 
**** dT   1.123
***  v1   CLI RX  200
**** v1   CLI RX|VCL compiled.
**** v1   CLI TX|vcl.use vcl11
***  v1   CLI RX  200
**** v1   CLI RX|VCL 'vcl11' now active
**   top  === client c1 {
**   c1   Starting client
**   c1   Waiting for client
**   c1   Started on 127.0.0.1 40121 (1 iterations)
***  c1   Connect to 127.0.0.1 40121
***  c1   connected fd 17 from 127.0.0.1 47210 to 127.0.0.1 40121
**   c1   === txreq -url "/uncached"
**** c1   txreq|GET /uncached HTTP/1.1\r
**** c1   txreq|Host: 127.0.0.1\r
**** c1   txreq|\r
**** dT   1.124
**** s1   rxhdr|GET /uncached HTTP/1.1\r
**** s1   rxhdr|X-Forwarded-For: 127.0.0.1\r
**** s1   rxhdr|host: 127.0.0.1\r
**** s1   rxhdr|Accept-Encoding: gzip\r
**** s1   rxhdr|X-Varnish: 1006\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 111
**** s1   http[ 0] |GET
**** s1   http[ 1] |/uncached
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |X-Forwarded-For: 127.0.0.1
**** s1   http[ 4] |host: 127.0.0.1
**** s1   http[ 5] |Accept-Encoding: gzip
**** s1   http[ 6] |X-Varnish: 1006
**** s1   bodylen = 0
**   s1   === txresp
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|Content-Length: 0\r
**** s1   txresp|\r
***  s1   shutting fd 5
**   s1   Ending
**   c1   === rxresp
**** dT   1.136
**** c1   rxhdr|HTTP/1.1 200 OK\r
**** c1   rxhdr|Content-Length: 0\r
**** c1   rxhdr|Date: Fri, 22 Oct 2021 09:02:58 GMT\r
**** c1   rxhdr|B-Sess-XID: 1004\r
**** c1   rxhdr|B-Endpoint: 127.0.0.1:40121\r
**** c1   rxhdr|B-Socket: a0\r
**** c1   rxhdr|X-Varnish: 1005\r
**** c1   rxhdr|Age: 0\r
**** c1   rxhdr|Via: 1.1 varnish (Varnish/6.5)\r
**** c1   rxhdr|C-Sess-XID: 1004\r
**** c1   rxhdr|C-Endpoint: 127.0.0.1:40121\r
**** c1   rxhdr|C-Socket: a0\r
**** c1   rxhdr|Accept-Ranges: bytes\r
**** c1   rxhdr|Connection: keep-alive\r
**** c1   rxhdr|\r
**** c1   rxhdrlen = 300
**** c1   http[ 0] |HTTP/1.1
**** c1   http[ 1] |200
**** c1   http[ 2] |OK
**** c1   http[ 3] |Content-Length: 0
**** c1   http[ 4] |Date: Fri, 22 Oct 2021 09:02:58 GMT
**** c1   http[ 5] |B-Sess-XID: 1004
**** c1   http[ 6] |B-Endpoint: 127.0.0.1:40121
**** c1   http[ 7] |B-Socket: a0
**** c1   http[ 8] |X-Varnish: 1005
**** c1   http[ 9] |Age: 0
**** c1   http[10] |Via: 1.1 varnish (Varnish/6.5)
**** c1   http[11] |C-Sess-XID: 1004
**** c1   http[12] |C-Endpoint: 127.0.0.1:40121
**** c1   http[13] |C-Socket: a0
**** c1   http[14] |Accept-Ranges: bytes
**** c1   http[15] |Connection: keep-alive
**** c1   bodylen = 0
**   c1   === expect resp.status == 200
**** c1   EXPECT resp.status (200) == "200" match
**   c1   === expect resp.http.C-Sess-XID ~ "^[0-9]+$"
**** c1   EXPECT resp.http.C-Sess-XID (1004) ~ "^[0-9]+$" match
**   c1   === expect resp.http.B-Sess-XID ~ "^[0-9]+$"
**** c1   EXPECT resp.http.B-Sess-XID (1004) ~ "^[0-9]+$" match
**   c1   === expect resp.http.C-Sess-XID == resp.http.B-Sess-XID
**** c1   EXPECT resp.http.C-Sess-XID (1004) == "1004" match
**   c1   === expect resp.http.C-Endpoint == "127.0.0.1:40121"
**** c1   EXPECT resp.http.C-Endpoint (127.0.0.1:40121) == "127.0.0.1:40121" match
**   c1   === expect resp.http.B-Endpoint == "127.0.0.1:40121"
**** c1   EXPECT resp.http.B-Endpoint (127.0.0.1:40121) == "127.0.0.1:40121" match
**   c1   === expect resp.http.C-Socket == "a0"
**** c1   EXPECT resp.http.C-Socket (a0) == "a0" match
**   c1   === expect resp.http.B-Socket == "a0"
**** c1   EXPECT resp.http.B-Socket (a0) == "a0" match
***  c1   closing fd 17
**   c1   Ending
**   top  === varnish v1 -stop
**   v1   Stop
**** v1   CLI TX|stop
***  v1   debug|Debug: Stopping Child
**** dT   1.216
**** v1   vsl|          0 CLI             - Rd vcl.load vcl11 vcl_vcl11.1634893377.966113/vgc.so 1auto
**** v1   vsl|          0 CLI             - Wr 200 54 Loaded "vcl_vcl11.1634893377.966113/vgc.so" as "vcl11"
**** v1   vsl|          0 CLI             - Rd vcl.use vcl11
**** v1   vsl|          0 CLI             - Wr 200 0 
**** v1   vsl|       1004 Begin           c sess 0 HTTP/1
**** v1   vsl|       1004 SessOpen        c 127.0.0.1 47210 a0 127.0.0.1 40121 1634893378.128879 26
**** v1   vsl|       1004 Link            c req 1005 rxreq
**** v1   vsl|       1006 Begin           b bereq 1005 fetch
**** v1   vsl|       1006 VCL_use         b vcl11
**** v1   vsl|       1006 Timestamp       b Start: 1634893378.129075 0.000000 0.000000
**** v1   vsl|       1006 BereqMethod     b GET
**** v1   vsl|       1006 BereqURL        b /uncached
**** v1   vsl|       1006 BereqProtocol   b HTTP/1.1
**** v1   vsl|       1006 BereqHeader     b X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1006 BereqHeader     b host: 127.0.0.1
**** v1   vsl|       1006 BereqHeader     b Accept-Encoding: gzip
**** v1   vsl|       1006 BereqHeader     b X-Varnish: 1006
**** v1   vsl|       1006 VCL_call        b BACKEND_FETCH
**** v1   vsl|       1006 VCL_return      b fetch
**** v1   vsl|       1006 BackendOpen     b 28 s1 127.0.0.1 45189 127.0.0.1 34162 reuse
**** v1   vsl|       1006 Timestamp       b Bereq: 1634893378.129149 0.000073 0.000073
**** v1   vsl|       1006 Timestamp       b Beresp: 1634893378.129828 0.000752 0.000679
**** v1   vsl|       1006 BerespProtocol  b HTTP/1.1
**** v1   vsl|       1006 BerespStatus    b 200
**** v1   vsl|       1006 BerespReason    b OK
**** v1   vsl|       1006 BerespHeader    b Content-Length: 0
**** v1   vsl|       1006 BerespHeader    b Date: Fri, 22 Oct 2021 09:02:58 GMT
**** v1   vsl|       1006 TTL             b RFC 120 10 0 1634893378 1634893378 1634893378 0 0 cacheable
**** v1   vsl|       1006 VCL_call        b BACKEND_RESPONSE
**** v1   vsl|       1006 BerespHeader    b B-Sess-XID: 1004
**** v1   vsl|       1006 BerespHeader    b B-Endpoint: 127.0.0.1:40121
**** v1   vsl|       1006 BerespHeader    b B-Socket: a0
**** v1   vsl|       1006 VCL_return      b deliver
**** v1   vsl|       1006 Filters         b 
**** v1   vsl|       1006 Storage         b malloc s0
**** v1   vsl|       1006 Fetch_Body      b 0 none -
**** v1   vsl|       1006 BackendClose    b 28 s1 recycle
**** v1   vsl|       1006 Timestamp       b BerespBody: 1634893378.140018 0.010942 0.010189
**** v1   vsl|       1006 Length          b 0
**** v1   vsl|       1006 BereqAcct       b 111 0 111 38 0 38
**** v1   vsl|       1006 End             b 
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7f8678000cb0 e=129.802797 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_Inbox flg=1e p=0x7f8670000bb0 e=0.000000 f=0x0
**** v1   vsl|          0 ExpKill         - EXP_When p=0x7f8670000bb0 e=1634893508.129829 f=0x1e
**** v1   vsl|          0 ExpKill         - EXP_expire p=0x7f8678000cb0 e=129.802785 f=0x0
**** v1   vsl|       1005 Begin           c req 1004 rxreq
**** v1   vsl|       1005 Timestamp       c Start: 1634893378.129010 0.000000 0.000000
**** v1   vsl|       1005 Timestamp       c Req: 1634893378.129010 0.000000 0.000000
**** v1   vsl|       1005 VCL_use         c vcl11
**** v1   vsl|       1005 ReqStart        c 127.0.0.1 47210 a0
**** v1   vsl|       1005 ReqMethod       c GET
**** v1   vsl|       1005 ReqURL          c /uncached
**** v1   vsl|       1005 ReqProtocol     c HTTP/1.1
**** v1   vsl|       1005 ReqHeader       c Host: 127.0.0.1
**** v1   vsl|       1005 ReqHeader       c X-Forwarded-For: 127.0.0.1
**** v1   vsl|       1005 VCL_call        c RECV
**** v1   vsl|       1005 ReqUnset        c Host: 127.0.0.1
**** v1   vsl|       1005 ReqHeader       c host: 127.0.0.1
**** v1   vsl|       1005 VCL_return      c hash
**** v1   vsl|       1005 VCL_call        c HASH
**** v1   vsl|       1005 VCL_return      c lookup
**** v1   vsl|       1005 VCL_call        c MISS
**** v1   vsl|       1005 VCL_return      c fetch
**** v1   vsl|       1005 Link            c bereq 1006 fetch
**** v1   vsl|       1005 Timestamp       c Fetch: 1634893378.140080 0.011069 0.011069
**** v1   vsl|       1005 RespProtocol    c HTTP/1.1
**** v1   vsl|       1005 RespStatus      c 200
**** v1   vsl|       1005 RespReason      c OK
**** v1   vsl|       1005 RespHeader      c Content-Length: 0
**** v1   vsl|       1005 RespHeader      c Date: Fri, 22 Oct 2021 09:02:58 GMT
**** v1   vsl|       1005 RespHeader      c B-Sess-XID: 1004
**** v1   vsl|       1005 RespHeader      c B-Endpoint: 127.0.0.1:40121
**** v1   vsl|       1005 RespHeader      c B-Socket: a0
**** v1   vsl|       1005 RespHeader      c X-Varnish: 1005
**** v1   vsl|       1005 RespHeader      c Age: 0
**** v1   vsl|       1005 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v1   vsl|       1005 VCL_call        c DELIVER
**** v1   vsl|       1005 RespHeader      c C-Sess-XID: 1004
**** v1   vsl|       1005 RespHeader      c C-Endpoint: 127.0.0.1:40121
**** v1   vsl|       1005 RespHeader      c C-Socket: a0
**** v1   vsl|       1005 VCL_return      c deliver
**** v1   vsl|       1005 Timestamp       c Process: 1634893378.140102 0.011092 0.000022
**** v1   vsl|       1005 Filters         c 
**** v1   vsl|       1005 RespHeader      c Accept-Ranges: bytes
**** v1   vsl|       1005 RespHeader      c Connection: keep-alive
**** v1   vsl|       1005 Timestamp       c Resp: 1634893378.140195 0.011184 0.000092
**** v1   vsl|       1005 ReqAcct         c 43 0 43 300 0 300
**** v1   vsl|       1005 End             c 
**** v1   vsl|       1004 SessClose       c REM_CLOSE 0.013
**** v1   vsl|       1004 End             c 
**** v1   vsl|          0 CLI             - EOF on CLI connection, worker stops
**** dT   2.136
***  v1   debug|Info: Child (108136) ended
**** dT   2.137
***  v1   debug|Info: Child (108136) said Child dies
***  v1   debug|Debug: Child cleanup complete
***  v1   CLI RX  200
***  v1   wait-stopped
**** v1   CLI TX|status
***  v1   CLI RX  200
**** v1   CLI RX|Child in state stopped
**   top  === server s1 {
**   s1   Waiting for server (4/-1)
**   s1   Starting server
**** s1   macro def s1_addr=127.0.0.1
**** s1   macro def s1_port=45189
**** s1   macro def s1_sock=127.0.0.1 45189
*    s1   Listen on 127.0.0.1 45189
**   top  === varnish v2 -arg "-a foo=${tmpdir}/foo.sock -a bar=${tmpdir}/...
**   s1   Started on 127.0.0.1 45189 (1 iterations)
**** dT   2.143
**   v2   Launch
***  v2   CMD: cd ${pwd} && exec varnishd  -d -n /tmp/vtc.108105.4c075450/v2 -l 2m -p auto_restart=off -p syslog_cli_traffic=off -p sigsegv_handler=on -p thread_pool_min=10 -p debug=+vtc_mode -p vsl_mask=+Debug -M '127.0.0.1 39221' -P /tmp/vtc.108105.4c075450/v2/varnishd.pid -p vmod_path=/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_blob/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_cookie/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_std/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_vtc/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_unix/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_proxy/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_purge/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_directors/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_debug/.libs  -a foo=/tmp/vtc.108105.4c075450/foo.sock -a bar=/tmp/vtc.108105.4c075450/bar.sock
***  v2   CMD: cd /root/rpmbuild/BUILD/varnish-6.5.2/bin/varnishtest && exec varnishd  -d -n /tmp/vtc.108105.4c075450/v2 -l 2m -p auto_restart=off -p syslog_cli_traffic=off -p sigsegv_handler=on -p thread_pool_min=10 -p debug=+vtc_mode -p vsl_mask=+Debug -M '127.0.0.1 39221' -P /tmp/vtc.108105.4c075450/v2/varnishd.pid -p vmod_path=/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_blob/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_cookie/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_std/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_vtc/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_unix/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_proxy/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_purge/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_directors/.libs:/root/rpmbuild/BUILD/varnish-6.5.2/lib/libvmod_debug/.libs  -a foo=/tmp/vtc.108105.4c075450/foo.sock -a bar=/tmp/vtc.108105.4c075450/bar.sock
***  v2   PID: 108325
**** v2   macro def v2_pid=108325
**** v2   macro def v2_name=/tmp/vtc.108105.4c075450/v2
**** dT   2.152
***  v2   debug|Debug: Version: varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
***  v2   debug|Debug: Platform: Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
***  v2   debug|200 321     
***  v2   debug|-----------------------------
***  v2   debug|Varnish Cache CLI 1.0
***  v2   debug|-----------------------------
***  v2   debug|Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
***  v2   debug|varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
***  v2   debug|
***  v2   debug|Type 'help' for command list.
***  v2   debug|Type 'quit' to close CLI session.
***  v2   debug|Type 'start' to launch worker process.
***  v2   debug|
**** dT   2.250
**** v2   CLIPOLL 1 0x1 0x0
***  v2   CLI connection fd = 18
***  v2   CLI RX  107
**** v2   CLI RX|joqubwbobhuinoiaoiqyuyluuyaznbet
**** v2   CLI RX|
**** v2   CLI RX|Authentication required.
**** v2   CLI TX|auth 2ac87e3f1e47802b758a864a84200eac95b2fd3755458e964e423a45d474776d
**** dT   2.251
***  v2   CLI RX  200
**** v2   CLI RX|-----------------------------
**** v2   CLI RX|Varnish Cache CLI 1.0
**** v2   CLI RX|-----------------------------
**** v2   CLI RX|Linux,5.3.18-59.24-default,x86_64,-jnone,-sdefault,-sdefault,-hcritbit
**** v2   CLI RX|varnish-6.5.2 revision e7233b0ad2639043341819d19a8d2e418e94ce1b
**** v2   CLI RX|
**** v2   CLI RX|Type 'help' for command list.
**** v2   CLI RX|Type 'quit' to close CLI session.
**** v2   CLI RX|Type 'start' to launch worker process.
**** v2   CLI TX|vcl.inline vcl1 << %XJEIFLH|)Xspa8P
**** v2   CLI TX|vcl 4.1;
**** v2   CLI TX|backend s1 { .host = "127.0.0.1"; .port = "45189"; }
**** v2   CLI TX|
**** v2   CLI TX|
**** v2   CLI TX|
**** v2   CLI TX|\tsub vcl_backend_response {
**** v2   CLI TX|\t\tset beresp.http.B-Endpoint = local.endpoint;
**** v2   CLI TX|\t\tset beresp.http.B-Socket = local.socket;
**** v2   CLI TX|\t}
**** v2   CLI TX|
**** v2   CLI TX|\tsub vcl_deliver {
**** v2   CLI TX|\t\tset resp.http.C-Endpoint = local.endpoint;
**** v2   CLI TX|\t\tset resp.http.C-Socket = local.socket;
**** v2   CLI TX|\t}
**** v2   CLI TX|
**** v2   CLI TX|%XJEIFLH|)Xspa8P
**** dT   2.351
***  v2   vsl|No VSL chunk found (child not started ?)
**** dT   2.416
***  v2   CLI RX  200
**** v2   CLI RX|VCL compiled.
**** v2   CLI TX|vcl.use vcl1
***  v2   CLI RX  200
**   v2   Start
**** v2   CLI TX|start
**** dT   2.419
***  v2   debug|Debug: Child (108373) Started
**** dT   2.445
***  v2   CLI RX  200
***  v2   wait-running
**** v2   CLI TX|status
***  v2   debug|Info: Child (108373) said Child starts
***  v2   CLI RX  200
**** v2   CLI RX|Child in state running
**** v2   CLI TX|debug.listen_address
***  v2   CLI RX  200
**** v2   CLI RX|/tmp/vtc.108105.4c075450/foo.sock -
**** v2   CLI RX|/tmp/vtc.108105.4c075450/bar.sock -
**** v2   CLI TX|debug.xid 999
***  v2   CLI RX  200
**** v2   CLI RX|XID is 999
**** v2   CLI TX|debug.listen_address
***  v2   CLI RX  200
**** v2   CLI RX|/tmp/vtc.108105.4c075450/foo.sock -
**** v2   CLI RX|/tmp/vtc.108105.4c075450/bar.sock -
**   v2   Listen on /tmp/vtc.108105.4c075450/foo.sock -
**** v2   macro def v2_addr=/tmp/vtc.108105.4c075450/foo.sock
**** v2   macro def v2_port=-
**** v2   macro def v2_sock=/tmp/vtc.108105.4c075450/foo.sock -
**** dT   2.451
**** v2   vsl|          0 CLI             - Rd vcl.load "vcl1" vcl_vcl1.1634893379.256579/vgc.so 1auto
**** v2   vsl|          0 CLI             - Wr 200 52 Loaded "vcl_vcl1.1634893379.256579/vgc.so" as "vcl1"
**** v2   vsl|          0 CLI             - Rd vcl.use "vcl1"
**** v2   vsl|          0 CLI             - Wr 200 0 
**** v2   vsl|          0 CLI             - Rd start
**** v2   vsl|          0 CLI             - Wr 200 0 
**** v2   vsl|          0 CLI             - Rd debug.listen_address 
**** v2   vsl|          0 CLI             - Wr 200 72 /tmp/vtc.108105.4c075450/foo.sock -
/tmp/vtc.108105.4c075450/bar.sock -

**** v2   vsl|          0 CLI             - Rd debug.xid 999 
**** v2   vsl|          0 CLI             - Wr 200 10 XID is 999
**** v2   vsl|          0 CLI             - Rd debug.listen_address 
**** v2   vsl|          0 CLI             - Wr 200 72 /tmp/vtc.108105.4c075450/foo.sock -
/tmp/vtc.108105.4c075450/bar.sock -

**** dT   2.546
**   top  === client c2 -connect "${tmpdir}/foo.sock" {
**   c2   Starting client
**   c2   Waiting for client
**   c2   Started on /tmp/vtc.108105.4c075450/foo.sock (1 iterations)
***  c2   Connect to /tmp/vtc.108105.4c075450/foo.sock
***  c2   connected fd 28 to /tmp/vtc.108105.4c075450/foo.sock
**   c2   === txreq
**** c2   txreq|GET / HTTP/1.1\r
**** c2   txreq|Host: 127.0.0.1\r
**** c2   txreq|\r
***  s1   accepted fd 5 127.0.0.1 34176
**   s1   === rxreq
**** dT   2.547
**** s1   rxhdr|GET / HTTP/1.1\r
**** s1   rxhdr|X-Forwarded-For: 0.0.0.0\r
**** s1   rxhdr|host: 127.0.0.1\r
**** s1   rxhdr|Accept-Encoding: gzip\r
**** s1   rxhdr|X-Varnish: 1002\r
**** s1   rxhdr|\r
**** s1   rxhdrlen = 101
**** s1   http[ 0] |GET
**** s1   http[ 1] |/
**** s1   http[ 2] |HTTP/1.1
**** s1   http[ 3] |X-Forwarded-For: 0.0.0.0
**** s1   http[ 4] |host: 127.0.0.1
**** s1   http[ 5] |Accept-Encoding: gzip
**** s1   http[ 6] |X-Varnish: 1002
**** s1   bodylen = 0
**   s1   === txresp
**** s1   txresp|HTTP/1.1 200 OK\r
**** s1   txresp|Content-Length: 0\r
**** s1   txresp|\r
**   s1   === rxreq
**   c2   === rxresp
**** dT   2.551
**** v2   vsl|       1000 Begin           c sess 0 HTTP/1
**** v2   vsl|       1000 SessOpen        c 0.0.0.0 0 foo 0.0.0.0 0 1634893379.551413 26
**** v2   vsl|       1000 Link            c req 1001 rxreq
**** dT   2.558
**** c2   rxhdr|HTTP/1.1 200 OK\r
**** c2   rxhdr|Content-Length: 0\r
**** c2   rxhdr|Date: Fri, 22 Oct 2021 09:02:59 GMT\r
**** c2   rxhdr|B-Endpoint: /tmp/vtc.108105.4c075450/foo.sock\r
**** c2   rxhdr|B-Socket: foo\r
**** c2   rxhdr|X-Varnish: 1001\r
**** c2   rxhdr|Age: 0\r
**** c2   rxhdr|Via: 1.1 varnish (Varnish/6.5)\r
**** c2   rxhdr|C-Endpoint: /tmp/vtc.108105.4c075450/foo.sock\r
**** c2   rxhdr|C-Socket: foo\r
**** c2   rxhdr|Accept-Ranges: bytes\r
**** c2   rxhdr|Connection: keep-alive\r
**** c2   rxhdr|\r
**** c2   rxhdrlen = 302
**** c2   http[ 0] |HTTP/1.1
**** c2   http[ 1] |200
**** c2   http[ 2] |OK
**** c2   http[ 3] |Content-Length: 0
**** c2   http[ 4] |Date: Fri, 22 Oct 2021 09:02:59 GMT
**** c2   http[ 5] |B-Endpoint: /tmp/vtc.108105.4c075450/foo.sock
**** c2   http[ 6] |B-Socket: foo
**** c2   http[ 7] |X-Varnish: 1001
**** c2   http[ 8] |Age: 0
**** c2   http[ 9] |Via: 1.1 varnish (Varnish/6.5)
**** c2   http[10] |C-Endpoint: /tmp/vtc.108105.4c075450/foo.sock
**** c2   http[11] |C-Socket: foo
**** c2   http[12] |Accept-Ranges: bytes
**** c2   http[13] |Connection: keep-alive
**** c2   bodylen = 0
**   c2   === expect resp.status == 200
**** c2   EXPECT resp.status (200) == "200" match
**   c2   === expect resp.http.C-Endpoint == "/tmp/vtc.108105.4c075450/foo...
**** c2   EXPECT resp.http.C-Endpoint (/tmp/vtc.108105.4c075450/foo.sock) == "/tmp/vtc.108105.4c075450/foo.sock" match
**   c2   === expect resp.http.B-Endpoint == "/tmp/vtc.108105.4c075450/foo...
**** c2   EXPECT resp.http.B-Endpoint (/tmp/vtc.108105.4c075450/foo.sock) == "/tmp/vtc.108105.4c075450/foo.sock" match
**   c2   === expect resp.http.C-Socket == "foo"
**** c2   EXPECT resp.http.C-Socket (foo) == "foo" match
**   c2   === expect resp.http.B-Socket == "foo"
**** c2   EXPECT resp.http.B-Socket (foo) == "foo" match
***  c2   closing fd 28
**   c2   Ending
**   top  === client c2 -connect "${tmpdir}/bar.sock" {
**   c2   Starting client
**   c2   Waiting for client
**   c2   Started on /tmp/vtc.108105.4c075450/bar.sock (1 iterations)
***  c2   Connect to /tmp/vtc.108105.4c075450/bar.sock
***  c2   connected fd 28 to /tmp/vtc.108105.4c075450/bar.sock
**   c2   === txreq
**** c2   txreq|GET / HTTP/1.1\r
**** c2   txreq|Host: 127.0.0.1\r
**** c2   txreq|\r
**   c2   === rxresp
**** dT   2.559
**** c2   rxhdr|HTTP/1.1 200 OK\r
**** c2   rxhdr|Content-Length: 0\r
**** c2   rxhdr|Date: Fri, 22 Oct 2021 09:02:59 GMT\r
**** c2   rxhdr|B-Endpoint: /tmp/vtc.108105.4c075450/foo.sock\r
**** c2   rxhdr|B-Socket: foo\r
**** c2   rxhdr|X-Varnish: 1004 1002\r
**** c2   rxhdr|Age: 0\r
**** c2   rxhdr|Via: 1.1 varnish (Varnish/6.5)\r
**** c2   rxhdr|C-Endpoint: /tmp/vtc.108105.4c075450/bar.sock\r
**** c2   rxhdr|C-Socket: bar\r
**** c2   rxhdr|Accept-Ranges: bytes\r
**** c2   rxhdr|Connection: keep-alive\r
**** c2   rxhdr|\r
**** c2   rxhdrlen = 307
**** c2   http[ 0] |HTTP/1.1
**** c2   http[ 1] |200
**** c2   http[ 2] |OK
**** c2   http[ 3] |Content-Length: 0
**** c2   http[ 4] |Date: Fri, 22 Oct 2021 09:02:59 GMT
**** c2   http[ 5] |B-Endpoint: /tmp/vtc.108105.4c075450/foo.sock
**** c2   http[ 6] |B-Socket: foo
**** c2   http[ 7] |X-Varnish: 1004 1002
**** c2   http[ 8] |Age: 0
**** c2   http[ 9] |Via: 1.1 varnish (Varnish/6.5)
**** c2   http[10] |C-Endpoint: /tmp/vtc.108105.4c075450/bar.sock
**** c2   http[11] |C-Socket: bar
**** c2   http[12] |Accept-Ranges: bytes
**** c2   http[13] |Connection: keep-alive
**** c2   bodylen = 0
**   c2   === expect resp.status == 200
**** c2   EXPECT resp.status (200) == "200" match
**   c2   === expect resp.http.C-Endpoint == "/tmp/vtc.108105.4c075450/bar...
**** c2   EXPECT resp.http.C-Endpoint (/tmp/vtc.108105.4c075450/bar.sock) == "/tmp/vtc.108105.4c075450/bar.sock" match
**   c2   === expect resp.http.B-Endpoint ~ "^/tmp/vtc.108105.4c075450/(ba...
**** c2   EXPECT resp.http.B-Endpoint (/tmp/vtc.108105.4c075450/foo.sock) ~ "^/tmp/vtc.108105.4c075450/(bar|foo).sock$" match
**   c2   === expect resp.http.C-Socket == "bar"
**** c2   EXPECT resp.http.C-Socket (bar) == "bar" match
**   c2   === expect resp.http.B-Socket ~ "^(bar|foo)$"
**** c2   EXPECT resp.http.B-Socket (foo) ~ "^(bar|foo)$" match
***  c2   closing fd 28
**   c2   Ending
*    top  RESETTING after ./tests/v00025.vtc
**** dT   2.560
**   s1   Waiting for server (4/-1)
**   v1   Wait
**** v1   CLI TX|backend.list
***  v1   CLI RX  101
**** v1   CLI RX|Unknown request in manager process (child not running).
**** v1   CLI RX|Type 'help' for more info.
**   v1   Stop
**** v1   CLI TX|stop
**** dT   2.601
***  v1   CLI RX  300
**** v1   CLI RX|Child in state stopped
***  v1   wait-stopped
**** v1   CLI TX|status
***  v1   CLI RX  200
**** v1   CLI RX|Child in state stopped
**** v1   CLI TX|panic.clear
***  v1   CLI RX  300
**** v1   CLI RX|No panic to clear
**** dT   2.602
***  v1   debug|Info: manager stopping child
***  v1   debug|Info: manager dies
**** v1   STDOUT EOF
**** dT   2.618
**   v1   WAIT4 pid=108124 status=0x0000 (user 0.770696 sys 0.109653)
**   v2   Wait
**** v2   CLI TX|backend.list
***  v2   CLI RX  200
**** v2   CLI RX|Backend name   Admin      Probe    Health     Last change
**** v2   CLI RX|vcl1.s1        healthy    0/0      healthy    Fri, 22 Oct 2021 09:02:59 GMT
**   v2   Stop
**** v2   CLI TX|stop
***  v2   debug|Debug: Stopping Child
**** dT   2.652
**** v2   vsl|       1002 Begin           b bereq 1001 fetch
**** v2   vsl|       1002 VCL_use         b vcl1
**** v2   vsl|       1002 Timestamp       b Start: 1634893379.551673 0.000000 0.000000
**** v2   vsl|       1002 BereqMethod     b GET
**** v2   vsl|       1002 BereqURL        b /
**** v2   vsl|       1002 BereqProtocol   b HTTP/1.1
**** v2   vsl|       1002 BereqHeader     b X-Forwarded-For: 0.0.0.0
**** v2   vsl|       1002 BereqHeader     b host: 127.0.0.1
**** v2   vsl|       1002 BereqHeader     b Accept-Encoding: gzip
**** v2   vsl|       1002 BereqHeader     b X-Varnish: 1002
**** v2   vsl|       1002 VCL_call        b BACKEND_FETCH
**** v2   vsl|       1002 VCL_return      b fetch
**** v2   vsl|       1002 BackendOpen     b 31 s1 127.0.0.1 45189 127.0.0.1 34176 connect
**** v2   vsl|       1002 Timestamp       b Bereq: 1634893379.551943 0.000270 0.000270
**** v2   vsl|       1002 Timestamp       b Beresp: 1634893379.552384 0.000711 0.000441
**** v2   vsl|       1002 BerespProtocol  b HTTP/1.1
**** v2   vsl|       1002 BerespStatus    b 200
**** v2   vsl|       1002 BerespReason    b OK
**** v2   vsl|       1002 BerespHeader    b Content-Length: 0
**** v2   vsl|       1002 BerespHeader    b Date: Fri, 22 Oct 2021 09:02:59 GMT
**** v2   vsl|       1002 TTL             b RFC 120 10 0 1634893380 1634893380 1634893379 0 0 cacheable
**** v2   vsl|       1002 VCL_call        b BACKEND_RESPONSE
**** v2   vsl|       1002 BerespHeader    b B-Endpoint: /tmp/vtc.108105.4c075450/foo.sock
**** v2   vsl|       1002 BerespHeader    b B-Socket: foo
**** v2   vsl|       1002 VCL_return      b deliver
**** v2   vsl|       1002 Filters         b 
**** v2   vsl|       1002 Storage         b malloc s0
**** v2   vsl|       1002 Fetch_Body      b 0 none -
**** v2   vsl|       1002 BackendClose    b 31 s1 recycle
**** v2   vsl|       1002 Timestamp       b BerespBody: 1634893379.562600 0.010927 0.010215
**** v2   vsl|       1002 Length          b 0
**** v2   vsl|       1002 BereqAcct       b 101 0 101 38 0 38
**** v2   vsl|       1002 End             b 
**** v2   vsl|          0 ExpKill         - EXP_Inbox flg=1e p=0x7f8c40010f50 e=0.000000 f=0x0
**** v2   vsl|          0 ExpKill         - EXP_When p=0x7f8c40010f50 e=1634893509.552385 f=0x1e
**** v2   vsl|          0 ExpKill         - EXP_expire p=0x7f8c40010f50 e=129.989737 f=0x0
**** v2   vsl|       1001 Begin           c req 1000 rxreq
**** v2   vsl|       1001 Timestamp       c Start: 1634893379.551540 0.000000 0.000000
**** v2   vsl|       1001 Timestamp       c Req: 1634893379.551540 0.000000 0.000000
**** v2   vsl|       1001 VCL_use         c vcl1
**** v2   vsl|       1001 ReqStart        c 0.0.0.0 0 foo
**** v2   vsl|       1001 ReqMethod       c GET
**** v2   vsl|       1001 ReqURL          c /
**** v2   vsl|       1001 ReqProtocol     c HTTP/1.1
**** v2   vsl|       1001 ReqHeader       c Host: 127.0.0.1
**** v2   vsl|       1001 ReqHeader       c X-Forwarded-For: 0.0.0.0
**** v2   vsl|       1001 VCL_call        c RECV
**** v2   vsl|       1001 ReqUnset        c Host: 127.0.0.1
**** v2   vsl|       1001 ReqHeader       c host: 127.0.0.1
**** v2   vsl|       1001 VCL_return      c hash
**** v2   vsl|       1001 VCL_call        c HASH
**** v2   vsl|       1001 VCL_return      c lookup
**** v2   vsl|       1001 VCL_call        c MISS
**** v2   vsl|       1001 VCL_return      c fetch
**** v2   vsl|       1001 Link            c bereq 1002 fetch
**** v2   vsl|       1001 Timestamp       c Fetch: 1634893379.562659 0.011119 0.011119
**** v2   vsl|       1001 RespProtocol    c HTTP/1.1
**** v2   vsl|       1001 RespStatus      c 200
**** v2   vsl|       1001 RespReason      c OK
**** v2   vsl|       1001 RespHeader      c Content-Length: 0
**** v2   vsl|       1001 RespHeader      c Date: Fri, 22 Oct 2021 09:02:59 GMT
**** v2   vsl|       1001 RespHeader      c B-Endpoint: /tmp/vtc.108105.4c075450/foo.sock
**** v2   vsl|       1001 RespHeader      c B-Socket: foo
**** v2   vsl|       1001 RespHeader      c X-Varnish: 1001
**** v2   vsl|       1001 RespHeader      c Age: 0
**** v2   vsl|       1001 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v2   vsl|       1001 VCL_call        c DELIVER
**** v2   vsl|       1001 RespHeader      c C-Endpoint: /tmp/vtc.108105.4c075450/foo.sock
**** v2   vsl|       1001 RespHeader      c C-Socket: foo
**** v2   vsl|       1001 VCL_return      c deliver
**** v2   vsl|       1001 Timestamp       c Process: 1634893379.562695 0.011155 0.000036
**** v2   vsl|       1001 Filters         c 
**** v2   vsl|       1001 RespHeader      c Accept-Ranges: bytes
**** v2   vsl|       1001 RespHeader      c Connection: keep-alive
**** v2   vsl|       1001 Timestamp       c Resp: 1634893379.562722 0.011182 0.000026
**** v2   vsl|       1001 ReqAcct         c 35 0 35 302 0 302
**** v2   vsl|       1001 End             c 
**** v2   vsl|       1000 SessClose       c REM_CLOSE 0.012
**** v2   vsl|       1000 End             c 
**** v2   vsl|       1003 Begin           c sess 0 HTTP/1
**** v2   vsl|       1003 SessOpen        c 0.0.0.0 0 bar 0.0.0.0 0 1634893379.563877 27
**** v2   vsl|       1003 Link            c req 1004 rxreq
**** v2   vsl|       1004 Begin           c req 1003 rxreq
**** v2   vsl|       1004 Timestamp       c Start: 1634893379.563923 0.000000 0.000000
**** v2   vsl|       1004 Timestamp       c Req: 1634893379.563923 0.000000 0.000000
**** v2   vsl|       1004 VCL_use         c vcl1
**** v2   vsl|       1004 ReqStart        c 0.0.0.0 0 bar
**** v2   vsl|       1004 ReqMethod       c GET
**** v2   vsl|       1004 ReqURL          c /
**** v2   vsl|       1004 ReqProtocol     c HTTP/1.1
**** v2   vsl|       1004 ReqHeader       c Host: 127.0.0.1
**** v2   vsl|       1004 ReqHeader       c X-Forwarded-For: 0.0.0.0
**** v2   vsl|       1004 VCL_call        c RECV
**** v2   vsl|       1004 ReqUnset        c Host: 127.0.0.1
**** v2   vsl|       1004 ReqHeader       c host: 127.0.0.1
**** v2   vsl|       1004 VCL_return      c hash
**** v2   vsl|       1004 VCL_call        c HASH
**** v2   vsl|       1004 VCL_return      c lookup
**** v2   vsl|       1004 Hit             c 1002 119.988462 10.000000 0.000000
**** v2   vsl|       1004 VCL_call        c HIT
**** v2   vsl|       1004 VCL_return      c deliver
**** v2   vsl|       1004 RespProtocol    c HTTP/1.1
**** v2   vsl|       1004 RespStatus      c 200
**** v2   vsl|       1004 RespReason      c OK
**** v2   vsl|       1004 RespHeader      c Content-Length: 0
**** v2   vsl|       1004 RespHeader      c Date: Fri, 22 Oct 2021 09:02:59 GMT
**** v2   vsl|       1004 RespHeader      c B-Endpoint: /tmp/vtc.108105.4c075450/foo.sock
**** v2   vsl|       1004 RespHeader      c B-Socket: foo
**** v2   vsl|       1004 RespHeader      c X-Varnish: 1004 1002
**** v2   vsl|       1004 RespHeader      c Age: 0
**** v2   vsl|       1004 RespHeader      c Via: 1.1 varnish (Varnish/6.5)
**** v2   vsl|       1004 VCL_call        c DELIVER
**** v2   vsl|       1004 RespHeader      c C-Endpoint: /tmp/vtc.108105.4c075450/bar.sock
**** v2   vsl|       1004 RespHeader      c C-Socket: bar
**** v2   vsl|       1004 VCL_return      c deliver
**** v2   vsl|       1004 Timestamp       c Process: 1634893379.563959 0.000036 0.000036
**** v2   vsl|       1004 Filters         c 
**** v2   vsl|       1004 RespHeader      c Accept-Ranges: bytes
**** v2   vsl|       1004 RespHeader      c Connection: keep-alive
**** v2   vsl|       1004 Timestamp       c Resp: 1634893379.563968 0.000045 0.000009
**** v2   vsl|       1004 ReqAcct         c 35 0 35 307 0 307
**** v2   vsl|       1004 End             c 
**** v2   vsl|       1003 SessClose       c REM_CLOSE 0.001
**** v2   vsl|       1003 End             c 
**** v2   vsl|          0 CLI             - Rd backend.list 
**** v2   vsl|          0 CLI             - Wr 200 134 Backend name   Admin      Probe    Health     Last change
vcl1.s1        healthy    0/0      healthy    Fri, 22 Oct 2021 09:02:59 GMT

**** v2   vsl|          0 CLI             - EOF on CLI connection, worker stops
**** dT   3.619
***  v2   debug|Info: Child (108373) ended
***  v2   debug|Info: Child (108373) said Child dies
***  v2   debug|Debug: Child cleanup complete
***  v2   CLI RX  200
***  v2   wait-stopped
**** v2   CLI TX|status
***  v2   CLI RX  200
**** v2   CLI RX|Child in state stopped
**** v2   CLI TX|panic.clear
***  v2   CLI RX  300
**** v2   CLI RX|No panic to clear
**** dT   3.620
***  v2   debug|Info: manager stopping child
***  v2   debug|Info: manager dies
**** v2   STDOUT EOF
**** dT   3.653
**   v2   WAIT4 pid=108325 status=0x0000 (user 0.143983 sys 0.043041)
**** dT   3.654
*    top  TEST ./tests/v00025.vtc completed
#    top  TEST ./tests/v00025.vtc passed (3.654)
