/*
 * NB:  This file is machine generated, DO NOT EDIT!
 *
 * Edit mempool.vsc and run lib/libvcc/vsctool.py instead.
 */

#include "config.h"
#include <stdio.h>
#include <stdarg.h>
#include "vdef.h"
#include "vas.h"
#include "vrt.h"
#include "VSC_mempool.h"

static const char vsc_mempool_name[] = "MEMPOOL";

#define PARANOIA(a,n)				\
    v_static_assert(				\
	offsetof(struct VSC_mempool, a) == n,	\
	"VSC element '" #a "' at wrong offset")

PARANOIA(live, 0);
PARANOIA(pool, 8);
PARANOIA(sz_wanted, 16);
PARANOIA(sz_actual, 24);
PARANOIA(allocs, 32);
PARANOIA(frees, 40);
PARANOIA(recycle, 48);
PARANOIA(timeout, 56);
PARANOIA(toosmall, 64);
PARANOIA(surplus, 72);
PARANOIA(randry, 80);
#undef PARANOIA

static const unsigned char vsc_mempool_json[1715] = {
	123,34,118,101,114,115,105,111,110,34,58,34,49,34,44,34,110,97,109,101,
	34,58,34,109,101,109,112,111,111,108,34,44,34,111,110,101,108,105,110,
	101,114,34,58,34,77,101,109,111,114,121,32,80,111,111,108,32,67,111,
	117,110,116,101,114,115,34,44,34,111,114,100,101,114,34,58,51,48,44,
	34,100,111,99,115,34,58,34,34,44,34,101,108,101,109,101,110,116,115,
	34,58,49,49,44,34,101,108,101,109,34,58,123,34,108,105,118,101,34,58,
	123,34,116,121,112,101,34,58,34,103,97,117,103,101,34,44,34,99,116,121,
	112,101,34,58,34,117,105,110,116,54,52,95,116,34,44,34,108,101,118,101,
	108,34,58,34,100,101,98,117,103,34,44,34,111,110,101,108,105,110,101,
	114,34,58,34,73,110,32,117,115,101,34,44,34,102,111,114,109,97,116,34,
	58,34,105,110,116,101,103,101,114,34,44,34,105,110,100,101,120,34,58,
	48,44,34,110,97,109,101,34,58,34,108,105,118,101,34,44,34,100,111,99,
	115,34,58,34,34,125,44,34,112,111,111,108,34,58,123,34,116,121,112,101,
	34,58,34,103,97,117,103,101,34,44,34,99,116,121,112,101,34,58,34,117,
	105,110,116,54,52,95,116,34,44,34,108,101,118,101,108,34,58,34,100,101,
	98,117,103,34,44,34,111,110,101,108,105,110,101,114,34,58,34,73,110,
	32,80,111,111,108,34,44,34,102,111,114,109,97,116,34,58,34,105,110,116,
	101,103,101,114,34,44,34,105,110,100,101,120,34,58,56,44,34,110,97,109,
	101,34,58,34,112,111,111,108,34,44,34,100,111,99,115,34,58,34,34,125,
	44,34,115,122,95,119,97,110,116,101,100,34,58,123,34,116,121,112,101,
	34,58,34,103,97,117,103,101,34,44,34,99,116,121,112,101,34,58,34,117,
	105,110,116,54,52,95,116,34,44,34,108,101,118,101,108,34,58,34,100,101,
	98,117,103,34,44,34,111,110,101,108,105,110,101,114,34,58,34,83,105,
	122,101,32,114,101,113,117,101,115,116,101,100,34,44,34,102,111,114,
	109,97,116,34,58,34,98,121,116,101,115,34,44,34,105,110,100,101,120,
	34,58,49,54,44,34,110,97,109,101,34,58,34,115,122,95,119,97,110,116,
	101,100,34,44,34,100,111,99,115,34,58,34,34,125,44,34,115,122,95,97,
	99,116,117,97,108,34,58,123,34,116,121,112,101,34,58,34,103,97,117,103,
	101,34,44,34,99,116,121,112,101,34,58,34,117,105,110,116,54,52,95,116,
	34,44,34,108,101,118,101,108,34,58,34,100,101,98,117,103,34,44,34,111,
	110,101,108,105,110,101,114,34,58,34,83,105,122,101,32,97,108,108,111,
	99,97,116,101,100,34,44,34,102,111,114,109,97,116,34,58,34,98,121,116,
	101,115,34,44,34,105,110,100,101,120,34,58,50,52,44,34,110,97,109,101,
	34,58,34,115,122,95,97,99,116,117,97,108,34,44,34,100,111,99,115,34,
	58,34,34,125,44,34,97,108,108,111,99,115,34,58,123,34,116,121,112,101,
	34,58,34,99,111,117,110,116,101,114,34,44,34,99,116,121,112,101,34,58,
	34,117,105,110,116,54,52,95,116,34,44,34,108,101,118,101,108,34,58,34,
	100,101,98,117,103,34,44,34,111,110,101,108,105,110,101,114,34,58,34,
	65,108,108,111,99,97,116,105,111,110,115,34,44,34,102,111,114,109,97,
	116,34,58,34,105,110,116,101,103,101,114,34,44,34,105,110,100,101,120,
	34,58,51,50,44,34,110,97,109,101,34,58,34,97,108,108,111,99,115,34,44,
	34,100,111,99,115,34,58,34,34,125,44,34,102,114,101,101,115,34,58,123,
	34,116,121,112,101,34,58,34,99,111,117,110,116,101,114,34,44,34,99,116,
	121,112,101,34,58,34,117,105,110,116,54,52,95,116,34,44,34,108,101,118,
	101,108,34,58,34,100,101,98,117,103,34,44,34,111,110,101,108,105,110,
	101,114,34,58,34,70,114,101,101,115,34,44,34,102,111,114,109,97,116,
	34,58,34,105,110,116,101,103,101,114,34,44,34,105,110,100,101,120,34,
	58,52,48,44,34,110,97,109,101,34,58,34,102,114,101,101,115,34,44,34,
	100,111,99,115,34,58,34,34,125,44,34,114,101,99,121,99,108,101,34,58,
	123,34,116,121,112,101,34,58,34,99,111,117,110,116,101,114,34,44,34,
	99,116,121,112,101,34,58,34,117,105,110,116,54,52,95,116,34,44,34,108,
	101,118,101,108,34,58,34,100,101,98,117,103,34,44,34,111,110,101,108,
	105,110,101,114,34,58,34,82,101,99,121,99,108,101,100,32,102,114,111,
	109,32,112,111,111,108,34,44,34,102,111,114,109,97,116,34,58,34,105,
	110,116,101,103,101,114,34,44,34,105,110,100,101,120,34,58,52,56,44,
	34,110,97,109,101,34,58,34,114,101,99,121,99,108,101,34,44,34,100,111,
	99,115,34,58,34,34,125,44,34,116,105,109,101,111,117,116,34,58,123,34,
	116,121,112,101,34,58,34,99,111,117,110,116,101,114,34,44,34,99,116,
	121,112,101,34,58,34,117,105,110,116,54,52,95,116,34,44,34,108,101,118,
	101,108,34,58,34,100,101,98,117,103,34,44,34,111,110,101,108,105,110,
	101,114,34,58,34,84,105,109,101,100,32,111,117,116,32,102,114,111,109,
	32,112,111,111,108,34,44,34,102,111,114,109,97,116,34,58,34,105,110,
	116,101,103,101,114,34,44,34,105,110,100,101,120,34,58,53,54,44,34,110,
	97,109,101,34,58,34,116,105,109,101,111,117,116,34,44,34,100,111,99,
	115,34,58,34,34,125,44,34,116,111,111,115,109,97,108,108,34,58,123,34,
	116,121,112,101,34,58,34,99,111,117,110,116,101,114,34,44,34,99,116,
	121,112,101,34,58,34,117,105,110,116,54,52,95,116,34,44,34,108,101,118,
	101,108,34,58,34,100,101,98,117,103,34,44,34,111,110,101,108,105,110,
	101,114,34,58,34,84,111,111,32,115,109,97,108,108,32,116,111,32,114,
	101,99,121,99,108,101,34,44,34,102,111,114,109,97,116,34,58,34,105,110,
	116,101,103,101,114,34,44,34,105,110,100,101,120,34,58,54,52,44,34,110,
	97,109,101,34,58,34,116,111,111,115,109,97,108,108,34,44,34,100,111,
	99,115,34,58,34,34,125,44,34,115,117,114,112,108,117,115,34,58,123,34,
	116,121,112,101,34,58,34,99,111,117,110,116,101,114,34,44,34,99,116,
	121,112,101,34,58,34,117,105,110,116,54,52,95,116,34,44,34,108,101,118,
	101,108,34,58,34,100,101,98,117,103,34,44,34,111,110,101,108,105,110,
	101,114,34,58,34,84,111,111,32,109,97,110,121,32,102,111,114,32,112,
	111,111,108,34,44,34,102,111,114,109,97,116,34,58,34,105,110,116,101,
	103,101,114,34,44,34,105,110,100,101,120,34,58,55,50,44,34,110,97,109,
	101,34,58,34,115,117,114,112,108,117,115,34,44,34,100,111,99,115,34,
	58,34,34,125,44,34,114,97,110,100,114,121,34,58,123,34,116,121,112,101,
	34,58,34,99,111,117,110,116,101,114,34,44,34,99,116,121,112,101,34,58,
	34,117,105,110,116,54,52,95,116,34,44,34,108,101,118,101,108,34,58,34,
	100,101,98,117,103,34,44,34,111,110,101,108,105,110,101,114,34,58,34,
	80,111,111,108,32,114,97,110,32,100,114,121,34,44,34,102,111,114,109,
	97,116,34,58,34,105,110,116,101,103,101,114,34,44,34,105,110,100,101,
	120,34,58,56,48,44,34,110,97,109,101,34,58,34,114,97,110,100,114,121,
	34,44,34,100,111,99,115,34,58,34,34,125,125,125,0
};

// {
//   "version": "1",
//   "name": "mempool",
//   "oneliner": "Memory Pool Counters",
//   "order": 30,
//   "docs": "",
//   "elements": 11,
//   "elem": {
//     "live": {
//       "type": "gauge",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "In use",
//       "format": "integer",
//       "index": 0,
//       "name": "live",
//       "docs": ""
//     },
//     "pool": {
//       "type": "gauge",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "In Pool",
//       "format": "integer",
//       "index": 8,
//       "name": "pool",
//       "docs": ""
//     },
//     "sz_wanted": {
//       "type": "gauge",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Size requested",
//       "format": "bytes",
//       "index": 16,
//       "name": "sz_wanted",
//       "docs": ""
//     },
//     "sz_actual": {
//       "type": "gauge",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Size allocated",
//       "format": "bytes",
//       "index": 24,
//       "name": "sz_actual",
//       "docs": ""
//     },
//     "allocs": {
//       "type": "counter",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Allocations",
//       "format": "integer",
//       "index": 32,
//       "name": "allocs",
//       "docs": ""
//     },
//     "frees": {
//       "type": "counter",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Frees",
//       "format": "integer",
//       "index": 40,
//       "name": "frees",
//       "docs": ""
//     },
//     "recycle": {
//       "type": "counter",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Recycled from pool",
//       "format": "integer",
//       "index": 48,
//       "name": "recycle",
//       "docs": ""
//     },
//     "timeout": {
//       "type": "counter",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Timed out from pool",
//       "format": "integer",
//       "index": 56,
//       "name": "timeout",
//       "docs": ""
//     },
//     "toosmall": {
//       "type": "counter",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Too small to recycle",
//       "format": "integer",
//       "index": 64,
//       "name": "toosmall",
//       "docs": ""
//     },
//     "surplus": {
//       "type": "counter",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Too many for pool",
//       "format": "integer",
//       "index": 72,
//       "name": "surplus",
//       "docs": ""
//     },
//     "randry": {
//       "type": "counter",
//       "ctype": "uint64_t",
//       "level": "debug",
//       "oneliner": "Pool ran dry",
//       "format": "integer",
//       "index": 80,
//       "name": "randry",
//       "docs": ""
//     }
//   }
// }


struct VSC_mempool*
VSC_mempool_New(struct vsmw_cluster *vc,
    struct vsc_seg **sg, const char *fmt, ...)
{
	va_list ap;
	struct VSC_mempool *retval;

	va_start(ap, fmt);
	retval = VRT_VSC_Alloc(vc, sg, vsc_mempool_name, VSC_mempool_size,
	    vsc_mempool_json, sizeof vsc_mempool_json, fmt, ap);
	va_end(ap);
	return(retval);
}

void
VSC_mempool_Destroy(struct vsc_seg **sg)
{
	struct vsc_seg *p;

	AN(sg);
	p = *sg;
	*sg = NULL;
	VRT_VSC_Destroy(vsc_mempool_name, p);
}
